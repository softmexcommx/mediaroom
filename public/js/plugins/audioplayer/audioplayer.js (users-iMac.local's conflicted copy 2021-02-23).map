{"version":3,"sources":["webpack://dzsap_webpack_external/../source/audioplayer/audioplayer.sourcepack.js","webpack://dzsap_webpack_external/../source/audioplayer/configs/_constants.js","webpack://dzsap_webpack_external/../source/audioplayer/configs/_settingsPlayer.js","webpack://dzsap_webpack_external/../source/audioplayer/configs/_settingsPlaylist.js","webpack://dzsap_webpack_external/../source/audioplayer/js_common/_dzs_helpers.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/_dzsap_ajax.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/_dzsap_helpers.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/_dzsap_misc.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/_dzsap_playlist.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/_dzsap_svgs.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/_dzsap_time_model.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/components/_comments.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/components/_nav.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/components/_structure.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/extra-functionality/_extraHtmlFunctions.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/extra-functionality/_innerPlaylist.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/helper-classes/_ClassMetaParts.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/media/_media_functions.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/media/_onePlayer_changeMedia.js","webpack://dzsap_webpack_external/../source/audioplayer/jsinc/wave-render/_wave-render-functions.js","webpack://dzsap_webpack_external/webpack/bootstrap","webpack://dzsap_webpack_external/webpack/runtime/define property getters","webpack://dzsap_webpack_external/webpack/runtime/hasOwnProperty shorthand","webpack://dzsap_webpack_external/webpack/runtime/make namespace object","webpack://dzsap_webpack_external/webpack/startup"],"names":["dzsHelpers","require","dzsapComments","dzsapSvgs","dzsapPlaylist","dzsapMisc","dzsapStructure","dzsapWaveFunctions","window","dzsap_list","dzsap_globalidind","loading_multi_sharer","dzsap_player_interrupted_by_dzsap","dzsap_audio_ctx","dzsap__style","dzsap_sticktobottom_con","dzsap_self_options","dzsap_generating_pcm","dzsap_box_main_con","dzsap_lasto","dzsap_syncList_players","dzsap_syncList_index","dzsap_base_url","dzsap_player_index","DzsAudioPlayer","constructor","argThis","argOptions","$","cthis","ajax_view_submitted","increment_views","the_player_id","currIp","index_extrahtml_toloads","starrating_alreadyrated","data_source","urlToAjaxHandler","playFrom","_actualPlayer","_audioplayerInner","_metaArtistCon","_conControls","_conPlayPauseCon","_apControls","_apControlsLeft","_apControlsRight","_commentsHolder","$mediaNode_","_scrubbar","_scrubbarbg_canvas","_scrubbarprog_canvas","$feed_fakeButton","_sourcePlayer","$realVisualPlayer","$theMedia","$conPlayPause","$conControls","$$scrubbProg","$controlsVolume","$currTime","$totalTime","$commentsWritter","$commentsChildren","$commentsSelector","$embedButton","$stickToBottomContainer","$reflectionVisualObject","audioType","audioTypeSelfHosted_streamType","skinwave_mode","action_audio_comment","commentPositionPerc","spectrum_audioContext","spectrum_audioContextBufferSource","spectrum_audioContext_buffer","spectrum_mediaElementSource","spectrum_analyser","spectrum_gainNode","isMultiSharer","hasInitialPcmData","lastArray","last_lastArray","player_playing","actualDataTypeOfMedia","youtube_retryPlayTimeout","lastTimeInSeconds","uniqueId","identifier_pcm","isAlreadyHasRealPcm","isPcmTryingToGenerate","isPlayPromised","isCanvasFirstDrawn","isPlayerLoaded","original_real_mp3","skin_minimal_canvasplay","classFunctionalityInnerPlaylist","feedEmbedCode","youtube_currentId","youtube_isInited","extraHtmlAreas","bottom","afterArtist","controlsLeft","controlsRight","sample_time_start","sample_time_end","sample_time_total","pseudo_sample_time_start","pseudo_sample_time_end","pseudo_sample_time_total","playlist_inner_currNr","timeCurrent","timeModel","PlayerTime","isSample","isSafeToChangeTrack","isMediaEnded","isSetupedMedia","isSentCacheTotalTime","isPcmRequiredToGenerate","radio_isGoingToUpdateSongName","radio_isGoingToUpdateArtistName","classMetaParts","_ClassMetaParts","inter_isEnded","classInit","set_sourcePlayer","$arg","reinit_beforeChangeMedia","attr","reinit_resetMetrics","service_checkIfWeShouldUpdateTotalTime","ajax_submit_total_time","o","selfClass","initOptions","cthisId","ww","cthisWidth","th","scrubbarWidth","scrubbarProgX","_theThumbCon","$scrubBgCanvas","_scrubBgCanvasCtx","isMuted","destroyed","google_analytics_sent_play_event","destroyed_for_rebuffer","media_isLoopActive","curr_time_first_set","isScrubShowingCurrentTime","isListenersSetup","last_time_total","currTime_outerWidth","player_index_in_gallery","volume_lastVolume","last_vol_before_mute","inter_checkReady","inter_60_secs_contor","inter_trigger_resize","data_station_main_url","res_thumbh","volume_dragging","volume_set_by_user","is_under_400","skin_minimal_button_size","scrubbar_moving","scrubbar_moving_x","aux3","dataSrc","canvasWidth","canh","scrubbar_h","design_thumbh","stringAudioElementHtml","defaultVolume","action_audio_end","action_audio_play","action_audio_play2","action_audio_pause","isNotRenderingEnterFrame","sw_spectrum_fakeit","duration_viy","begin_viy","change_viy","draw_canvas_inter","getSampleTimesFromDom","init","hasClass","play_media_visual","play_media","pause_media","media_pause","pause_media_visual","seek_to","reinit","handle_end","media_handleEnd","init_loaded","scrubbar_reveal","calculate_dims_time","struct_generate_thumb","setupStructure_thumbnailCon","check_multisharer","setup_structure_scrub","setup_structure_sanitizers","destroy_cmedia","view_drawCurrentTime","setup_pcm_random_for_now","view_wave_setupRandomPcm","handleResize","view_handleResize","destroy_media","css","addClass","keyboard_controls","dzsapHelpers","loop","design_skin","height","mobile_delete","mobile_disable_fakeplayer","scrubbar_type","dzsap_settings","syncPlayers_buildList","player_syncPlayers_buildList","dzsap_get_base_url","console","log","scriptUrl","loadScriptIfItDoesNotExist","dzsap_youtube_functions_inited","then","resolveStr","dzsap_youtube_functions_init","undefined","removeClass","view_drawScrubProgress","setTimeout","cueMedia","autoplay","retrieve_soundcloud_url","setup_structure","skinwave_comments_enable","comments_setupCommentsInitial","find","bind","indexOf","response","setup_media","isGoingToSetupMediaNow","setInterval","handleClickForSetupMedia","called_from","initObjects","get","classInstance","api_init_loaded","api_destroy","destroy_it","api_play","api_set_volume","volume_setVolume","api_get_last_vol","volume_getLast","api_get_source","api_click_for_setup_media","api_handleResize","api_set_playback_speed","set_playback_speed","api_change_media","media_changeMedia","api_seek_to_perc","seek_to_perc","api_seek_to","api_seek_to_visual","seek_to_visual","api_visual_set_volume","volume_setOnlyVisual","api_destroy_listeners","destroy_listeners","api_pause_media","api_get_media_isLoopActive","api_media_toggleLoop","media_toggleLoop","api_pause_media_visual","api_play_media","api_play_media_visual","api_handle_end","api_change_visual_target","change_visual_target","api_change_design_color_highlight","view_updateColorHighlight","api_draw_scrub_prog","api_draw_curr_time","api_get_times","refreshTimes","api_check_time","handleEnterFrame","api_sync_players_goto_next","syncPlayers_gotoNext","api_sync_players_goto_prev","syncPlayers_gotoPrev","api_regenerate_playerlist_inner","playlistInner_setupStructureInPlayer","api_step_back","arg","step_back_amount","api_step_forward","api_playback_speed","argSpeed","playbackRate","api_set_action_audio_play","api_set_action_audio_pause","api_set_action_audio_end","data","api_set_action_audio_comment","api_try_to_submit_view","service_submitView","on","handle_mouse","handleClick_playPause","addEventListener","e","passive","document","originalEvent","touches","pageX","offset","left","width","call_from","skinwave_comments_mode_outer_selector","comments_username","remove","comments_selector_event","off","handleClickLike","dzsap_part_starRatings_loaded","dzsap_init_starRatings_from_dzsap","skinwave_wave_mode","eq","handleClickMenuState","reflection_size","parseFloat","skinwave_wave_mode_canvas_reflection_size","scrubbarh","top","parent","outerHeight","pargs","margs","extend","$sourcePlayer_","api_set_timeVisualCurrent","design_wave_color_progress","view_drawCanvases","_t","has","length","ajax_retract_like","ajax_submit_like","unbind","parentgallery","api_toggle_menu_state","init_checkIfReady","nodeName","type","readyState","clearInterval","action_audio_loaded_metadata","aux_thumb_con_str","children","prepend","append","unwrap","each","aux","html","replace","svg_share_icon","outerHTML","wrapAll","String","svg_play_icon","pausebtn_svg","default_pcm","pcm_data_try_to_generate","pcm_data_try_to_generate_wait_for_real_pcm","i3","Number","Math","random","toFixed","JSON","stringify","skinwave_enableSpectrum","getContext","setupMediaAttrs","dzsap_youtube_setupMedia","newSource","preload_method","stringAudioElement","mediaFunctions","stringAudioTagSource","setupMediaElement","failsafe_repair_media_element","innerHTML","load","setup_listeners","handleMouseOnScrubbar","volume_handleClickMuteIcon","volume_handleMouse","settings_trigger_resize","clearTimeout","outerWidth","scrubModeWave__checkIfWeShouldTryToGetPcm","settings_exclude_from_list","push","type_audio_stop_buffer_on_unfocus","api_destroy_for_rebuffer","currentTime","default_volume","isNaN","localStorage","getItem","volume_from_gallery","isInt","Storage","playFrom_ready","do_not_autoplay","duration","action_video_contor_60secs","count_60secs","isGoingToActivate","$t","ajax_submit_download","handleClick_prevBtn","handleClick_nextBtn","toggleClass","_target","api_seek_to_0","api_playback_slow","api_playback_reset","preview_on_hover","dzsap_mouseover","getVisualCurrentTime","totalTime","getVisualTotalTime","drawMeter","Uint8Array","frequencyBinCount","getByteFrequencyData","len","i","last_lastarray","easeIn","draw_canvas","design_wave_color_bg","parseInt","skinwave_wave_mode_canvas_waves_number","skinwave_wave_mode_canvas_waves_padding","slice","skinwave_timer_static","view_updateTotalTime","fadeIn","style","api_goto_prev","api_goto_next","fire_only_once","requestAnimationFrame","processCurrentFrame","ctx_minimal","ctx_w","ctx_h","pw","ph","PI","clearRect","beginPath","arc","fillStyle","fill","lineWidth","strokeStyle","stroke","stopPropagation","preventDefault","isToggleCancelled","inter_checkTotalTime","center_x","center_y","mouse_x","mouse_y","pageY","perc","abs","syncPlayers_gotoItem","targetIncrement","targetIndex","playlistInner_gotoItem","player_syncPlayers_gotoItem","api_gallery_handle_end","args","after","cthis_height","aux2","sh","draw_canvas_inter_func","_metaArtistCon_l","_metaArtistCon_w","embedded","frameElement","embedded_iframe_id","message","name","params","postMessage","mouseXRelativeToVolume","round","mousex","target","scrub_show_scrub_time","targetPositionOnScrub","autoplay_on_scrub_click","argperc","targetTimeMediaScrub","deeplinking","newlink","location","href","stateObj","foo","history","pushState","getActualTargetTime","fakeplayer_is_feeder","seekTo","err","setPlaybackRate","setVolume","volume","skinwave_dynamicwaves","setItem","call_actual_player","donot_change_media","player_determineSyncPlayersIndex","index","api_goto_item","call_from_aux","delay","google_analytics_send_play_event","_gaq","ga","__gaTracker","hitType","eventCategory","eventAction","eventLabel","api_regenerate_sync_players_with_this_playlist","ajax_submit_views","dzsap_youtube_playMedia","dzsap_currplayer_focused","play_trigger_step_back","register_dzsap_plugin","t","b","c","d","fn","audioplayer","finalOptions","defaultOptions","Object","assign","_ap","registerToJquery","jQuery","dzsap_singleton_ready_calls_is_called","getBaseUrl","register_dzsap_callScriptsOnReady","ready","dzsap_singleton_ready_calls","dzsag_init","init_each","dzsap_currplayer_from_share","dzsap_init_allPlayers","_t2","dzsap_init","dzsap_jQueryInit","callback","reject","Promise","resolve","script","createElement","onload","src","ConstantsDzsAp","head","appendChild","catch","selector","settings","element_count"],"mappings":"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;;AC5/HO;AACP;AACA,+CAA+C,gBAAgB;AAC/D,+CAA+C,gBAAgB;AAC/D,+CAA+C,gBAAgB;AAC/D,mDAAmD,gBAAgB;AACnE;AACA;AACA;AACA,yDAAyD,gBAAgB;AACzE;AACA;AACA;;;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qFAAqF;;AAErF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;;AAEpB,oIAAoI,WAAW;;;;;;;;;;;;;;;ACnG/I,oBAAoB;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;AC/BA,mBAAmB;AACnB;;AAEA;;AAEA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kCAAkC;AAClC;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA,aAAa;AACb;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAiC;AACjC,qCAAqC;AACrC,gCAAgC;AAChC,aAAa;AACb;AACA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA,GAAG;;AAEH,uCAAuC,yBAAyB,qJAAqJ,oCAAoC,0BAA0B,wDAAwD,8BAA8B;AACzW;;;AAGA,aAAa;AACb;AACA;;AAEA,eAAe;AACf;AACA;;;AAGA,oBAAoB;AACpB;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxGiD;AACjD,mBAAmB,mBAAO,CAAC,kFAA2B;;AAE/C;;AAEP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA,oBAAoB,4DAA6B;AACjD;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;;AAGO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGO;AACP;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA,yMAAyM;AACzM,eAAe,sDAAuB;;;AAGtC;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;;;AAGA;AACA;AACA;;;AAGA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;;AAGA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrXA,kBAAkB,mBAAO,CAAC,iEAAe;AACzC,mBAAmB,mBAAO,CAAC,kFAA2B;;AAE/C;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEO;AACP;AACA;;AAEO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;;;AAGO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,oBAAoB;;;AAGpB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;;AAGO;;AAEP;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA;;;AAGO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;;AAGO;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;;;AAGP;AACA,uKAAuK,qBAAqB;AAC5L;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;;AAEP;AACA,yCAAyC,EAAE;;AAE3C;AACA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qCAAqC;AACrC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGO;AACP,4BAA4B,EAAE,UAAU,EAAE,UAAU,EAAE;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;;AAGA;AACA;;;AAGA;;AAEA;;;AAGA;;AAEO;;AAEP;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA,eAAe;AACf;AACO;;AAEP;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACO;AACP;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,GAAG;AACH;;AAEO;;AAEP;AACA;AACA,yEAAyE,QAAQ;AACjF;AACA;AACA;;;AAGA;AACA;;AAEO;;;AAGP;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA,yBAAyB,oBAAoB;AAC7C,oBAAoB,QAAQ;AAC5B;AACA,2BAA2B,oBAAoB;AAC/C;;AAEA;;;AAGA;;AAEA;AACA;;;AAGA;;AAEA,KAAK;AACL;;AAEA;AACA;AACA;;;AAGA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA,yBAAyB,UAAU;;AAEnC;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;;;AAIO;;AAEP;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEO;;AAEP;;AAEA;AACA;AACA,aAAa,MAAM;AACnB,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,oDAAoD;;;AAG5G;AACA;AACA,aAAa;;AAEb;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;;AAGA;;AAEA;;;AAGA;AACA;;;;;;AAMA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA,KAAK;AACL;;;;;;;;AAQA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;;AAGH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,GAAG;;;AAGH;;AAEA;;;AAGA;;AAEA;;AAEA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;;AAEA,KAAK;AACL;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA,GAAG;;;AAGH;;;AAGO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;;;AAKO;;AAEP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGO;;AAEP;AACA;;AAEA,kBAAkB,YAAY;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC,sBAAsB,sBAAsB,wBAAwB;AAC7G;;AAEO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL,GAAG;AACH;AACA,GAAG;AACH;;;AAGA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACO;;;AAGP;;AAEA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA,WAAW,eAAe;AAC1B;AACO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGO;AACP;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;;;AAGP;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACO;AACP;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;;AAEO;;;AAGP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEO;;AAEP,qDAAqD;;;AAGrD;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACO;;AAEP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,aAAa;AACb;AACO;AACP;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA,GAAG;AACH;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEO;;;AAGP;AACA,yEAAyE,WAAW;AACpF,yEAAyE,WAAW;;AAEpF;AACA;;;AAGA;AACA;;;AAGA;;;AAGO;;;AAGP;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;;AAEO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEO;AACP;AACA;;AAEO;;AAEP;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA,uGAAuG,gBAAgB;AACvH;;AAEA;AACA;AACA;AACA;AACA,qFAAqF,WAAW,cAAc;AAC9G,qFAAqF,YAAY;AACjG;AACA;;AAEO;;AAEP;AACA,aAAa,uBAAuB;AACpC;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACO;;AAEP;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACO;;AAEP;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA,OAAO;;;AAGP;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;;AAGO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;;AAEP;AACA;;AAEA;;AAEA,mBAAmB,cAAc;AACjC;;AAEA;;AAEA;AACA;;;AAGO;AACP;AACA;AACA;AACA;;;AAGO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;;;;;;;;;AC7xEqD;;AAErD,2BAA2B,mBAAO,CAAC,+GAAsC;;AAElE;;;AAGP;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA,mCAAmC,gFAAgC;AACnE;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET,mCAAmC,gFAAgC;AACnE;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;;AAGT;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;;;;;;;;;;;;;;;;;;;;;;AC7GiD;;AAEjD,sBAAsB,mBAAO,CAAC,yEAAmB;;AAEI;;AAErD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA,wBAAwB;;AAExB;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,kCAAkC;;AAElC;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,0BAA0B,8EAA+C,oBAAoB;AAC7F,SAAS;AACT;AACA;;AAEA,4BAA4B,8EAA+C,wBAAwB;AACnG;AACA;AACA,OAAO;AACP;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;;;AAGA,kFAAkF;AAClF;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;;AAEA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,OAAO;AACP;AACA;AACA;AACA;;;AAGA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;;AAGA;;;AAGA,UAAU,2DAA4B;AACtC;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;;AAGA,UAAU,yDAA0B;AACpC,wBAAwB,yDAA0B;;AAElD;AACA,mBAAmB,yDAA0B,mEAAmE,yDAA0B;;AAE1I;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,aAAa;;;AAGzE;;AAEA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA,8CAA8C;AAC9C;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;;;AAGT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb,WAAW,EAAE,2FAA2C;;;AAGxD;AACA;;;AAGA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW;AACX;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;;AAGA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB,2CAA2C;;AAEnE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;;AAEP;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,oDAAoD;;AAE5G;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA,mBAAmB,4DAA6B;AAChD;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,iBAAiB,4BAA4B;AAC7C;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA,mIAAmI,sBAAsB;AACzJ;AACA,6FAA6F,+BAA+B,gCAAgC,iCAAiC;AAC7L;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA,WAAW;;AAEX;AACA,gHAAgH,0CAA0C;AAC1J;;AAEA;;;AAGA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;;AAGA;AACA;;;AAGA,UAAU,kDAAmB,eAAe,sDAAuB;AACnE;AACA;AACA,SAAS;AACT;;;AAGA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS,EAAE,2FAA2C;AACtD;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA,UAAU,KAAmC,EAAE,wBAgCxC;;;AAGP;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;;AAEA,SAAS;;AAET;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA,gEAAgE;;;AAGhE,gFAAgF;;AAEhF;AACA;AACA;AACA;AACA,iEAAiE;;AAEjE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA,mCAAmC;;AAEnC,gEAAgE;;AAEhE;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAwD,kCAAkC;AAC1F,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,EAAE,2FAA2C;;AAEtD;AACA;AACA,4BAA4B;AAC5B,8CAA8C,yDAA0B;AACxE;AACA;;AAEA;AACA,qCAAqC,2FAA2C;AAChF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA,6HAA6H;AAC7H;AACA;AACA,SAAS;;;AAGT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,mCAAmC;;;AAGnC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,yBAAyB,0HAAoD;AAC7E,mBAAmB,8EAA+C;;;AAGlE;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AC1sCA;AACA;;;;;;AAMA,kRAAkR;;;;AAIlR;;;;AAIA;AACA;;;;;;AAMA;AACA;;;AAGA;;;AAGA,2BAA2B;AAC3B,qBAAqB;AACrB,oBAAoB;AACpB,oBAAoB;AACpB,sBAAsB;;AAEtB,wBAAwB;AACxB,mBAAmB;AACnB,sBAAsB;AACtB,oBAAoB;;;;;;;;;;;;;;;;;;;;;ACzC6B;;AAEjD;AACA;AACA;AACO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;AAKA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,YAAY,KAA+J,EAAE,EAMpK;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3VA,kBAAkB,mBAAO,CAAC,kEAAgB;AAC1C,mBAAmB,mBAAO,CAAC,qFAA8B;AACP;;AAElD;AACA,uMAAuM;AACvM;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mIAAmI;AACnI;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;;;AAGvC;;;AAGP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;AACH;;AAEO;AACP;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA,GAAG;;AAEH;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;;AAGA;AACA,gDAAgD,qBAAqB;;AAErE;AACA;;;AAGA;AACA;AACA,GAAG;AACH;AACA;;AAEA,mFAAmF,sDAAsD;;AAEzI,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACO;;AAEP;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA,WAAW;AACX;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;;AAEA;;;AAGA;;AAEA,qFAAqF,sDAAuB;AAC5G,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AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,KAAK;;;AAGL;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA,OAAO,OAAO;;AAEd;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;;;AAGA;;;AAGA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;;AAGA;;AAEA;;AAEA;;;AAGA;;;AAGA;;;AAGA;;AAEA;AACA;;;AAGA;AACA;;;AAGA,KAAK;AACL;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA,OAAO;;AAEP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,OAAO;AAClB,WAAW,YAAY;AACvB;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC95BO;;;AAGP;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA,GAAG;AACH;;AAEO;;AAEP;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;;;;;;;;;;;;;;;;;;;;;ACtFA;AACA;AACA;AACA;AACA,kBAAkB,mBAAO,CAAC,kEAAgB;;AAEnC;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;;AAGL;;AAEA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA,WAAW;;;AAGX;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;;AAGT;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA,4CAA4C;AAC5C;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;AAGA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;;AAGA;;;AAGA;;;AAGA;;AAEA;AACA,SAAS;;AAET,OAAO;;;AAGP;AACA;AACA,SAAS;;AAET,4CAA4C;;AAE5C;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;AC9SO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbkD;AACS;AACH;;AAExD;AACA;AACA,WAAW,eAAe;AAC1B;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;;AAGA,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;;AAEb,kBAAkB,iDAAkB;AACpC;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;;AAEf;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;;AAEH;;AAEO;;AAEP;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;;AAEO;;AAEP;;;AAGA;AACA;;;AAGA;AACA,eAAe,iBAAiB;AAChC;;AAEA;AACA;AACA,2BAA2B,2DAA4B;AACvD,mCAAmC,gFAAgC;AACnE,wEAAwE;;AAExE,6BAA6B,uFAAuC;AACpE;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA,SAAS;;AAET;;AAEA;AACA,qCAAqC,gFAAgC;AACrE;AACA;AACA;AACA;AACA,mCAAmC,gEAAuB;AAC1D;AACA,wLAAwL;AACxL;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;;AAGA;AACA,qDAAqD,gBAAgB;;AAErE;AACA,IAAI,qEAAsC;;AAE1C,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGO;;AAEP;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;AACO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACO;;AAEP;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,KAAC,EAAE,EACN;AACL;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;ACjWkD;;AAElD,kBAAkB,mBAAO,CAAC,kEAAgB;AAC1C,2BAA2B,mBAAO,CAAC,gHAAuC;AAClB;;AAExD;AACA;AACA,WAAW,eAAe;AAC1B;AACA,aAAa;AACb;AACO;AACP;AACA,oEAAoE,yCAAyC;AAC7G,aAAa,mBAAmB;AAChC,qBAAqB;AACrB,eAAe;AACf;AACA,yCAAyC;;;AAGzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,yCAAyC;;AAEzC,uDAAuD;AACvD,uDAAuD;AACvD;AACA,2BAA2B;AAC3B;AACA;AACA,kFAAkF,gDAAgD;;AAElI,iEAAiE,gBAAgB;AACjF;;;AAGA;AACA,0CAA0C;AAC1C,8CAA8C;AAC9C;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,uBAAuB,4EAA6C;AAC7F;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,gDAAgD,4EAA6C;AAC7F;;;AAGA,+CAA+C,mBAAmB;AAClE,+CAA+C,mBAAmB;;AAElE;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA,gCAAgC,gFAAgC;;;AAGhE;;;AAGA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET,UAAU,kFAAmD;AAC7D;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,2FAA2F;;;AAG3F,IAAI,oEAAqC;AACzC,oEAAoE;;;AAGpE;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA,2EAA2E;;AAE3E,oBAAoB,gBAAgB;AACpC;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvXkD;;AAEM;AACG;;AAE3D;AACA;;;AAGA,sBAAsB,SAAI;;AAE1B;AACA;AACA;AACA;AACA,aAAa;AACb;AACO;;;AAGP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,4EAA4B;AACpF;AACA,KAAK;AACL;AACA;;;;AAIA,kBAAkB,sBAAsB;AACxC;;AAEA;;AAEA;;;AAGA;;AAEA,uHAAuH,2FAA2C;;AAElK;AACA,sBAAsB,cAAc;;AAEpC;;AAEA;AACA,MAAM,8EAAqC;AAC3C;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;;;AAGA;AACA;AACA;;AAEA,EAAE,yEAA0C;AAC5C;AACA,GAAG;;AAEH;;;AAGA;AACA,IAAI,iFAAkD;AACtD,GAAG;;AAEH;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,8DAA+B;;AAE5C;AACA;AACA;AACA,OAAO,2FAA2F;;AAElG;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;;AAEA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;;AAGA,kBAAkB,gBAAgB;AAClC;AACA;;AAEA;AACA,kBAAkB,kBAAkB;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;;AAEA;AACA;;;AAGA,2CAA2C;;AAE3C;;;AAGA;AACA;AACA;AACA,eAAe;AACf;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,qBAAqB;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,wCAAwC,iEAAiE;AACzG;;AAEA;AACA;;AAEA;AACA,wCAAwC,eAAe;AACvD;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;AAGA;AACA;AACA;AACA,sBAAsB,6CAA6C;;AAEnE;AACA;AACA,qCAAqC,oDAAqB;AAC1D,SAAS;AACT,sDAAsD,oDAAqB;AAC3E;;;AAGA;;AAEA,+FAA+F,oDAAqB;AACpH,6FAA6F,oDAAqB;;AAElH;AACA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,qCAAqC,oDAAqB;AAC1D,SAAS;AACT,0BAA0B,SAAS;AACnC,sDAAsD,oDAAqB;AAC3E;;AAEA;AACA;AACA,+FAA+F,oDAAqB,CAAC,iEAAkC,6BAA6B,iEAAkC;AACtN,6FAA6F,oDAAqB,CAAC,iEAAkC,6BAA6B,iEAAkC;;AAEpN;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,eAAe;AACjH;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;UCjgBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"audioplayer.js","sourcesContent":["/*\n * Author: Audio Player with Playlist\n * Website: https://digitalzoomstudio.net/\n * Portfolio: https://bit.ly/nM4R6u\n * Version: 6.19\n * */\n\nimport * as dzsapHelpers from './jsinc/_dzsap_helpers';\nimport * as mediaFunctions from \"./jsinc/media/_media_functions\";\nimport {setupMediaElement} from \"./jsinc/media/_media_functions\";\nimport {media_changeMedia} from './jsinc/media/_onePlayer_changeMedia';\nimport {PlayerTime} from './jsinc/_dzsap_time_model';\nimport {\n  ajax_retract_like,\n  ajax_submit_download,\n  ajax_submit_like,\n  ajax_submit_total_time,\n  ajax_submit_views\n} from \"./jsinc/_dzsap_ajax\";\n\nimport {ConstantsDzsAp} from \"./configs/_constants\";\nimport {_ClassMetaParts} from \"./jsinc/helper-classes/_ClassMetaParts\";\nimport {player_syncPlayers_buildList, player_syncPlayers_gotoItem, dzsap_singleton_ready_calls} from \"./jsinc/_dzsap_helpers\";\n\nconst dzsHelpers = require('./js_common/_dzs_helpers');\n\nconst dzsapComments = require('./jsinc/components/_comments');\nconst dzsapSvgs = require('./jsinc/_dzsap_svgs');\nconst dzsapPlaylist = require('./jsinc/_dzsap_playlist');\nconst dzsapMisc = require('./jsinc/_dzsap_misc');\nconst dzsapStructure = require('./jsinc/components/_structure');\nconst dzsapWaveFunctions = require('./jsinc/wave-render/_wave-render-functions');\n\n\nwindow.dzsap_list = []; // -- this is for the players\n\nvar dzsap_globalidind = 20;\n\n\nwindow.loading_multi_sharer = false;\n\nwindow.dzsap_player_interrupted_by_dzsap = null;\nwindow.dzsap_audio_ctx = null;\nwindow.dzsap__style = null;\nwindow.dzsap_sticktobottom_con = null;\n\nwindow.dzsap_self_options = {};\n\nwindow.dzsap_generating_pcm = false;\nwindow.dzsap_box_main_con = null;\nwindow.dzsap_lasto = null;\nwindow.dzsap_syncList_players = []; // -- used for next .. prev .. footer playlist\nwindow.dzsap_syncList_index = 0; // -- used for next .. prev .. footer playlist\nwindow.dzsap_base_url = '';\n\nwindow.dzsap_player_index = 0; // -- the player index on the page\n\n/**\n * Main player class\n * @class\n * @property {boolean} isAlreadyHasRealPcm\n * @property {boolean} isPcmRequiredToGenerate\n * @property {boolean} isMultiSharer\n * @property {string} identifier_pcm\n * @property {HTMLElement} $mediaNode_\n * @constructor\n * @public\n */\nclass DzsAudioPlayer {\n  constructor(argThis, argOptions, $) {\n\n    this.argThis = argThis;\n    this.argOptions = argOptions;\n    this.$ = $;\n    this.cthis = null;\n\n    this.ajax_view_submitted = 'auto';\n    this.increment_views = 0;\n    this.the_player_id = '';\n    this.currIp = '127.0.0.1';\n    this.index_extrahtml_toloads = 0;\n    this.starrating_alreadyrated = -1;\n    this.data_source = '';\n\n    this.urlToAjaxHandler = null;\n\n\n    this.playFrom = '';\n\n\n    this._actualPlayer = null;\n    this._audioplayerInner = null;\n    this._metaArtistCon = null;\n    this._conControls = null;\n    this._conPlayPauseCon = null;\n    this._apControls = null;\n    this._apControlsLeft = null;\n    this._apControlsRight = null;\n    this._commentsHolder = null;\n    this.$mediaNode_ = null;\n    this._scrubbar = null;\n    this._scrubbarbg_canvas = null;\n    this._scrubbarprog_canvas = null;\n    this.$feed_fakeButton = null;\n    this._sourcePlayer = null;\n    this.$realVisualPlayer = null; // -- real visual player can be _sourcePlayer if this is a fake feed or this if not\n    this.$theMedia = null;\n    this.$conPlayPause = null; // -- [selector] .con-playpause\n    this.$conControls = null;\n    this.$$scrubbProg = null;\n    this.$controlsVolume = null;\n    this.$currTime = null;\n    this.$totalTime = null;\n    this.$commentsWritter = null;\n    this.$commentsChildren = null;\n    this.$commentsSelector = null;\n    this.$embedButton = null;\n    this.$stickToBottomContainer = null;\n    /** a reflection object for triggering the player from outside */\n    this.$reflectionVisualObject = null;\n\n\n    this.audioType = 'normal';\n    this.audioTypeSelfHosted_streamType = '';\n    this.skinwave_mode = 'normal';\n    this.action_audio_comment = null; // -- set a outer ended function ( for example for tracking your analytics\n\n    this.commentPositionPerc = 0;// --the % at which the comment will be placed\n\n    this.spectrum_audioContext = null;\n    this.spectrum_audioContextBufferSource = null;\n    this.spectrum_audioContext_buffer = null;\n    this.spectrum_mediaElementSource = null;\n    this.spectrum_analyser = null;\n    this.spectrum_gainNode = null;\n\n    this.isMultiSharer = false;\n    this.hasInitialPcmData = false;\n\n    this.lastArray = null;\n    this.last_lastArray = null;\n\n    this.player_playing = false;\n\n    this.actualDataTypeOfMedia = 'audio'; // \"audio\" or\n\n    this.youtube_retryPlayTimeout = 0;\n    this.lastTimeInSeconds = 0;\n\n\n    // -- pcm\n    this.uniqueId = '';\n    this.identifier_pcm = ''; // -- can be either player id or source if player id is not set\n    this.isAlreadyHasRealPcm = false;\n    this.isPcmTryingToGenerate = false;\n    this.isPlayPromised = false // -- we are promising generating on meta load\n    this.isCanvasFirstDrawn = false // -- the first draw on canvas\n    this.isPlayerLoaded = false;\n\n    this.original_real_mp3 = '' // -- this is the original real mp3 for sainvg and identifying in the database\n\n    // -- theme specific\n    this.skin_minimal_canvasplay = null;\n\n    this.classFunctionalityInnerPlaylist = null;\n    this.feedEmbedCode = '';\n\n    this.youtube_currentId = 0;\n    this.youtube_isInited = false;\n\n    this.extraHtmlAreas = {\n      bottom: '',\n      afterArtist: '',\n      controlsLeft: '',\n      controlsRight: '',\n    }\n\n    // -- time vars\n    this.sample_time_start = 0;\n    this.sample_time_end = 0;\n    this.sample_time_total = 0;\n    this.pseudo_sample_time_start = 0\n    this.pseudo_sample_time_end = 0\n    this.pseudo_sample_time_total = 0\n    this.playlist_inner_currNr = 0\n\n    this.timeCurrent = 0; // -- *deprecated\n    this.timeModel = new PlayerTime(this);\n\n    this.isSample = false;\n    this.isSafeToChangeTrack = false // -- only after 2 seconds of init is it safe to change track\n    this.isMediaEnded = false;\n    /** is first setuped media */\n    this.isSetupedMedia = false;\n    this.isSentCacheTotalTime = false;\n    this.isPcmRequiredToGenerate = false;\n    this.radio_isGoingToUpdateSongName = false;\n    this.radio_isGoingToUpdateArtistName = false;\n\n    this.classMetaParts = new _ClassMetaParts(this);\n\n    this.inter_isEnded = 0;\n\n\n    this.classInit();\n  }\n\n  set_sourcePlayer($arg) {\n    this._sourcePlayer = $arg;\n  }\n\n\n  reinit_beforeChangeMedia() {\n    this.hasInitialPcmData = false;\n    this.isPcmRequiredToGenerate = false;\n    this.isAlreadyHasRealPcm = false;\n    this.cthis.attr('data-pcm', '');\n  }\n\n  reinit_resetMetrics() {\n    this.isPlayerLoaded = false;\n  }\n\n\n  service_checkIfWeShouldUpdateTotalTime() {\n    ajax_submit_total_time(this);\n  }\n\n  classInit() {\n    // console.log('this -> ', this);\n\n    // console.log('process - ', process);\n\n    var $ = this.$;\n    var o = this.argOptions;\n    var cthis = $(this.argThis);\n\n    var selfClass = this;\n\n\n    selfClass.cthis = cthis;\n    selfClass.initOptions = o;\n\n    var cthisId = 'ap1'\n    ;\n    var ww, cthisWidth, th // -- controls width\n      , scrubbarWidth = 0 // -- scrubbar width\n      , scrubbarProgX = 0 // -- scrubbar prog pos\n    ;\n    var _theThumbCon\n      , $scrubBgCanvas = null,\n      _scrubBgCanvasCtx = null;\n    var isMuted = false,\n      destroyed = false,\n      google_analytics_sent_play_event = false,\n      destroyed_for_rebuffer = false\n      , media_isLoopActive = false // -- if loop_active the track will loop\n      , curr_time_first_set = false\n      , isScrubShowingCurrentTime = false\n      , isListenersSetup = false\n    ;\n    var last_time_total = 0\n      , currTime_outerWidth = 0\n      , player_index_in_gallery = -1 // -- the player index in gallery\n    ;\n\n\n    var volume_lastVolume = 1,\n      last_vol_before_mute = 1\n    ;\n    var inter_checkReady\n      , inter_60_secs_contor = 0\n      , inter_trigger_resize;\n    var data_station_main_url = ''\n    ;\n\n    var res_thumbh = false\n      , volume_dragging = false\n      , volume_set_by_user = false // -- this shows if the user actioned on the volume\n      , is_under_400 = false\n\n\n    ; // resize thumb height\n\n\n    var skin_minimal_button_size = 0;\n\n    // -- touch controls\n    var scrubbar_moving = false\n      , scrubbar_moving_x = 0\n      , aux3 = 0\n    ;\n\n\n    var dataSrc = '';\n    var canvasWidth = 100;\n    var canh = 100;\n    var scrubbar_h = 75\n      , design_thumbh\n    ;\n\n\n    var stringAudioElementHtml = '';\n\n\n    var defaultVolume = 1;\n\n    var action_audio_end = null\n      , action_audio_play = null\n      , action_audio_play2 = null\n      , action_audio_pause = null\n\n\n    var isNotRenderingEnterFrame = true\n      , sw_spectrum_fakeit = 'auto'\n    ;\n\n\n    var duration_viy = 20;\n    var begin_viy = 0;\n    var change_viy = 0;\n\n\n    var draw_canvas_inter = 0;\n\n\n    // console.log(cthis, o);\n\n\n    window.dzsap_player_index++;\n\n\n    selfClass.timeModel.getSampleTimesFromDom();\n\n\n    init();\n\n    function init() {\n      //console.log(typeof(o.parentgallery)=='undefined');\n\n\n      // console.log('cthis - - on init - ', cthis);\n\n\n      if (cthis.hasClass('dzsap-inited')) {\n        return false;\n      }\n\n      selfClass.play_media_visual = play_media_visual;\n      selfClass.play_media = play_media;\n      selfClass.pause_media = media_pause;\n      selfClass.pause_media_visual = pause_media_visual;\n      selfClass.seek_to = seek_to;\n      selfClass.reinit = reinit;\n\n      selfClass.handle_end = media_handleEnd;\n      selfClass.init_loaded = init_loaded;\n      selfClass.scrubbar_reveal = scrubbar_reveal;\n      selfClass.calculate_dims_time = calculate_dims_time;\n      selfClass.struct_generate_thumb = setupStructure_thumbnailCon;\n      selfClass.check_multisharer = check_multisharer;\n      selfClass.setup_structure_scrub = setup_structure_scrub;\n      selfClass.setup_structure_sanitizers = setup_structure_sanitizers;\n      selfClass.destroy_cmedia = destroy_cmedia;\n      selfClass.view_drawCurrentTime = view_drawCurrentTime;\n      selfClass.setupStructure_thumbnailCon = setupStructure_thumbnailCon;\n      selfClass.setup_pcm_random_for_now = view_wave_setupRandomPcm;\n      selfClass.handleResize = view_handleResize;\n      selfClass.destroy_media = destroy_media;\n\n      cthis.css({'opacity': ''});\n      cthis.addClass('dzsap-inited');\n      window.dzsap_player_index++;\n\n\n      // console.log('cthis - ',cthis,o);\n\n      selfClass.keyboard_controls = dzsapHelpers.dzsap_generate_keyboard_controls();\n\n      dzsapHelpers.configureAudioPlayerOptionsInitial(cthis, o, selfClass);\n\n      if(o.loop=='on'){\n        media_isLoopActive = true;\n      }\n\n      (dzsapHelpers.player_detect_skinwave_mode.bind(selfClass))()\n\n\n      if (o.design_skin === 'skin-default') {\n        if (o.design_thumbh === 'default') {\n          design_thumbh = cthis.height() - 40;\n          res_thumbh = true;\n        }\n      }\n\n\n      if (dzsapHelpers.dzsap_is_mobile()) {\n        $('body').addClass('is-mobile');\n        if (o.mobile_delete === 'on') {\n          dzsapHelpers.player_delete(selfClass);\n        }\n        // -- disable fakeplayer on mobile for some reason\n        if (o.mobile_disable_fakeplayer === 'on') {\n          selfClass.cthis.attr('data-fakeplayer', '');\n        }\n      }\n\n\n      dzsapHelpers.player_viewApplySkinWaveModes(selfClass);\n\n      // console.log(o.design_wave_color_bg, o.design_wave_color_prog); 1\n\n\n      if (o.design_thumbh === 'default') {\n        design_thumbh = 200;\n      }\n\n\n      dzsapHelpers.playerFunctions(selfClass, 'detectIds');\n\n      // console.log('selfClass.the_player_id - ',selfClass.the_player_id);\n\n\n      if (cthis.attr('data-fakeplayer')) {\n        dzsapHelpers.player_determineActualPlayer(selfClass);\n      }\n      // console.log('selfClass._actualPlayer - ', selfClass._actualPlayer);\n\n      selfClass.cthis.addClass('scrubbar-type-' + o.scrubbar_type);\n\n\n      dzsapHelpers.player_determineHtmlAreas(selfClass);\n\n\n      // -- syncPlayers build\n      if (window.dzsap_settings.syncPlayers_buildList === 'on') {\n        player_syncPlayers_buildList()\n      }\n\n      // console.log('window.dzsap_syncList_players - ',window.dzsap_syncList_players);\n\n\n      dzsapHelpers.player_getPlayFromTime(selfClass);\n\n\n      dzsapHelpers.player_adjustIdentifiers(selfClass);\n      dzsapHelpers.player_identifySource(selfClass);\n      dzsapHelpers.player_identifyTypes(selfClass);\n\n\n      // console.log('init()');\n      if (selfClass.audioType === 'youtube') {\n        window.dzsap_get_base_url();\n        console.log('window.dzsap_base_url- ', window.dzsap_base_url);\n        const scriptUrl = window.dzsap_base_url ? window.dzsap_base_url + '/parts/youtube/dzsap-youtube-functions.js' : '';\n        dzsHelpers.loadScriptIfItDoesNotExist(scriptUrl, window.dzsap_youtube_functions_inited).then((resolveStr) => {\n          dzsap_youtube_functions_init(selfClass);\n        });\n      }\n\n\n      selfClass.audioTypeSelfHosted_streamType = '';\n\n      // console.log('type - ',type, cthis.attr('data-streamtype'));\n\n\n      if (selfClass.audioType === 'selfHosted') {\n        if (cthis.attr('data-streamtype') && cthis.attr('data-streamtype') !== 'off') {\n          selfClass.audioTypeSelfHosted_streamType = cthis.attr('data-streamtype');\n          data_station_main_url = selfClass.data_source;\n          cthis.addClass('is-radio-type');\n        } else {\n          selfClass.audioTypeSelfHosted_streamType = '';\n        }\n      }\n\n      // -- no shoutcast autoupdate at the moment 2 3 4 5 6 7 8\n      if (selfClass.audioTypeSelfHosted_streamType === 'shoutcast') {\n        // selfClass.audioTypeSelfHosted_streamType = '';\n\n        // -- todo: we\n      }\n\n\n      // console.log('selfClass.audioTypeSelfHosted_streamType - ', selfClass.audioTypeSelfHosted_streamType, 'cthis.attr(\\'data-source\\') - ', cthis.attr('data-source'), 'selfClass.audioType - ', selfClass.audioType);\n\n\n      // -- we disable the function if audioplayer inited\n      if (cthis.hasClass('audioplayer')) {\n        return;\n      }\n      //console.log('ceva');\n\n      if (cthis.attr('id') !== undefined) {\n        cthisId = cthis.attr('id');\n      } else {\n        cthisId = 'ap' + dzsap_globalidind++;\n      }\n\n\n      selfClass.youtube_currentId = 'ytplayer_' + cthisId;\n\n\n      cthis.removeClass('audioplayer-tobe');\n      cthis.addClass('audioplayer');\n\n      view_drawScrubProgress();\n      setTimeout(function () {\n        view_drawScrubProgress()\n      }, 1000);\n\n\n      //===ios does not support volume controls so just let it die\n      //====== .. or autoplay FORCE STAFF\n\n\n      // console.log('o.autoplay here - ',o.autoplay, cthis);  22\n\n      if (o.cueMedia === 'off') {\n\n        // -- cue is forcing autoplay on\n        cthis.addClass('cue-off');\n        o.autoplay = 'on';\n      }\n\n      // console.log('o.autoplay here - ',o.autoplay, cthis);\n\n\n      //====sound cloud INTEGRATION //\n      //console.log(o.type);\n      if (selfClass.audioType === 'soundcloud') {\n        dzsapMisc.retrieve_soundcloud_url(selfClass);\n      }\n      // -- END soundcloud INTEGRATION//\n\n\n      // console.log('init - ', selfClass);\n      dzsapStructure.setup_structure(selfClass); //  -- inside init()\n\n      //console.log(cthis, dzsapHelpers.is_ios(), o.type);\n      //trying to access the youtube api with ios did not work\n\n\n      // debugger;\n      if (o.scrubbar_type === 'wave' && (selfClass.audioType === 'selfHosted' || selfClass.audioType === 'soundcloud' || selfClass.audioType === 'fake') && o.skinwave_comments_enable === 'on') {\n        dzsapComments.comments_setupCommentsInitial(selfClass);\n      }\n\n      //console.log();\n\n\n      if (o.autoplay === 'on' && o.cueMedia === 'on') {\n        selfClass.increment_views = 1;\n      }\n\n\n      // -- soundcloud will setupmedia when api done\n\n      // console.log('o.cueMedia -', o.cueMedia, selfClass.audioType);\n      if (o.cueMedia === 'on' && selfClass.audioType !== 'soundcloud') {\n        if (dzsapHelpers.is_android() || dzsapHelpers.is_ios()) {\n          cthis.find('.playbtn').bind('click', play_media);\n        }\n        // console.log('source - ',cthis.attr('data-source'), dataSrc);\n\n\n        if (selfClass.data_source && selfClass.data_source.indexOf('{{generatenonce}}') > -1) {\n\n\n          dzsapHelpers.player_service_getSourceProtection(selfClass).then((response) => {\n            if (response) {\n              cthis.attr('data-source', response);\n              setup_media({'called_from': 'nonce generated', 'newSource': response});\n\n            }\n\n          });\n        } else {\n\n          const isGoingToSetupMediaNow = dzsapHelpers.player_isGoingToSetupMediaNow(selfClass);\n\n          if (selfClass.audioType === 'selfHosted') {\n            if (selfClass.audioTypeSelfHosted_streamType === 'icecast' || selfClass.audioTypeSelfHosted_streamType === 'shoutcast') {\n              // -- if we have icecast we can update currently playing song\n\n\n              if (selfClass.audioTypeSelfHosted_streamType === 'icecast' || (selfClass.radio_isGoingToUpdateArtistName || selfClass.radio_isGoingToUpdateSongName)) {\n\n                dzsapHelpers.player_icecastOrShoutcastRefresh(selfClass);\n              }\n              setInterval(function () {\n                dzsapHelpers.player_icecastOrShoutcastRefresh(selfClass);\n              }, 10000)\n            }\n          }\n\n          if (isGoingToSetupMediaNow) {\n            setup_media({'called_from': 'normal setup media .. --- icecast must wait'});\n          }\n\n        }\n\n\n      } else {\n\n\n        //console.log(' -- cue is of so set autoplay to on')\n        // o.autoplay = 'on';\n        cthis.find('.playbtn').bind('click', handleClickForSetupMedia);\n        cthis.find('.scrubbar').bind('click', handleClickForSetupMedia);\n        view_handleResize(null, {\n          called_from: 'init'\n        });\n      }\n\n\n      // -- we call the api functions here\n      //console.log('api sets');\n\n\n      dzsapHelpers.player_determineStickToBottomContainer(selfClass);\n      dzsapHelpers.player_stickToBottomContainerDetermineClasses(selfClass);\n\n      // console.log('_sticktobottom -> ',_sticktobottom, cthis,cthis.parent().attr('class'),cthis.parent().parent().attr('class'));\n\n      selfClass.timeModel.initObjects();\n\n      // -- api calls\n      selfClass.setup_media = setup_media;\n\n      cthis.get(0).classInstance = selfClass;\n\n      cthis.get(0).api_init_loaded = init_loaded; // -- force resize event\n      cthis.get(0).api_destroy = destroy_it; // -- destroy the player and the listeners\n\n      cthis.get(0).api_play = play_media; // -- play the media\n\n      cthis.get(0).api_set_volume = volume_setVolume; // -- set a volume\n      cthis.get(0).api_get_last_vol = volume_getLast; // -- play the media\n\n      cthis.get(0).api_get_source = () => {\n        return selfClass.data_source;\n      }; // -- play the media\n\n      cthis.get(0).api_click_for_setup_media = handleClickForSetupMedia; // -- play the media\n\n      cthis.get(0).api_handleResize = view_handleResize; // -- force resize event\n      cthis.get(0).api_set_playback_speed = set_playback_speed; // -- set the playback speed, only works for local hosted mp3\n      cthis.get(0).api_change_media = media_changeMedia(selfClass, $); // -- change the media file from the API\n      cthis.get(0).api_seek_to_perc = seek_to_perc; // -- seek to percentage ( for example seek to 0.5 skips to half of the song )\n      cthis.get(0).api_seek_to = seek_to; // -- seek to percentage ( for example seek to 0.5 skips to half of the song )\n      cthis.get(0).api_seek_to_visual = seek_to_visual; // -- seek to perchange but only visually ( does not actually skip to that ) , good for a fake player\n      cthis.get(0).api_visual_set_volume = volume_setOnlyVisual; // -- set a volume\n      cthis.get(0).api_destroy_listeners = destroy_listeners; // -- set a volume\n\n      cthis.get(0).api_pause_media = media_pause; // -- pause the media\n      cthis.get(0).api_get_media_isLoopActive = ()=>{\n        return media_isLoopActive;\n      }; // -- pause the media\n      cthis.get(0).api_media_toggleLoop = media_toggleLoop; // -- pause the media\n      cthis.get(0).api_pause_media_visual = pause_media_visual; // -- pause the media, but only visually\n      cthis.get(0).api_play_media = play_media; // -- play the media\n      cthis.get(0).api_play_media_visual = play_media_visual; // -- play the media, but only visually\n      cthis.get(0).api_handle_end = media_handleEnd; // -- play the media, but only visually\n      cthis.get(0).api_change_visual_target = change_visual_target; // -- play the media, but only visually\n      cthis.get(0).api_change_design_color_highlight = view_updateColorHighlight; // -- play the media, but only visually\n      cthis.get(0).api_draw_scrub_prog = view_drawScrubProgress; // -- render the scrub progress\n      cthis.get(0).api_draw_curr_time = view_drawCurrentTime; // -- render the current time\n      cthis.get(0).api_get_times = selfClass.timeModel.refreshTimes; // -- refresh the current time\n      cthis.get(0).api_check_time = handleEnterFrame; // -- do actions required in the current frame\n      cthis.get(0).api_sync_players_goto_next = syncPlayers_gotoNext; // -- in the sync playlist, go to the next song\n      cthis.get(0).api_sync_players_goto_prev = syncPlayers_gotoPrev; // -- in the sync playlist, go to the previous song\n      cthis.get(0).api_regenerate_playerlist_inner = function () {\n        // -- call with window.dzsap_generate_list_for_sync_players({'force_regenerate': true})\n        if (selfClass.classFunctionalityInnerPlaylist) {\n          selfClass.classFunctionalityInnerPlaylist.playlistInner_setupStructureInPlayer();\n        }\n\n      }; // -- regenerate the playlist innter\n\n\n      cthis.get(0).api_step_back = function (arg) {\n        if (!arg) {\n          arg = selfClass.keyboard_controls.step_back_amount;\n        }\n        seek_to(selfClass.timeCurrent - arg);\n      }\n      cthis.get(0).api_step_forward = function (arg) {\n\n        if (arg) {\n\n        } else {\n          arg = selfClass.keyboard_controls.step_back_amount;\n        }\n        seek_to(selfClass.timeCurrent + arg);\n      } // --\n      /**\n       *\n       * @param {number} argSpeed  - 0 to 1\n       */\n      cthis.get(0).api_playback_speed = function (argSpeed) {\n        if (selfClass.$mediaNode_ && selfClass.$mediaNode_.playbackRate) {\n          selfClass.$mediaNode_.playbackRate = argSpeed;\n        }\n      } // -- slow to 2/3 of the current song\n\n\n      cthis.get(0).api_set_action_audio_play = function (arg) {\n        action_audio_play = arg;\n      }; // -- set action on audio play\n      cthis.get(0).api_set_action_audio_pause = function (arg) {\n        action_audio_pause = arg;\n      }; // -- set action on audio pause\n      cthis.get(0).api_set_action_audio_end = function (arg) {\n        action_audio_end = arg;\n        cthis.data('has-action-end', 'on');\n      }; // -- set action on audio end\n      cthis.get(0).api_set_action_audio_comment = function (arg) {\n        selfClass.action_audio_comment = arg;\n      }; // -- set the function to call on audio song comment\n      cthis.get(0).api_try_to_submit_view = service_submitView; // -- try to submit a new play analytic\n\n      //console.log(cthis.get(0));\n\n      //console.log(o);\n      if (o.action_audio_play) {\n        action_audio_play = o.action_audio_play;\n      }\n      ;\n      if (o.action_audio_pause) {\n        action_audio_pause = o.action_audio_pause;\n      }\n      ;\n      if (o.action_audio_play2) {\n        action_audio_play2 = o.action_audio_play2;\n      }\n      ;\n\n      if (o.action_audio_end) {\n        action_audio_end = o.action_audio_end;\n        cthis.data('has-action-end', 'on');\n      }\n\n\n      handleEnterFrame({\n        'fire_only_once': true\n      });\n\n\n      //console.log(o.design_skin);\n      if (o.design_skin === 'skin-minimal') {\n        handleEnterFrame({\n          'fire_only_once': true\n        });\n      }\n\n\n      cthis.on('click', '.dzsap-repeat-button,.dzsap-loop-button,.btn-zoomsounds-download,.zoomsounds-btn-step-backward,.zoomsounds-btn-step-forward,.zoomsounds-btn-go-beginning,.zoomsounds-btn-slow-playback,.zoomsounds-btn-reset, .tooltip-indicator--btn-footer-playlist', handle_mouse);\n      // cthis.on('mouseover',handle_mouse);\n      cthis.on('mouseenter', handle_mouse);\n      cthis.on('mouseleave', handle_mouse);\n\n\n      selfClass.$conPlayPause.on('click', handleClick_playPause);\n      //cthis.on('click','.con-playpause', click_playpause);\n\n\n      cthis.on('click', '.skip-15-sec', function () {\n        cthis.get(0).api_step_forward(15);\n      });\n\n\n      $(window).on('resize.dzsap', view_handleResize);\n      view_handleResize(null, {\n        called_from: 'init'\n      });\n\n      if (selfClass._scrubbar && selfClass._scrubbar.get(0)) {\n\n        selfClass._scrubbar.get(0).addEventListener('touchstart', function (e) {\n          if (selfClass.player_playing) {\n\n            scrubbar_moving = true;\n          }\n        }, {passive: true})\n      }\n\n      // selfClass._scrubbar.on('touchstart', function(e) {\n      //     if(selfClass.player_playing){\n      //\n      //         scrubbar_moving = true;\n      //     }\n      // }, {passive: true})\n      $(document).on('touchmove', function (e) {\n        if (scrubbar_moving) {\n          scrubbar_moving_x = e.originalEvent.touches[0].pageX;\n\n\n          aux3 = scrubbar_moving_x - selfClass._scrubbar.offset().left;\n\n          if (aux3 < 0) {\n            aux3 = 0;\n          }\n          if (aux3 > selfClass._scrubbar.width()) {\n            aux3 = selfClass._scrubbar.width();\n          }\n\n          seek_to_perc(aux3 / selfClass._scrubbar.width(), {\n            call_from: \"touch move\"\n          });\n\n\n          return false;\n          //console.log(aux3);\n\n\n        }\n      });\n\n      $(document).on('touchend', function (e) {\n        scrubbar_moving = false;\n      });\n\n\n      // console.log('skinwave_comments_mode_outer_selector - ',o.skinwave_comments_mode_outer_selector);\n\n      if (o.skinwave_comments_mode_outer_selector) {\n        selfClass.$commentsSelector = $(o.skinwave_comments_mode_outer_selector);\n\n        if (selfClass.$commentsSelector.data) {\n\n          selfClass.$commentsSelector.data('parent', cthis);\n\n          if (window.dzsap_settings.comments_username) {\n            selfClass.$commentsSelector.find('.comment_email,*[name=comment_user]').remove();\n          }\n\n          selfClass.$commentsSelector.on('click', '.dzstooltip--close,.comments-btn-submit', dzsapComments.comments_selector_event);\n          selfClass.$commentsSelector.on('focusin', 'input', dzsapComments.comments_selector_event);\n          selfClass.$commentsSelector.on('focusout', 'input', dzsapComments.comments_selector_event);\n\n        } else {\n          console.log('%c, data not available .. ', 'color: #990000;', $(o.skinwave_comments_mode_outer_selector));\n        }\n      }\n\n\n      // console.log(\"hmm\",cthis);\n      cthis.off('click', '.btn-like');\n      cthis.on('click', '.btn-like', handleClickLike);\n\n\n      dzsapHelpers.waitForScriptToBeAvailableThenExecute(window.dzsap_part_starRatings_loaded, function () {\n        window.dzsap_init_starRatings_from_dzsap(selfClass);\n      })\n\n\n      setTimeout(function () {\n\n        view_handleResize(null, {\n          called_from: 'init_timeout'\n        });\n\n\n        if (o.skinwave_wave_mode === 'canvas') {\n\n          calculate_dims_time();\n\n          setTimeout(function () {\n            calculate_dims_time();\n\n\n          }, 100)\n        }\n\n      }, 100)\n\n\n      cthis.find('.btn-menu-state').eq(0).bind('click', handleClickMenuState);\n\n\n      //console.log('init');\n\n\n      cthis.on('click', '.prev-btn,.next-btn', handle_mouse);\n    }\n\n\n    function calculate_dims_time() {\n      var reflection_size = parseFloat(o.skinwave_wave_mode_canvas_reflection_size);\n\n      reflection_size = 1 - reflection_size;\n\n      var scrubbarh = selfClass._scrubbar.height();\n      if (o.design_skin === 'skin-wave') {\n        // console.log('selfClass.skinwave_mode - ',selfClass.skinwave_mode);\n        if (selfClass.skinwave_mode === 'small') {\n          scrubbarh = 60;\n        }\n\n        if (selfClass._commentsHolder) {\n          if (reflection_size === 0) {\n            selfClass._commentsHolder.css('top', selfClass._scrubbar.offset().top - cthis.offset().top + scrubbarh * reflection_size - selfClass._commentsHolder.height());\n          } else {\n            selfClass._commentsHolder.css('top', selfClass._scrubbar.offset().top - selfClass._scrubbar.parent().offset().top + scrubbarh * reflection_size);\n            selfClass.$commentsWritter.css('top', selfClass._scrubbar.offset().top - selfClass._scrubbar.parent().offset().top + scrubbarh * reflection_size);\n          }\n        }\n\n        if (selfClass.$currTime) {\n          selfClass.$currTime.css('top', scrubbarh * reflection_size - selfClass.$currTime.outerHeight());\n        }\n        if (selfClass.$totalTime) {\n          selfClass.$totalTime.css('top', scrubbarh * reflection_size - selfClass.$totalTime.outerHeight());\n        }\n      }\n\n      cthis.attr('data-reflection-size', reflection_size);\n    }\n\n    function change_visual_target(arg, pargs) {\n      // -- change the visual target, the main is the main palyer selfClass.player_playing and the visual target is the player which is a visual representation of this\n\n      console.log('change_visual_target() - ', arg);\n\n      var margs = {}\n\n\n      // return false;\n\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n\n      if (selfClass._sourcePlayer && selfClass._sourcePlayer.get(0) && selfClass._sourcePlayer.get(0).api_pause_media_visual) {\n        selfClass._sourcePlayer.get(0).api_pause_media_visual({\n          'call_from': 'change_visual_target'\n        });\n      }\n\n      selfClass.set_sourcePlayer(arg);\n\n      // console.log('new selfClass._sourcePlayer -  ', selfClass._sourcePlayer);\n\n      var $sourcePlayer_ = selfClass._sourcePlayer.get(0);\n      if (selfClass.player_playing) {\n        if (selfClass._sourcePlayer && $sourcePlayer_ && $sourcePlayer_.api_play_media_visual) {\n          $sourcePlayer_.api_play_media_visual();\n        }\n      }\n\n      if ($sourcePlayer_ && $sourcePlayer_.api_draw_curr_time) {\n\n\n        $sourcePlayer_.api_set_timeVisualCurrent(selfClass.timeCurrent);\n        $sourcePlayer_.api_get_times({\n          'call_from': ' change visual target .. in api '\n        });\n        $sourcePlayer_.api_check_time({\n          'fire_only_once': true\n        });\n        $sourcePlayer_.api_draw_curr_time();\n        $sourcePlayer_.api_draw_scrub_prog();\n      }\n\n      setTimeout(function () {\n\n        // console.log('__c.api_draw_curr_time - ',__c.api_draw_curr_time);\n        if ($sourcePlayer_ && $sourcePlayer_.api_draw_curr_time) {\n          $sourcePlayer_.api_get_times();\n          $sourcePlayer_.api_check_time({\n            'fire_only_once': true\n          });\n          $sourcePlayer_.api_draw_curr_time();\n          $sourcePlayer_.api_draw_scrub_prog();\n        }\n      }, 800);\n\n    }\n\n    function view_updateColorHighlight(arg) {\n      // --\n\n      //console.log(arg);\n\n      o.design_wave_color_progress = arg;\n      if (o.skinwave_wave_mode === 'canvas') {\n        dzsapWaveFunctions.view_drawCanvases(selfClass, cthis.attr('data-pcm'), 'canvas_change_pcm');\n\n      }\n\n    }\n\n    function reinit() {\n\n      if (selfClass.audioType === 'normal' || selfClass.audioType === 'detect' || selfClass.audioType === 'audio') {\n        selfClass.audioType = 'selfHosted';\n      }\n    }\n\n\n    function destroy_listeners() {\n\n\n      if (destroyed) {\n        return false;\n      }\n\n\n      isNotRenderingEnterFrame = true;\n\n    }\n\n    function handleClickLike() {\n      // console.log('zoomsounds - click_like()', this);\n      var _t = $(this);\n      if (cthis.has(_t).length === 0) {\n        return;\n      }\n\n      if (_t.hasClass('active')) {\n        (ajax_retract_like.bind(selfClass))();\n      } else {\n        (ajax_submit_like.bind(selfClass))();\n      }\n    }\n\n\n    function destroy_it() {\n\n\n      if (destroyed) {\n        return false;\n      }\n\n      if (selfClass.player_playing) {\n        media_pause();\n      }\n\n\n      $(window).off('resize.dzsap');\n\n      cthis.remove();\n      cthis = null;\n\n      destroyed = true;\n    }\n\n    function handleClickForSetupMedia(e, pargs) {\n      // console.log('click_for_setup_media', cthis, pargs);\n\n\n      var margs = {\n\n        'do_not_autoplay': false\n      };\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      cthis.find('.playbtn').unbind('click', handleClickForSetupMedia);\n      cthis.find('.scrubbar').unbind('click', handleClickForSetupMedia);\n\n      setup_media(margs);\n\n\n      if (dzsapHelpers.is_android() || dzsapHelpers.is_ios()) {\n        play_media({\n          'called_from': 'click_for_setup_media'\n        });\n      }\n    }\n\n\n    function handleClickMenuState(e) {\n      if (o.parentgallery && typeof (o.parentgallery.get(0)) !== \"undefined\") {\n        o.parentgallery.get(0).api_toggle_menu_state();\n      }\n    }\n\n\n    function init_checkIfReady(pargs) {\n      // console.log('check_ready()', cthis, selfClass.$mediaNode_, selfClass.$mediaNode_.readyState);\n      //=== do a little ready checking\n\n\n      var margs = {\n\n        'do_not_autoplay': false\n      };\n\n      if (selfClass._actualPlayer && dzsapHelpers.is_ios()) {\n        return false;\n      }\n\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      // console.log(selfClass.$mediaNode_.readyState);\n      if (selfClass.audioType === 'youtube') {\n        init_loaded(margs);\n      } else {\n        if (typeof (selfClass.$mediaNode_) !== 'undefined' && selfClass.$mediaNode_) {\n\n\n          //                        return false;\n          if (selfClass.$mediaNode_.nodeName !== \"AUDIO\" || o.type === 'shoutcast') {\n            init_loaded(margs);\n          } else {\n            if (dzsapHelpers.is_safari()) {\n\n              if (selfClass.$mediaNode_.readyState >= 1) {\n                //console.log(\"CALL INIT LOADED FROM \",selfClass.$mediaNode_.readyState);\n\n                if (selfClass.isPlayerLoaded === false) {\n                }\n\n                init_loaded(margs);\n                clearInterval(inter_checkReady);\n\n                if (o.action_audio_loaded_metadata) {\n                  o.action_audio_loaded_metadata(cthis);\n                }\n              }\n            } else {\n              if (selfClass.$mediaNode_.readyState >= 2) {\n                //console.log(\"CALL INIT LOADED FROM \",selfClass.$mediaNode_.readyState);\n                if (selfClass.isPlayerLoaded === false) {\n                }\n                init_loaded(margs);\n                clearInterval(inter_checkReady);\n\n                // console.log(selfClass.$mediaNode_.duration);\n\n\n                // console.log(o.action_audio_loaded_metadata)\n                if (o.action_audio_loaded_metadata) {\n                  o.action_audio_loaded_metadata(cthis);\n                }\n              }\n            }\n\n          }\n        }\n\n      }\n\n    }\n\n    function scrubbar_reveal() {\n      setTimeout(function () {\n        selfClass.cthis.addClass('scrubbar-loaded');\n      }, 1000);\n    }\n\n\n    function setupStructure_thumbnailCon() {\n\n      // return false;\n\n\n      if (cthis.attr('data-thumb')) {\n        cthis.addClass('has-thumb');\n        var aux_thumb_con_str = '';\n\n        if (cthis.attr('data-thumb_link')) {\n          aux_thumb_con_str += '<a href=\"' + cthis.attr('data-thumb_link') + '\"';\n        } else {\n          aux_thumb_con_str += '<div';\n        }\n        aux_thumb_con_str += ' class=\"the-thumb-con\"><div class=\"the-thumb\" style=\" background-image:url(' + cthis.attr('data-thumb') + ')\"></div>';\n\n\n        if (cthis.attr('data-thumb_link')) {\n          aux_thumb_con_str += '</a>';\n        } else {\n          aux_thumb_con_str += '</div>';\n        }\n\n\n        if (cthis.children('.the-thumb-con').length) {\n          aux_thumb_con_str = cthis.children('.the-thumb-con').eq(0);\n        }\n\n\n        if (o.design_skin !== 'skin-customcontrols') {\n          if (o.design_skin === 'skin-wave' && (selfClass.skinwave_mode === 'small' || selfClass.skinwave_mode === 'alternate')) {\n\n            if (selfClass.skinwave_mode === 'alternate') {\n\n              // console.log(\"WHERE IS INNER ? \",selfClass._audioplayerInner);\n              selfClass._audioplayerInner.prepend(aux_thumb_con_str);\n            } else {\n\n              selfClass._apControlsLeft.prepend(aux_thumb_con_str);\n            }\n          } else if (o.design_skin === 'skin-steel') {\n\n\n            selfClass._apControlsLeft.prepend(aux_thumb_con_str);\n          } else {\n\n            selfClass._audioplayerInner.prepend(aux_thumb_con_str);\n          }\n        }\n\n        _theThumbCon = selfClass._audioplayerInner.children('.the-thumb-con').eq(0);\n      } else {\n\n        cthis.removeClass('has-thumb');\n      }\n    }\n\n\n    function setup_structure_sanitizers() {\n\n      if (cthis.hasClass('zoomsounds-wrapper-bg-bellow') && cthis.find('.dzsap-wrapper-buts').length === 0) {\n        // console.log('NO WRAPPER BUTS - ',cthis.find('.ap-controls-right'));\n\n        cthis.append('<div class=\"temp-wrapper\"></div>');\n        cthis.find('.temp-wrapper').append(selfClass.extraHtmlAreas.controlsRight);\n        cthis.find('.temp-wrapper').children('*:not(.dzsap-wrapper-but)').remove();\n        cthis.find('.temp-wrapper > .dzsap-wrapper-but').unwrap();\n        cthis.find('.dzsap-wrapper-but').each(function () {\n          var aux = $(this).html();\n          // console.log('aux - ',aux);\n\n          aux = aux.replace('{{heart_svg}}', '\\t&hearts;');\n          aux = aux.replace('{{svg_share_icon}}', dzsapSvgs.svg_share_icon);\n\n\n          if ($(this).get(0) && $(this).get(0).outerHTML.indexOf('dzsap-multisharer-but') > -1) {\n            selfClass.isMultiSharer = true;\n\n          }\n\n          $(this).html(aux);\n        }).wrapAll('<div class=\"dzsap-wrapper-buts\"></div>');\n      }\n\n      if (o.design_skin === 'skin-customcontrols') {\n        cthis.html(String(cthis.html()).replace('{{svg_play_icon}}', dzsapSvgs.svg_play_icon));\n        cthis.html(String(cthis.html()).replace('{{svg_pause_icon}}', dzsapSvgs.pausebtn_svg));\n      }\n    }\n\n\n    /**\n     * called if we have .dzsap-multisharer-but in html\n     */\n    function check_multisharer() {\n\n      // -- we setup a box main here as a child of body\n\n      // console.log('selfClass.isMultiSharer -', selfClass.isMultiSharer);\n\n      selfClass.cthis.find('.dzsap-multisharer-but').data('cthis', cthis);\n      // console.log(\"WE SETUP HERE\", cthis.find('.dzsap-multisharer-but').data('cthis'), 'selfClass.isMultiSharer - ',selfClass.isMultiSharer);\n      selfClass.cthis.data('embed_code', selfClass.feedEmbedCode);\n\n\n\n    }\n\n    function view_wave_setupRandomPcm(pargs) {\n\n\n      var margs = {\n        call_from: 'default'\n      }\n\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      var default_pcm = [];\n\n      if (!(o.pcm_data_try_to_generate === 'on' && o.pcm_data_try_to_generate_wait_for_real_pcm === 'on')) {\n        for (var i3 = 0; i3 < 200; i3++) {\n          default_pcm[i3] = Number(Math.random()).toFixed(2);\n        }\n        default_pcm = JSON.stringify(default_pcm);\n\n        cthis.addClass('rnd-pcm-for-now')\n        cthis.attr('data-pcm', default_pcm);\n      }\n\n\n      dzsapHelpers.scrubbar_modeWave_setupCanvas({}, selfClass);\n      ;\n\n    }\n\n\n    /**\n     * called from setup_structure\n     */\n    function setup_structure_scrub() {\n\n      if (o.skinwave_enableSpectrum !== 'on') {\n        if (o.skinwave_wave_mode === 'canvas') {\n\n          if (cthis.attr('data-pcm')) {\n            dzsapHelpers.scrubbar_modeWave_setupCanvas({}, selfClass);\n          } else {\n            view_wave_setupRandomPcm();\n          }\n        }\n      } else {\n\n        // -- spectrum ON\n        dzsapHelpers.scrubbar_modeWave_setupCanvas({}, selfClass);\n        // -- old spectrum code\n        $scrubBgCanvas = selfClass.cthis.find('.scrub-bg-img').eq(0);\n        _scrubBgCanvasCtx = $scrubBgCanvas.get(0).getContext(\"2d\");\n      }\n\n    }\n    ;\n\n\n    /**\n     * order -> init, setup_media, init_loaded\n     * called from init() if not icecast or soundcloud\n     * @param pargs\n     * @returns {boolean}\n     */\n    function setup_media(pargs) {\n\n      // console.groupCollapsed('setup_media()')\n      // console.trace();\n      // console.groupEnd()\n\n      //                return;\n\n\n      var setupMediaAttrs = {\n\n        'do_not_autoplay': false,\n        'called_from': 'default',\n        'newSource': '',\n      };\n\n\n      if (pargs) {\n        setupMediaAttrs = $.extend(setupMediaAttrs, pargs);\n      }\n      // console.log('%c --- #setup_media()', ConstantsDzsAp.DEBUG_STYLE_1, cthis.attr('data-source'), o.cueMedia, selfClass.ajax_view_submitted, setupMediaAttrs, 'cthis - ', cthis, 'o.preload_method -', o.preload_method, 'source - ', selfClass.data_source);\n\n\n      // -- these types should not exist\n      if (selfClass.audioType === 'icecast' || selfClass.audioType === 'shoutcast') {\n        selfClass.audioType = 'selfHosted';\n      }\n\n      if (o.cueMedia === 'off') {\n        if (selfClass.ajax_view_submitted === 'auto') {\n          // -- why is view submitted ?\n          selfClass.increment_views = 1;\n          selfClass.ajax_view_submitted = 'off';\n        }\n      }\n\n\n      //console.log(type, o.type, loaded);\n\n      if (selfClass.isPlayerLoaded === true) {\n        return;\n      }\n      if (cthis.attr('data-original-type') === 'youtube') {\n        return;\n      }\n\n\n      if (selfClass.audioType === 'youtube') {\n        dzsap_youtube_setupMedia(selfClass, setupMediaAttrs);\n      }\n      // -- END youtube\n\n\n      if (setupMediaAttrs.newSource) {\n        selfClass.data_source = setupMediaAttrs.newSource;\n      }\n\n      if (dzsapHelpers.is_ios()) {\n        o.preload_method = 'metadata';\n      }\n\n      // console.log('selfClass.data_source - ', selfClass.data_source);\n\n      const stringAudioElement = mediaFunctions.buildAudioElementHtml(selfClass, selfClass.audioTypeSelfHosted_streamType, 'setup_media');\n      stringAudioElementHtml = stringAudioElement.stringAudioElementHtml;\n      const stringAudioTagSource = stringAudioElement.stringAudioTagSource;\n\n      if (selfClass.audioType === 'selfHosted' || selfClass.audioType === 'soundcloud') {\n        if (setupMediaAttrs.called_from === 'change_media' || setupMediaAttrs.called_from === 'nonce generated') {\n\n          if (dzsapHelpers.is_ios() || dzsapHelpers.is_android()) {\n\n            // -- we append only the source to mobile devices as we need the thing to autoplay without user action\n            // console.log('hier', 'selfClass.$mediaNode_ - ', selfClass.$mediaNode_);\n\n            setupMediaElement(selfClass, stringAudioElementHtml, stringAudioTagSource);\n            // console.log('$(selfClass.$mediaNode_) - ', $(selfClass.$mediaNode_).outerHTML())\n\n          } else {\n            // -- normal desktop\n\n            // console.log('%c .str_audio_element - ', 'background-color: #dada20;',str_audio_element);\n\n            if (!(setupMediaAttrs.called_from === 'nonce generated' && selfClass._actualPlayer)) {\n\n              setupMediaElement(selfClass, stringAudioElementHtml);\n            }\n          }\n          // -- end change media\n        } else {\n\n          // console.log('str_audio_element - ', {str_audio_element});\n\n          setupMediaElement(selfClass, stringAudioElementHtml);\n\n          if (dzsapHelpers.is_ios() || dzsapHelpers.is_android()) {\n            if (setupMediaAttrs.called_from === 'retrieve_soundcloud_url') {\n              setTimeout(function () {\n                media_pause();\n              }, 500);\n            }\n          }\n        }\n\n\n        if (selfClass.$mediaNode_ && selfClass.$mediaNode_.addEventListener && selfClass.cthis.attr('data-source') !== 'fake') {\n          mediaFunctions.setupMediaListeners(selfClass, setupMediaAttrs, init_loaded, volume_lastVolume, volume_setVolume)\n        }\n\n      }\n\n      selfClass.cthis.addClass('media-setuped');\n\n\n      if (setupMediaAttrs.called_from === 'change_media') {\n        return false;\n      }\n\n      if (selfClass.audioType !== 'youtube') {\n        if (selfClass.cthis.attr('data-source') === 'fake') {\n          if (dzsapHelpers.is_ios() || dzsapHelpers.is_android()) {\n            init_loaded(setupMediaAttrs);\n          }\n        } else {\n          if (dzsapHelpers.is_ios()) {\n\n            setTimeout(function () {\n              init_loaded(setupMediaAttrs);\n            }, 1000);\n\n\n          } else {\n\n            // -- check_ready() will fire init_loaded()\n            inter_checkReady = setInterval(function () {\n              init_checkIfReady(setupMediaAttrs);\n            }, 50);\n            //= setInterval(check_ready, 50);\n          }\n\n        }\n\n\n        if (o.preload_method === 'none') {\n          mediaFunctions.makeMediaPreloadInTheFuture(selfClass);\n        }\n\n\n        if (o.design_skin === 'skin-customcontrols' || o.design_skin === 'skin-customhtml') {\n          cthis.find('.custom-play-btn,.custom-pause-btn').off('click');\n          cthis.find('.custom-play-btn,.custom-pause-btn').on('click', handleClick_playPause);\n        }\n\n        if (o.failsafe_repair_media_element) {\n          mediaFunctions.repairMediaElement(selfClass, stringAudioElementHtml);\n\n        }\n      }\n\n      // console.log('o.scrubbar_type - ', o.scrubbar_type);\n      if (o.scrubbar_type === 'wave' && o.skinwave_enableSpectrum === 'on') {\n        dzsapHelpers.player_initSpectrumOnUserAction(selfClass);\n\n      }\n\n\n      // dzsapHelpers.is_ios() ||\n\n\n      selfClass.isSetupedMedia = true;\n\n\n    }\n\n    function destroy_cmedia() {\n      // -- destroy cmedia\n\n      $(selfClass.$mediaNode_).remove();\n      selfClass.$mediaNode_ = null;\n      selfClass.isSetupedMedia = false;\n      selfClass.isPlayerLoaded = false;\n    }\n\n    function destroy_media() {\n      //console.log(\"destroy_media()\", cthis)\n      media_pause();\n\n\n      if (selfClass.$mediaNode_) {\n\n        //console.log(selfClass.$mediaNode_, selfClass.$mediaNode_.src);\n        if (selfClass.$mediaNode_.children) {\n\n          //selfClass.$mediaNode_.children().remove();\n        }\n\n        //console.log(selfClass.$mediaNode_.innerHTML);\n        if (o.type === 'audio') {\n          selfClass.$mediaNode_.innerHTML = '';\n          selfClass.$mediaNode_.load();\n        }\n        //console.log(selfClass.$mediaNode_.innerHTML);\n\n        //selfClass.$mediaNode_.remove();\n      }\n\n      if (dzsapHelpers.is_ios() || dzsapHelpers.is_android()) {\n      } else {\n        if (selfClass.$theMedia) {\n\n          selfClass.$theMedia.children().remove();\n          selfClass.isPlayerLoaded = false;\n        }\n      }\n\n      destroy_cmedia();\n\n    }\n\n    function setup_listeners() {\n\n\n      if (isListenersSetup) {\n        return false;\n      }\n      // console.log('setup_listeners()');\n\n      isListenersSetup = true;\n\n\n      // -- adding scrubbar listeners\n      selfClass._scrubbar.unbind('mousemove');\n      selfClass._scrubbar.unbind('mouseleave');\n      selfClass._scrubbar.unbind('click');\n      selfClass._scrubbar.bind('mousemove', handleMouseOnScrubbar);\n      selfClass._scrubbar.bind('mouseleave', handleMouseOnScrubbar);\n      selfClass._scrubbar.bind('click', handleMouseOnScrubbar);\n\n      // cthis.on('');\n\n\n      selfClass.$controlsVolume.on('click', '.volumeicon', volume_handleClickMuteIcon);\n\n      selfClass.$controlsVolume.bind('mousemove', volume_handleMouse);\n      selfClass.$controlsVolume.bind('mousedown', volume_handleMouse);\n\n\n      // $(document).undelegate(window, 'mouseup', mouse_volumebar);\n      $(document).on('mouseup', window, volume_handleMouse);\n\n      if (o.design_skin === 'skin-silver') {\n        cthis.on('click', '.volume-holder', volume_handleMouse);\n      }\n\n      cthis.find('.playbtn').unbind('click');\n\n\n      //                console.log('setup_listeners()');\n\n      setTimeout(view_handleResize, 300);\n      // setTimeout(handleResize,1000);\n      setTimeout(view_handleResize, 2000);\n\n      if (o.settings_trigger_resize > 0) {\n        inter_trigger_resize = setInterval(view_handleResize, o.settings_trigger_resize);\n      }\n\n\n      cthis.addClass('listeners-setuped');\n\n\n      return false;\n\n      //                console.log('ceva');\n    }\n\n\n    function volume_getLast() {\n      return volume_lastVolume;\n    }\n\n    /**\n     * init laoded\n     * @param pargs\n     */\n    function init_loaded(pargs) {\n      // console.log('init_loaded()');\n\n      // if (cthis.attr('id') === 'apminimal') {\n      // }\n      // console.log('init_loaded() - ', pargs, cthis, cthis.hasClass('loaded'));\n      if (cthis.hasClass('dzsap-loaded')) {\n        return;\n      }\n\n      var margs = {\n        'do_not_autoplay': false\n        , 'call_from': 'init'\n      };\n\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      // console.log('[dzsap] [init] init_loaded()', margs);\n\n      setTimeout(function () {\n        selfClass.isSafeToChangeTrack = true;\n      }, 5000);\n\n\n      if (typeof (selfClass.$mediaNode_) !== \"undefined\" && selfClass.$mediaNode_) {\n        if (selfClass.$mediaNode_.nodeName === 'AUDIO') {\n          //console.log(selfClass.$mediaNode_);\n          selfClass.$mediaNode_.addEventListener('ended', media_handleEnd);\n        }\n      }\n\n\n      //console.log(\"CLEAR THE TIMEOUT HERE\")\n      clearInterval(inter_checkReady);\n      clearTimeout(inter_checkReady);\n      setup_listeners();\n      //console.log('setuped_listeners', cthis.hasClass('dzsap-loaded'), cthis)\n\n\n      setTimeout(function () {\n\n        //console.log(selfClass.$currTime, )\n        if (selfClass.$currTime && selfClass.$currTime.outerWidth() > 0) {\n          currTime_outerWidth = selfClass.$currTime.outerWidth();\n        }\n      }, 1000);\n\n\n      // -- this comes from cue off, no pcm data\n\n\n      if (selfClass.isPcmRequiredToGenerate) {\n        dzsapWaveFunctions.scrubModeWave__checkIfWeShouldTryToGetPcm(selfClass, {\n          called_from: 'init_loaded()'\n        });\n      }\n\n\n      //console.log('type - ',type);\n      //console.log('initLoaded() - margs - ',margs);\n\n\n      if (selfClass.audioType !== 'fake' && margs.call_from !== 'force_reload_change_media') {\n        if (o.settings_exclude_from_list !== 'on' && dzsap_list && dzsap_list.indexOf(cthis) === -1) {\n          if (selfClass._actualPlayer === null) {\n            dzsap_list.push(cthis);\n          }\n        }\n        if (o.type_audio_stop_buffer_on_unfocus === 'on') {\n          cthis.data('type_audio_stop_buffer_on_unfocus', 'on');\n          cthis.get(0).api_destroy_for_rebuffer = function () {\n            if (o.type === 'audio') {\n              selfClass.playFrom = selfClass.$mediaNode_.currentTime;\n            }\n            destroy_media();\n            destroyed_for_rebuffer = true;\n          }\n\n        }\n      }\n\n      //console.log(\"CHECK TIME\",cthis);\n\n\n      //console.log(selfClass.ajax_view_submitted);\n\n      if (selfClass.ajax_view_submitted === 'auto') {\n        setTimeout(function () {\n          if (selfClass.ajax_view_submitted === 'auto') {\n            selfClass.ajax_view_submitted = 'off';\n          }\n        }, 1000);\n      }\n\n      //console.log('---- ADDED LOADED BUT FROM WHERE', cthis);\n      selfClass.isPlayerLoaded = true;\n\n      if (selfClass.data_source !== 'fake') {\n\n        cthis.addClass('dzsap-loaded');\n      }\n\n      //                console.log(playfrom);\n\n      if (o.default_volume === 'default') {\n        defaultVolume = 1;\n      }\n\n      if (isNaN(Number(o.default_volume)) === false) {\n        defaultVolume = Number(o.default_volume);\n      } else {\n        if (o.default_volume === 'last') {\n\n\n          if (localStorage !== null && selfClass.the_player_id) {\n\n            //console.log(selfClass.the_player_id);\n\n\n            if (localStorage.getItem('dzsap_last_volume_' + selfClass.the_player_id)) {\n\n              defaultVolume = localStorage.getItem('dzsap_last_volume_' + selfClass.the_player_id);\n            } else {\n\n              defaultVolume = 1;\n            }\n          } else {\n\n            defaultVolume = 1;\n          }\n        }\n      }\n\n      if (o.volume_from_gallery) {\n        defaultVolume = o.volume_from_gallery;\n      }\n\n\n      // console.log(pargs);\n      // console.log('[dzsap] [volume] defaultVolume - ', defaultVolume);\n      volume_setVolume(defaultVolume, {\n        call_from: \"from_init_loaded\"\n      });\n\n\n      if (selfClass.pseudo_sample_time_start) {\n        selfClass.playFrom = (selfClass.pseudo_sample_time_start);\n      }\n      // console.log('playfrom -> ',playfrom);\n      if (dzsHelpers.isInt(selfClass.playFrom)) {\n        seek_to(selfClass.playFrom, {\n          call_from: 'from_playfrom'\n        });\n      }\n\n\n      // TODO: debug\n      // localStorage['dzsap_' + selfClass.the_player_id + '_lastpos'] = 10;\n      if (selfClass.playFrom === 'last') {\n        // -- here we save last position\n        if (typeof Storage !== 'undefined') {\n          setTimeout(function () {\n            selfClass.playFrom_ready = true;\n          })\n\n\n          if (typeof localStorage['dzsap_' + selfClass.the_player_id + '_lastpos'] !== 'undefined') {\n\n            // console.log(\"LETS SEEK TO lastposition -3 \",localStorage['dzsap_' + selfClass.the_player_id + '_lastpos'])\n            seek_to(localStorage['dzsap_' + selfClass.the_player_id + '_lastpos'], {\n              'call_from': 'last_pos'\n            });\n          }\n        }\n      }\n      //return false ;\n\n      // console.log(selfClass.cthis, ' - autoplay - ', o.autoplay, o.cueMedia);\n\n\n      if (margs.do_not_autoplay !== true) {\n        if (o.autoplay === 'on' && o.cueMedia === 'on') {\n          // console.log('margs.do_not_autoplay - ', margs.do_not_autoplay, margs,o);\n          play_media({\n            'called_from': 'do not autoplay not true ( init_loaded() ) '\n          });\n        }\n        ;\n      }\n\n      if (selfClass.$mediaNode_ && selfClass.$mediaNode_.duration) {\n        dzsapHelpers.player_view_addMetaLoaded(selfClass);\n      }\n\n\n      // -- init loaded()\n\n\n      // console.log('called check_time() - ',cthis);\n\n      reinit();\n\n      handleEnterFrame({\n        'fire_only_once': false\n      });\n\n      if (o.autoplay === 'off') {\n        isNotRenderingEnterFrame = true;\n      }\n\n      cthis.addClass('init-loaded');\n\n      setTimeout(function () {\n        //console.log(cthis.find('.wave-download'));\n\n        selfClass.timeModel.refreshTimes({\n          'call_from': 'set timeout 500'\n        });\n        handleEnterFrame({\n          'fire_only_once': true\n        });\n\n        cthis.find('.wave-download').bind('click', handle_mouse);\n      }, 500);\n\n      setTimeout(function () {\n        //console.log(cthis.find('.wave-download'));\n\n        selfClass.timeModel.refreshTimes({\n          'call_from': 'set timeout 1000'\n        });\n\n        handleEnterFrame({\n          'fire_only_once': true\n        });\n\n\n      }, 1000);\n\n\n      // console.log('init_loaded - ',o.action_video_contor_60secs);\n      if (inter_60_secs_contor === 0 && o.action_video_contor_60secs) {\n        inter_60_secs_contor = setInterval(count_60secs, 30000);\n      }\n\n\n    }\n\n\n    function count_60secs() {\n      // console.log('count it',o.action_video_contor_60secs,cthis.hasClass('is-playing'));\n      if (o.action_video_contor_60secs && cthis.hasClass('is-playing')) {\n        o.action_video_contor_60secs(cthis, '');\n      }\n    }\n\n    /**\n     *\n     * @param {boolean} isGoingToActivate\n     */\n    function media_toggleLoop(isGoingToActivate) {\n      media_isLoopActive = isGoingToActivate;\n    }\n\n    function handle_mouse(e) {\n      var $t = $(this);\n\n      // console.log('handle_mouse() _t - ',_t);\n\n      if (e.type === 'click') {\n        if ($t.hasClass('wave-download')) {\n          (ajax_submit_download.bind(selfClass))();\n        }\n        if ($t.hasClass('prev-btn')) {\n          handleClick_prevBtn();\n        }\n        if ($t.hasClass('next-btn')) {\n          handleClick_nextBtn();\n        }\n        if ($t.hasClass('tooltip-indicator--btn-footer-playlist')) {\n\n          $t.parent().find('.dzstooltip').toggleClass('active');\n        }\n        if ($t.hasClass('zoomsounds-btn-go-beginning')) {\n\n          var _target = cthis;\n          if (selfClass._actualPlayer) {\n            _target = selfClass._actualPlayer;\n          }\n\n          _target.get(0).api_seek_to_0();\n        }\n        if ($t.hasClass('zoomsounds-btn-step-backward')) {\n\n          var _target = cthis;\n          if (selfClass._actualPlayer) {\n            _target = selfClass._actualPlayer;\n          }\n\n          _target.get(0).api_step_back();\n        }\n        if ($t.hasClass('zoomsounds-btn-step-forward')) {\n\n          var _target = cthis;\n          if (selfClass._actualPlayer) {\n            _target = selfClass._actualPlayer;\n          }\n\n          _target.get(0).api_step_forward();\n        }\n        if ($t.hasClass('zoomsounds-btn-slow-playback')) {\n          var _target = cthis;\n          if (selfClass._actualPlayer) {\n            _target = selfClass._actualPlayer;\n          }\n\n          _target.get(0).api_playback_slow();\n        }\n        if ($t.hasClass('zoomsounds-btn-reset')) {\n          var _target = cthis;\n          if (selfClass._actualPlayer) {\n            _target = selfClass._actualPlayer;\n          }\n\n          _target.get(0).api_playback_reset();\n        }\n        if ($t.hasClass('btn-zoomsounds-download')) {\n          (ajax_submit_download.bind(selfClass))();\n        }\n        if ($t.hasClass('dzsap-repeat-button')) {\n\n          // console.log(\"REPEAT\");\n          if (selfClass.player_playing) {\n          }\n          seek_to(0, {\n            call_from: \"repeat\"\n          });\n        }\n        if ($t.hasClass('dzsap-loop-button')) {\n          if ($t.hasClass('active')) {\n            $t.removeClass('active');\n            media_isLoopActive = false;\n          } else {\n\n            $t.addClass('active');\n            media_isLoopActive = true;\n\n          }\n\n\n        }\n      }\n      if (e.type === 'mouseover') {\n      }\n      if (e.type === 'mouseenter') {\n        // console.log('mouseenter');\n\n        if (o.preview_on_hover === 'on') {\n          seek_to_perc(0);\n\n          play_media({\n            'called_from': 'preview_on_hover'\n          });\n          console.log('mouseover');\n        }\n\n        window.dzsap_mouseover = true;\n      }\n      if (e.type === 'mouseleave') {\n        // console.log('mouseleave');\n\n\n        if (o.preview_on_hover === 'on') {\n          seek_to_perc(0);\n\n          media_pause();\n        }\n        window.dzsap_mouseover = false;\n      }\n    }\n\n\n    function view_drawCurrentTime() {\n\n      // -- draw current time -- called onEnterFrame when playing\n      // console.log('draw_curr_time() -7');\n\n      let currentTime = selfClass.timeModel.getVisualCurrentTime();\n      let totalTime = selfClass.timeModel.getVisualTotalTime();\n\n      if (selfClass.initOptions.scrubbar_type === 'wave') {\n        if (selfClass.initOptions.skinwave_enableSpectrum === 'on') {\n          // -- spectrum ON\n          // -- easing\n          if (selfClass.player_playing) {\n\n          } else {\n            return false;\n          }\n          if ($scrubBgCanvas) {\n\n            canvasWidth = $scrubBgCanvas.width();\n            canh = $scrubBgCanvas.height();\n\n            $scrubBgCanvas.get(0).width = canvasWidth;\n            $scrubBgCanvas.get(0).height = canh;\n          }\n\n\n          var drawMeter = function () {\n\n            //console.log(selfClass.initOptions.type);\n\n            if (selfClass.initOptions.type === 'soundcloud' || sw_spectrum_fakeit === 'on') {\n\n              selfClass.lastArray = dzsapHelpers.generateFakeArrayForPcm();\n\n            } else {\n\n              if (selfClass.spectrum_analyser) {\n                selfClass.lastArray = new Uint8Array(selfClass.spectrum_analyser.frequencyBinCount);\n                selfClass.spectrum_analyser.getByteFrequencyData(selfClass.lastArray);\n              }\n            }\n\n\n            if (selfClass.lastArray && selfClass.lastArray.length) {\n\n\n              //fix when some sounds end the value still not back to zero\n              var len = selfClass.lastArray.length;\n              for (var i = len - 1; i >= 0; i--) {\n                //selfClass.lastArray[i] = 0;\n\n                if (i < len / 2) {\n\n                  selfClass.lastArray[i] = selfClass.lastArray[i] / 255 * canh;\n                } else {\n\n                  selfClass.lastArray[i] = selfClass.lastArray[len - i] / 255 * canh;\n                }\n              }\n              ;\n\n\n              if (selfClass.last_lastarray) {\n                for (var i3 = 0; i3 < selfClass.last_lastarray.length; i3++) {\n                  begin_viy = selfClass.last_lastarray[i3]; // -- last value\n                  change_viy = selfClass.lastArray[i3] - begin_viy; // -- target value - last value\n                  duration_viy = 3;\n                  selfClass.lastArray[i3] = Math.easeIn(1, begin_viy, change_viy, duration_viy);\n                }\n              }\n              // -- easing END\n\n              dzsapWaveFunctions.draw_canvas($scrubBgCanvas.get(0), selfClass.lastArray, '' + selfClass.initOptions.design_wave_color_bg, {\n                'call_from': 'spectrum',\n                selfClass,\n                'skinwave_wave_mode_canvas_waves_number': parseInt(selfClass.initOptions.skinwave_wave_mode_canvas_waves_number),\n                'skinwave_wave_mode_canvas_waves_padding': parseInt(selfClass.initOptions.skinwave_wave_mode_canvas_waves_padding)\n              })\n\n\n              if (selfClass.lastArray) {\n                selfClass.last_lastarray = selfClass.lastArray.slice();\n              }\n\n\n            }\n\n          }\n\n          drawMeter();\n\n\n          // -- end spectrum\n        }\n\n        if (selfClass.$currTime && selfClass.$currTime.length) {\n\n          if (selfClass.initOptions.skinwave_timer_static !== 'on') {\n\n            if (scrubbarProgX < 0) {\n              scrubbarProgX = 0;\n            }\n            scrubbarProgX = parseInt(scrubbarProgX, 10);\n\n\n            if (scrubbarProgX < 2 && cthis.data('promise-to-play-footer-player-from')) {\n              // console.error(\"WE RETURN IT\")\n              return false;\n            }\n\n            // -- move currTime\n            selfClass.$currTime.css({\n              'left': scrubbarProgX\n            });\n\n            // console.log('spos - ',spos);\n            // console.log('sw - ',sw);\n            if (scrubbarProgX > scrubbarWidth - currTime_outerWidth) {\n              //console.log(sw, currTime_outerWidth);\n              selfClass.$currTime.css({\n                'left': scrubbarWidth - currTime_outerWidth\n              })\n            }\n            if (scrubbarProgX > scrubbarWidth - 30 && scrubbarWidth) {\n              selfClass.$totalTime.css({\n                'opacity': 1 - (((scrubbarProgX - (scrubbarWidth - 30)) / 30))\n              });\n            } else {\n              if (selfClass.$totalTime.css('opacity') !== '1') {\n                selfClass.$totalTime.css({\n                  'opacity': ''\n                });\n              }\n            }\n            ;\n          }\n          ;\n        }\n      }\n\n      if (totalTime !== last_time_total) {\n        view_updateTotalTime(totalTime)\n      }\n\n      if (selfClass.$currTime) {\n\n\n        if (isScrubShowingCurrentTime === false) {\n          selfClass.$currTime.html(dzsapHelpers.formatTime(currentTime));\n        }\n\n        // console.log({totalTime}, cthis);\n        if (selfClass.timeModel.getVisualTotalTime() && selfClass.timeModel.getVisualTotalTime() > -1) {\n          selfClass.cthis.addClass('time-total-visible');\n\n\n        }\n      }\n\n\n      if (selfClass.spectrum_audioContext) {\n        if (selfClass.$totalTime) {\n          selfClass.$totalTime.html(dzsapHelpers.formatTime(totalTime));\n        }\n      }\n\n    }\n\n\n    function view_updateTotalTime(totalTime) {\n\n      if (selfClass.$totalTime) {\n        selfClass.$totalTime.html(dzsapHelpers.formatTime(totalTime));\n        selfClass.$totalTime.fadeIn('fast');\n      }\n    }\n\n    /**\n     * draw the scrub width\n     * @returns {string|boolean}\n     */\n    function view_drawScrubProgress() {\n      // return false;\n      let currentTime = selfClass.timeModel.getVisualCurrentTime();\n      let totalTime = selfClass.timeModel.getVisualTotalTime();\n      // console.log({currentTime,totalTime});\n\n\n      scrubbarProgX = (currentTime / totalTime) * scrubbarWidth;\n\n      // console.log('sw - ',sw);\n\n\n      if (isNaN(scrubbarProgX)) {\n        scrubbarProgX = 0;\n      }\n      if (scrubbarProgX > scrubbarWidth) {\n        scrubbarProgX = scrubbarWidth;\n      }\n\n      if (currentTime < 0) {\n        scrubbarProgX = 0;\n      }\n\n      if (totalTime === 0 || isNaN(totalTime)) {\n        scrubbarProgX = 0;\n      }\n\n      // console.log('spos -3 ',spos, 'promise-to-play-footer-player-from -',cthis.data('promise-to-play-footer-player-from'), \"||\", cthis);\n\n      if (scrubbarProgX < 2 && cthis.data('promise-to-play-footer-player-from')) {\n        // console.error(\"WE RETURN IT\")\n        return false;\n      }\n\n      if (selfClass.spectrum_audioContext_buffer === null) {\n        if (selfClass.$$scrubbProg) {\n          selfClass.$$scrubbProg.style.width = parseInt(scrubbarProgX, 10) + 'px';\n        }\n      }\n\n    }\n\n    function handleClick_prevBtn() {\n\n\n      // console.log('click_prev_btn()')\n      if (o.parentgallery && (o.parentgallery.get(0))) {\n        o.parentgallery.get(0).api_goto_prev();\n      } else {\n\n        syncPlayers_gotoPrev();\n      }\n    }\n\n    function handleClick_nextBtn() {\n      if (o.parentgallery && (o.parentgallery.get(0))) {\n        o.parentgallery.get(0).api_goto_next();\n      } else {\n\n        syncPlayers_gotoNext();\n      }\n    }\n\n\n    /**\n     * fired on requestAnimationFrame\n     * @param pargs\n     * @returns {boolean}\n     */\n    function handleEnterFrame(pargs) {\n\n\n      // -- enter frame\n      // console.log('handleTickChange()', cthis);\n\n      var margs = {\n        'fire_only_once': false\n      }\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      if (destroyed) {\n        console.log(\"DESTROYED\");\n        return false;\n      }\n\n\n      // console.log(sw_suspend_enter_frame);\n      if (margs.fire_only_once === false && isNotRenderingEnterFrame) {\n        requestAnimationFrame(handleEnterFrame);\n        // console.log(\"SUSPENDED ENTER FRAME HERE\");\n        return false;\n      }\n      // console.log(\"REACHED\");\n\n\n      selfClass.timeModel.refreshTimes({\n        'call_from': 'checK_time'\n      });\n\n      if (selfClass.audioType === 'selfHosted') {\n\n      }\n\n\n      view_drawScrubProgress();\n\n\n      selfClass.timeModel.processCurrentFrame();\n      // console.log('cthis -5 ', cthis, selfClass._sourcePlayer);\n\n\n      // -- skin minimal\n      if (o.design_skin === 'skin-minimal') {\n\n\n        if (selfClass.player_playing || selfClass.isCanvasFirstDrawn === false) {\n\n\n          var ctx_minimal = selfClass.skin_minimal_canvasplay.getContext('2d');\n          //console.log(ctx);\n\n\n          var ctx_w = selfClass.skin_minimal_canvasplay.width;\n          var ctx_h = selfClass.skin_minimal_canvasplay.height;\n\n          // console.log(ctx_w);\n          var pw = ctx_w / 100;\n          var ph = ctx_h / 100;\n\n          if (selfClass._actualPlayer) {\n\n          }\n          scrubbarProgX = Math.PI * 2 * (selfClass.timeModel.getVisualCurrentTime() / selfClass.timeModel.getVisualTotalTime());\n\n          if (isNaN(scrubbarProgX)) {\n            scrubbarProgX = 0;\n          }\n          if (scrubbarProgX > Math.PI * 2) {\n            scrubbarProgX = Math.PI * 2;\n          }\n\n          ctx_minimal.clearRect(0, 0, ctx_w, ctx_h);\n          //console.log(ctx_w, ctx_h);\n\n\n          // -- use design_wave_color_progress for drawing skin-minimal circle\n\n\n          ctx_minimal.beginPath();\n          ctx_minimal.arc((50 * pw), (50 * ph), (40 * pw), 0, Math.PI * 2, false);\n          ctx_minimal.fillStyle = \"rgba(0,0,0,0.1)\";\n          ctx_minimal.fill();\n\n\n          // console.log(spos);\n          ctx_minimal.beginPath();\n          ctx_minimal.arc((50 * pw), (50 * ph), (34 * pw), 0, scrubbarProgX, false);\n          //ctx_minimal.fillStyle = \"rgba(0,0,0,0.3)\";\n          ctx_minimal.lineWidth = (10 * pw);\n          ctx_minimal.strokeStyle = 'rgba(0,0,0,0.3)';\n          ctx_minimal.stroke();\n\n\n          selfClass.isCanvasFirstDrawn = true;\n\n\n        }\n        //console.log('ceva');\n      }\n\n\n      //                console.log(o.design_skin);\n\n      // -- enter_frame\n      // console.log(\"REACHED2\");\n      view_drawCurrentTime();\n\n\n      // -- debug handleTickChange\n      // inter_check = setTimeout(handleTickChange, 2000);\n      if (margs.fire_only_once !== true) {\n        requestAnimationFrame(handleEnterFrame);\n      }\n\n\n    }\n\n    function handleClick_playPause(e) {\n      //console.log('click_playpause', 'selfClass.player_playing - ',selfClass.player_playing);\n\n      if (cthis.hasClass('prevent-bubble')) {\n\n        if (e && e.stopPropagation) {\n          e.preventDefault();\n          e.stopPropagation();\n          ;\n          // return false;\n        }\n\n      }\n\n      var _t = $(this);\n\n      var isToggleCancelled = false;\n      //console.log(_t);\n\n\n      if (!cthis.hasClass('listeners-setuped')) {\n\n\n        $(selfClass.$mediaNode_).attr('preload', 'auto');\n\n        setup_listeners();\n        init_loaded();\n\n\n        var inter_checkTotalTime = setInterval(function () {\n\n          // console.log(selfClass.$mediaNode_, selfClass.$mediaNode_.duration);\n          if (selfClass.$mediaNode_ && selfClass.$mediaNode_.duration && isNaN(selfClass.$mediaNode_.duration) === false) {\n\n\n            clearInterval(inter_checkTotalTime);\n          }\n        }, 1000);\n      }\n\n\n      if (o.design_skin === 'skin-minimal') {\n\n        var center_x = _t.offset().left + skin_minimal_button_size / 2;\n        var center_y = _t.offset().top + skin_minimal_button_size / 2;\n        var mouse_x = e.pageX;\n        var mouse_y = e.pageY;\n\n        var perc = -(mouse_x - center_x - (skin_minimal_button_size / 2)) * 0.005;\n        if (mouse_y < center_y) {\n          perc = 0.5 + (0.5 - perc)\n        }\n\n        if (Math.abs(mouse_y - center_y) > 20 || Math.abs(mouse_x - center_x) > 20) {\n\n          seek_to_perc(perc, {\n            call_from: \"skin_minimal_scrub\"\n          })\n          isToggleCancelled = true;\n\n          handleEnterFrame({\n            'fire_only_once': true\n          });\n        }\n      }\n\n\n      //unghi = acos (x - centruX) = asin(centruY - y)\n\n\n      if (isToggleCancelled === false) {\n\n        //console.log(\"selfClass.player_playing -> \",selfClass.player_playing);\n        if (selfClass.player_playing === false) {\n          play_media({\n            'called_from': 'click_playpause'\n          });\n        } else {\n          media_pause();\n        }\n      }\n\n\n      return false;\n    }\n\n\n    /**\n     *\n     * @param targetIncrement\n     */\n    function syncPlayers_gotoItem(targetIncrement = 0) {\n\n\n      var targetIndex = 0;\n      if (selfClass.classFunctionalityInnerPlaylist) {\n        // -- playlist Inner\n\n        targetIndex = selfClass.playlist_inner_currNr + targetIncrement;\n        if (targetIndex >= 0) {\n          selfClass.classFunctionalityInnerPlaylist.playlistInner_gotoItem(targetIndex, {\n            'call_from': 'api_sync_players_prev'\n          });\n        }\n      } else {\n        if (window.dzsap_syncList_players && window.dzsap_syncList_players.length > 0) {\n          player_syncPlayers_gotoItem(selfClass, targetIncrement);\n        } else {\n          console.log('[dzsap] [syncPlayers] no players found')\n        }\n      }\n\n      if (window.dzsap_syncList_players && window.dzsap_syncList_index >= window.dzsap_syncList_players.length) {\n        window.dzsap_syncList_index = 0;\n      }\n    }\n\n    function syncPlayers_gotoPrev() {\n\n\n      if (selfClass._actualPlayer) {\n        selfClass._actualPlayer.get(0).api_sync_players_goto_prev();\n\n        return false;\n      }\n\n\n      syncPlayers_gotoItem(-1);\n\n    }\n\n\n    /**\n     * go to next inner playlistItem for single player\n     * @returns {boolean}\n     */\n    function syncPlayers_gotoNext() {\n      // console.log('sync_players_goto_next() - ', cthis, 'selfClass._actualPlayer - ',selfClass._actualPlayer);\n\n      if (selfClass._actualPlayer) {\n        selfClass._actualPlayer.get(0).api_sync_players_goto_next();\n\n        return false;\n      }\n      syncPlayers_gotoItem(1);\n    }\n\n    /**\n     *\n     * @param pargs\n     * @returns {boolean|void}\n     */\n    function media_handleEnd(pargs) {\n\n\n      var margs = {\n        'called_from': 'default'\n      }\n\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n      //console.log('end');\n      if (selfClass.isMediaEnded) {\n        return false;\n      }\n\n      // console.log('%c [dzsap] [play] handle_end()', ConstantsDzsAp.DEBUG_STYLE_PLAY_FUNCTIONS, margs, selfClass.cthis);\n\n\n      selfClass.isMediaEnded = true;\n\n      selfClass.inter_isEnded = setTimeout(function () {\n        selfClass.isMediaEnded = false;\n      }, 1000);\n\n\n      if (selfClass._sourcePlayer) {\n\n        media_isLoopActive = selfClass._sourcePlayer.get(0).api_get_media_isLoopActive();\n      }\n      if (selfClass._actualPlayer && margs.call_from !== 'fake_player') {\n        // -- lets leave fake player handle handle_end\n        return false;\n      }\n\n\n      seek_to(0, {\n        'call_from': 'handle_end'\n      });\n\n      // console.log('media_isLoopActive- ' ,media_isLoopActive);\n      if (media_isLoopActive) {\n        play_media({\n          'called_from': 'track_end'\n        });\n        return false;\n      } else {\n        media_pause();\n      }\n\n      if (o.parentgallery) {\n        o.parentgallery.get(0).api_gallery_handle_end();\n      }\n\n\n      setTimeout(function () {\n        if (selfClass.cthis.hasClass('is-single-player') || (selfClass._sourcePlayer && selfClass._sourcePlayer.hasClass('is-single-player'))) {\n          // -- called on handle end\n          syncPlayers_gotoNext();\n        }\n      }, 100);\n\n      setTimeout(function () {\n\n        if (selfClass._sourcePlayer && (selfClass._sourcePlayer.hasClass('is-single-player') || selfClass._sourcePlayer.hasClass('feeded-whole-playlist'))) {\n          //action_audio_end(selfClass._sourcePlayer,args);\n          selfClass._sourcePlayer.get(0).api_handle_end({\n            'call_from': 'handle_end() fake_player'\n          });\n          return false;\n          //args.child_player = selfClass._sourcePlayer;\n        }\n\n        if (action_audio_end) {\n          var args = {};\n          action_audio_end(cthis, args);\n        }\n      }, 200);\n\n    }\n\n\n    function view_handleResize(e, pargs) {\n\n\n      if (cthis) {\n\n      }\n\n      // console.log('handleResize()', e, margs);\n\n      ww = $(window).width();\n      cthisWidth = cthis.width();\n      th = cthis.height();\n\n\n      if ($scrubBgCanvas && typeof ($scrubBgCanvas.width) === 'function') {\n        canvasWidth = $scrubBgCanvas.width();\n        canh = $scrubBgCanvas.height();\n\n      }\n\n\n      if (cthisWidth <= 720) {\n        cthis.addClass('under-720');\n      } else {\n\n        cthis.removeClass('under-720');\n      }\n      if (cthisWidth <= 500) {\n        // -- width under 500\n\n\n        // -- move\n        if (cthis.hasClass('under-500') === false) {\n          if (o.design_skin === 'skin-wave' && selfClass.skinwave_mode === 'normal') {\n            selfClass._apControls.append(selfClass._metaArtistCon);\n          }\n        }\n\n        cthis.addClass('under-500');\n\n\n      } else {\n        // -- width under 500\n\n\n        if (cthis.hasClass('under-500') === false) {\n          if (o.design_skin === 'skin-wave' && selfClass.skinwave_mode === 'normal') {\n            // selfClass._apControls.append(selfClass._metaArtistCon);\n            selfClass._conPlayPauseCon.after(selfClass._metaArtistCon);\n          }\n        }\n\n        cthis.removeClass('under-500');\n      }\n\n\n      scrubbarWidth = cthisWidth;\n      if (o.design_skin === 'skin-default') {\n        scrubbarWidth = cthisWidth;\n      }\n      if (o.design_skin === 'skin-pro') {\n        scrubbarWidth = cthisWidth;\n      }\n      if (o.design_skin === 'skin-silver' || o.design_skin === 'skin-aria') {\n        scrubbarWidth = cthisWidth;\n\n        scrubbarWidth = selfClass._scrubbar.width();\n        //console.log(sw);\n\n\n      }\n\n\n      if (o.design_skin === 'skin-justthumbandbutton') {\n        cthisWidth = cthis.children('.audioplayer-inner').outerWidth();\n        scrubbarWidth = cthisWidth;\n      }\n      if (o.design_skin === 'skin-redlights' || o.design_skin === 'skin-steel') {\n        scrubbarWidth = selfClass._scrubbar.width();\n      }\n\n\n      //console.log(sw);\n\n\n      if (o.design_skin === 'skin-wave') {\n        scrubbarWidth = selfClass._scrubbar.outerWidth(false);\n        // console.log('scrubbar width - ', sw, selfClass._scrubbar);\n\n        scrubbar_h = selfClass._scrubbar.outerHeight(false);\n\n        if (selfClass._commentsHolder) {\n\n          selfClass._commentsHolder.css({\n            'width': scrubbarWidth\n          })\n\n          selfClass._commentsHolder.addClass('active');\n\n\n        }\n\n      }\n\n      //console.log(o.design_skin, tw, sw);\n\n\n      if (res_thumbh === true) {\n\n        //                    console.log(cthis.get(0).style.height);\n\n\n        if (o.design_skin === 'skin-default') {\n\n\n          if (cthis.get(0) !== undefined) {\n            // if the height is auto then\n            if (cthis.get(0).style.height === 'auto') {\n              cthis.height(200);\n            }\n          }\n\n          var cthis_height = selfClass._audioplayerInner.height();\n          if (typeof cthis.attr('data-initheight') === 'undefined' && cthis.attr('data-initheight') !== '') {\n            cthis.attr('data-initheight', selfClass._audioplayerInner.height());\n          } else {\n            cthis_height = Number(cthis.attr('data-initheight'));\n          }\n\n          // console.log('cthis_height - ', cthis_height, cthis.attr('data-initheight'));\n\n          if (o.design_thumbh === 'default') {\n\n            design_thumbh = cthis_height - 44;\n          }\n\n        }\n\n        selfClass._audioplayerInner.find('.the-thumb').eq(0).css({\n          // 'height': design_thumbh\n        })\n      }\n\n\n      //===display none + overflow hidden hack does not work .. yeah\n      //console.log(cthis, selfClass._scrubbar.children('.scrub-bg').width());\n\n      if (cthis.css('display') !== 'none') {\n        selfClass._scrubbar.find('.scrub-bg-img').eq(0).css({\n          'width': selfClass._scrubbar.children('.scrub-bg').width()\n        });\n        selfClass._scrubbar.find('.scrub-prog-img').eq(0).css({\n          'width': selfClass._scrubbar.children('.scrub-bg').width()\n        });\n      }\n\n\n      // console.log('is_under_400 - ',is_under_400);\n      // console.log('tw - ',tw);\n      cthis.removeClass('under-240 under-400');\n      if (cthisWidth <= 240) {\n        cthis.addClass('under-240');\n      }\n      if (cthisWidth <= 500) {\n        cthis.addClass('under-400');\n\n        if (is_under_400 === false) {\n          is_under_400 = true;\n        }\n        if (selfClass.$controlsVolume) {\n        }\n\n      } else {\n\n\n        if (is_under_400 === true) {\n          is_under_400 = false;\n        }\n      }\n\n\n      var aux2 = 50;\n\n      // console.log('o.design_skin - ', o.design_skin, cthis);\n      // -- skin-wave\n      if (o.design_skin === 'skin-wave') {\n\n\n        var sh = selfClass._scrubbar.eq(0).height();\n\n\n        if (selfClass.skinwave_mode === 'small') {\n          sh = 5;\n\n\n        }\n\n\n        // ---------- calculate dims small\n        if (selfClass.skinwave_mode === 'small') {\n          scrubbarWidth = selfClass._scrubbar.width();\n        }\n\n\n        if (o.skinwave_wave_mode === 'canvas') {\n          if (cthis.attr('data-pcm')) {\n            if (selfClass._scrubbarbg_canvas.width() === 100) {\n              selfClass._scrubbarbg_canvas.width(selfClass._scrubbar.width());\n            }\n            // console.log('selfClass.data_source - ', selfClass.data_source);\n            if (selfClass.data_source !== 'fake') {\n              // -- if inter definied then clear timeout and call\n              if (draw_canvas_inter) {\n                clearTimeout(draw_canvas_inter);\n                draw_canvas_inter = setTimeout(draw_canvas_inter_func, 300);\n              } else {\n                draw_canvas_inter_func();\n                draw_canvas_inter = 1;\n              }\n            }\n          }\n        }\n      }\n\n\n      if (o.design_skin === 'skin-minimal') {\n\n\n        // console.log('skin_minimal_button_size - ' ,skin_minimal_button_size);\n\n        skin_minimal_button_size = selfClass._apControls.width();\n        if (selfClass.skin_minimal_canvasplay) {\n          selfClass.skin_minimal_canvasplay.style.width = skin_minimal_button_size;\n          selfClass.skin_minimal_canvasplay.width = skin_minimal_button_size;\n          selfClass.skin_minimal_canvasplay.style.height = skin_minimal_button_size;\n          selfClass.skin_minimal_canvasplay.height = skin_minimal_button_size;\n\n\n          // skin_minimal_button_size = sanitize_to_css_size(skin_minimal_button_size);\n\n\n          $(selfClass.skin_minimal_canvasplay).css({\n            'width': skin_minimal_button_size\n            , 'height': skin_minimal_button_size\n          });\n        }\n\n\n      }\n\n\n      if (o.design_skin === 'skin-default') {\n        if (selfClass.$currTime) {\n          //console.log(o.design_skin, parseInt(selfClass._metaArtistCon.css('left'),10) + selfClass._metaArtistCon.outerWidth() + 10);\n          var _metaArtistCon_l = parseInt(selfClass._metaArtistCon.css('left'), 10);\n          var _metaArtistCon_w = selfClass._metaArtistCon.outerWidth();\n\n          if (selfClass._metaArtistCon.css('display') === 'none') {\n            selfClass._metaArtistCon_w = 0;\n          }\n          if (isNaN(selfClass._metaArtistCon_l)) {\n            selfClass._metaArtistCon_l = 20;\n          }\n        }\n\n      }\n\n      if (o.design_skin === 'skin-minion') {\n        //console.log();\n        aux2 = parseInt(selfClass.$conControls.find('.con-playpause').eq(0).offset().left, 10) - parseInt(selfClass.$conControls.eq(0).offset().left, 10) - 18;\n        selfClass.$conControls.find('.prev-btn').eq(0).css({\n          'top': 0,\n          'left': aux2\n        })\n        aux2 += 36;\n        selfClass.$conControls.find('.next-btn').eq(0).css({\n          'top': 0,\n          'left': aux2\n        })\n      }\n\n\n      if (o.embedded === 'on') {\n        //console.log(window.frameElement)\n        if (window.frameElement) {\n          //window.frameElement.height = cthis.height();\n          //console.log(window.frameElement.height, cthis.outerHeight())\n\n\n          var args = {\n            height: cthis.outerHeight()\n          };\n\n\n          if (o.embedded_iframe_id) {\n\n            args.embedded_iframe_id = o.embedded_iframe_id;\n          }\n\n\n          var message = {\n            name: \"resizeIframe\",\n            params: args\n          };\n          window.parent.postMessage(message, '*');\n        }\n\n      }\n\n\n      view_drawScrubProgress();\n\n      // draw_curr_time();\n\n\n      if (o.settings_trigger_resize > 0) {\n\n        if (o.parentgallery && $(o.parentgallery).get(0) !== undefined && $(o.parentgallery).get(0).api_handleResize !== undefined) {\n          $(o.parentgallery).get(0).api_handleResize();\n        }\n      }\n\n    }\n\n\n    function\n\n    draw_canvas_inter_func() {\n      // console.log('draw_canvas_inter_func', 'skinwave_wave_mode_canvas_waves_number - ', o.skinwave_wave_mode_canvas_waves_number);\n\n\n      // console.log(cthis,\"_scrubbarbg_canvas.get(0) -> \",_scrubbarbg_canvas.get(0));\n      dzsapWaveFunctions.view_drawCanvases(selfClass, cthis.attr('data-pcm'), 'canvas_normal_pcm');\n\n      draw_canvas_inter = 0;\n    }\n\n    function\n\n    volume_handleMouse(e) {\n      var _t = $(this);\n      /**\n       * from 0 to 1\n       * @type number\n       */\n      var mouseXRelativeToVolume = null;\n\n      //var mx = e.clientX - selfClass.$controlsVolume.offset().left;\n      if (selfClass.$controlsVolume.find('.volume_static').length) {\n\n        mouseXRelativeToVolume = Number((e.pageX - (selfClass.$controlsVolume.find('.volume_static').eq(0).offset().left)) / (selfClass.$controlsVolume.find('.volume_static').eq(0).width()));\n      }\n\n      if (!mouseXRelativeToVolume) {\n        return false;\n      }\n      if (e.type === 'mousemove') {\n        if (volume_dragging) {\n\n          if (_t.parent().hasClass('volume-holder') || _t.hasClass('volume-holder')) {\n            // todo: nothing ?\n          }\n\n          if (o.design_skin === 'skin-redlights') {\n            mouseXRelativeToVolume *= 10;\n            mouseXRelativeToVolume = Math.round(mouseXRelativeToVolume);\n            //console.log(mouseXRelativeToVolume);\n            mouseXRelativeToVolume /= 10;\n          }\n\n\n          volume_setVolume(mouseXRelativeToVolume, {\n            call_from: \"set_by_mousemove\"\n          });\n          isMuted = false;\n        }\n\n      }\n      if (e.type === 'mouseleave') {\n\n      }\n      if (e.type === 'click') {\n\n        //console.log(_t, _t.offset().left)\n\n\n        if (_t.parent().hasClass('volume-holder')) {\n\n\n          mouseXRelativeToVolume = 1 - ((e.pageY - (selfClass.$controlsVolume.find('.volume_static').eq(0).offset().top)) / (selfClass.$controlsVolume.find('.volume_static').eq(0).height()));\n\n        }\n        if (_t.hasClass('volume-holder')) {\n          mouseXRelativeToVolume = 1 - ((e.pageY - (selfClass.$controlsVolume.find('.volume_static').eq(0).offset().top)) / (selfClass.$controlsVolume.find('.volume_static').eq(0).height()));\n\n          // console.log(mouseXRelativeToVolume);\n\n        }\n\n        //console.log(mouseXRelativeToVolume);\n\n        volume_setVolume(mouseXRelativeToVolume, {\n          call_from: \"set_by_mouseclick\"\n        });\n        isMuted = false;\n      }\n\n      if (e.type === 'mousedown') {\n\n        volume_dragging = true;\n        cthis.addClass('volume-dragging');\n\n\n        if (_t.parent().hasClass('volume-holder')) {\n\n\n          mouseXRelativeToVolume = 1 - ((e.pageY - (selfClass.$controlsVolume.find('.volume_static').eq(0).offset().top)) / (selfClass.$controlsVolume.find('.volume_static').eq(0).height()));\n\n        }\n\n        // console.log('mouseXRelativeToVolume - ', mouseXRelativeToVolume);\n\n        volume_setVolume(mouseXRelativeToVolume, {\n          call_from: \"set_by_mousedown\"\n        });\n        isMuted = false;\n      }\n      if (e.type === 'mouseup') {\n\n        volume_dragging = false;\n        cthis.removeClass('volume-dragging');\n\n      }\n\n    }\n\n    function handleMouseOnScrubbar(e) {\n      var mousex = e.pageX;\n\n\n      if ($(e.target).hasClass('sample-block-start') || $(e.target).hasClass('sample-block-end')) {\n        return false;\n      }\n\n      if (e.type === 'mousemove') {\n        selfClass._scrubbar.children('.scrubBox-hover').css({\n          'left': (mousex - selfClass._scrubbar.offset().left)\n        });\n\n\n        if (o.scrub_show_scrub_time === 'on') {\n\n          // console.log('selfClass.$currTime - ',selfClass.$currTime);\n\n          if (selfClass.timeModel.getVisualTotalTime()) {\n            var aux = (mousex - selfClass._scrubbar.offset().left) / selfClass._scrubbar.outerWidth() * selfClass.timeModel.getVisualTotalTime();\n\n\n            if (selfClass.$currTime) {\n              selfClass.$currTime.html(dzsapHelpers.formatTime(aux));\n              selfClass.$currTime.addClass('scrub-time');\n\n            }\n\n            isScrubShowingCurrentTime = true;\n          }\n        }\n\n      }\n      if (e.type === 'mouseleave') {\n\n        isScrubShowingCurrentTime = false;\n\n        if (selfClass.$currTime) {\n          selfClass.$currTime.removeClass('scrub-time');\n\n        }\n\n        view_drawCurrentTime();\n\n      }\n      if (e.type === 'click') {\n\n\n        if (cthis.hasClass('prevent-bubble')) {\n\n          if (e && e.stopPropagation) {\n            e.preventDefault();\n            e.stopPropagation();\n            ;\n            // return false;\n          }\n        }\n\n\n        if (scrubbarWidth === 0) {\n\n          scrubbarWidth = selfClass._scrubbar.width();\n        }\n        if (scrubbarWidth === 0) {\n          scrubbarWidth = 300;\n        }\n        var targetPositionOnScrub = ((e.pageX - (selfClass._scrubbar.offset().left)) / (scrubbarWidth) * selfClass.timeModel.getVisualTotalTime());\n\n\n        if (selfClass.pseudo_sample_time_start === 0) {\n\n          if (selfClass.sample_time_start > 0) {\n            targetPositionOnScrub -= selfClass.sample_time_start;\n          }\n        }\n\n        if (selfClass._actualPlayer) {\n\n\n          setTimeout(function () {\n            if (selfClass._actualPlayer.get(0) && selfClass._actualPlayer.get(0).api_pause_media) {\n\n              selfClass._actualPlayer.get(0).api_seek_to_perc(targetPositionOnScrub / selfClass.timeModel.getVisualTotalTime(), {\n                'call_from': 'from_feeder_to_feed'\n              });\n            }\n          }, 50);\n        }\n\n\n        seek_to(targetPositionOnScrub, {\n          'call_from': 'handleMouseOnScrubbar'\n        });\n\n        if (o.autoplay_on_scrub_click === 'on') {\n\n          if (selfClass.player_playing === false) {\n            play_media({\n              'called_from': 'handleMouseOnScrubbar'\n            });\n          }\n        }\n\n        if (cthis.hasClass('from-wc_loop')) {\n          return false;\n        }\n      }\n\n    }\n\n    function\n\n    seek_to_perc(argperc, pargs) {\n      seek_to((argperc * selfClass.timeModel.getVisualTotalTime()), pargs);\n    }\n\n    /**\n     * seek to seconds\n     * @param targetTimeMediaScrub - number of settings\n     * @param pargs -- optiona arguments\n     * @returns {boolean}\n     */\n    function\n\n    seek_to(targetTimeMediaScrub, pargs) {\n      //arg = nr seconds\n\n      var margs = {\n        'call_from': 'default'\n        , 'deeplinking': 'off' // -- default or \"auto\" or \"user action\"\n        , 'call_from_type': 'default' // -- default or \"auto\" or \"user action\"\n      };\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      if (margs.call_from === 'from_feeder_to_feed') {\n\n      }\n      // console.log('%c seek_to() - margs - ', ConstantsDzsAp.DEBUG_STYLE_1, margs, 'arg - ', targetTimeMediaScrub);\n      // console.trace();\n\n      if (margs.deeplinking === 'on') {\n        var newlink = dzsapHelpers.add_query_arg(window.location.href, 'audio_time', targetTimeMediaScrub);\n\n\n        var stateObj = {foo: \"bar\"};\n        history.pushState(stateObj, null, newlink);\n      }\n\n\n      // console.log('seek_to arg - ',arg, 'type - ',type, cthis);\n      targetTimeMediaScrub = dzsapHelpers.sanitizeToIntFromPointTime(targetTimeMediaScrub);\n\n\n      // console.log('targetTime before sample time start', targetTime, 'selfClass.timeModel.sampleTimeEnd - ', selfClass.timeModel.sampleTimeEnd);\n      targetTimeMediaScrub = selfClass.timeModel.getActualTargetTime(targetTimeMediaScrub);\n      // console.log('targetTime after sample time start', targetTime);\n\n\n      // console.log('cthis.hasClass(\\'first-played\\') - ',cthis.hasClass('first-played'));\n\n      // console.log('curr_time_first_set - ',curr_time_first_set);\n      if (selfClass._actualPlayer) {\n        var args = {\n          type: selfClass.actualDataTypeOfMedia,\n          fakeplayer_is_feeder: 'on'\n        }\n        if (selfClass._actualPlayer.length && selfClass._actualPlayer.data('feeding-from') !== cthis.get(0)) {\n          // -- the actualPlayer is not rendering this feed player\n          if (margs.call_from !== 'handle_end' && margs.call_from !== 'from_playfrom' && margs.call_from !== 'last_pos' && margs.call_from !== 'playlist_seek_from_0') {\n            // -- if it is not user action, ( handle_end or anything else )\n            args.called_from = 'seek_to from player source->' + (cthis.attr('data-source')) + ' < -  ' + 'old call from - ' + margs.call_from;\n            if (selfClass._actualPlayer.get(0).api_change_media) {\n              selfClass._actualPlayer.get(0).api_change_media(cthis, args);\n            } else {\n              console.log('not inited ? ', selfClass._actualPlayer);\n            }\n          } else {\n            // -- NORMAL call\n\n            cthis.data('promise-to-play-footer-player-from', targetTimeMediaScrub);\n          }\n        }\n\n\n        setTimeout(function () {\n\n          if (selfClass._actualPlayer.get(0) && selfClass._actualPlayer.get(0).api_pause_media) {\n            if (margs.call_from !== 'from_playfrom' && margs.call_from !== 'last_pos') {\n              selfClass._actualPlayer.get(0).api_seek_to(targetTimeMediaScrub, {\n                'call_from': 'from_feeder_to_feed'\n              });\n            }\n          }\n        }, 50);\n\n        return false;\n      }\n\n\n      if (selfClass.audioType === 'youtube') {\n        try {\n          selfClass.$mediaNode_.seekTo(targetTimeMediaScrub);\n        } catch (err) {\n          console.log('yt seek err - ', err);\n        }\n      }\n\n      handleEnterFrame({\n        'fire_only_once': true\n      })\n      setTimeout(function () {\n        handleEnterFrame({\n          'fire_only_once': true\n        })\n      }, 20);\n\n\n      if (selfClass.audioType === 'selfHosted') {\n        if (0) {\n\n          //console.log('arg - ',arg);\n          selfClass.lastTimeInSeconds = targetTimeMediaScrub;\n\n          media_pause({\n            'audioapi_setlasttime': false\n          });\n          play_media({\n            'called_from': 'audio_buffer ( seek_to() )'\n          });\n        } else {\n\n          // console.log('seek to -> ', arg);\n          if (selfClass.$mediaNode_ && typeof (selfClass.$mediaNode_.currentTime) !== 'undefined') {\n\n            try {\n              selfClass.$mediaNode_.currentTime = targetTimeMediaScrub;\n            } catch (e) {\n              console.log('error on scrub', e, ' arg - ', targetTimeMediaScrub);\n\n            }\n\n            // console.log('selfClass.$mediaNode_.currentTime -> ',selfClass.$mediaNode_.currentTime);\n          }\n\n          return false;\n\n        }\n\n      }\n\n\n    }\n\n    /**\n     * seek to ( only visual )\n     * @param argperc\n     */\n    function\n\n    seek_to_visual(argperc) {\n\n\n      curr_time_first_set = true;\n\n\n      handleEnterFrame({\n        'fire_only_once': true\n      })\n      setTimeout(function () {\n        handleEnterFrame({\n          'fire_only_once': true\n        })\n      }, 20);\n    }\n\n    /**\n     * playback speed\n     * @param {float} arg 0 - 10\n     */\n    function\n\n    set_playback_speed(arg) {\n\n      if (selfClass.audioType === 'youtube') {\n        selfClass.$mediaNode_.setPlaybackRate(arg);\n      }\n      if (selfClass.audioType === 'selfHosted') {\n        selfClass.$mediaNode_.playbackRate = arg;\n\n      }\n\n    }\n\n    /**\n     * outputs a volume from 0 to 1\n     * @param {number} arg 0 <-> 1\n     * @param pargs\n     * @returns {boolean}\n     */\n    function\n\n    volume_setVolume(arg, pargs) {\n\n      var margs = {\n\n        'call_from': 'default'\n      };\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      if (arg > 1) {\n        arg = 1;\n      }\n      if (arg < 0) {\n        arg = 0;\n      }\n\n      // console.log('[dzsap] [volume] volume_setVolume()', arg, margs, selfClass.cthis);\n\n\n      if (margs.call_from === 'from_fake_player_feeder_from_init_loaded') {\n        // -- lets prevent call from the init_loaded set_volume if the volume has been changed\n        if (selfClass._sourcePlayer) {\n          if (o.default_volume !== 'default') {\n            volume_set_by_user = true;\n          }\n          if (volume_set_by_user) {\n            return false;\n          } else {\n            volume_set_by_user = true;\n            // console.log(\"SET VOLUME BY USER\", cthis);\n          }\n        }\n      }\n\n      if (margs.call_from === 'set_by_mouseclick' || margs.call_from === 'set_by_mousemove') {\n        volume_set_by_user = true;\n      }\n\n      // console.log(\"set_volume()\",arg, cthis, margs);\n\n      if (selfClass.audioType === 'youtube') {\n        if (selfClass.$mediaNode_ && selfClass.$mediaNode_.setVolume) {\n          selfClass.$mediaNode_.setVolume(arg * 100);\n        }\n      }\n      if (selfClass.audioType === 'selfHosted') {\n        if (selfClass.$mediaNode_) {\n\n          selfClass.$mediaNode_.volume = arg;\n        } else {\n          if (selfClass.$mediaNode_) {\n            $(selfClass.$mediaNode_).attr('preload', 'metadata');\n          }\n        }\n      }\n\n      //console.log(selfClass.$controlsVolume.children('.volume_active'));\n\n\n      volume_setOnlyVisual(arg, margs);\n\n      if (selfClass._sourcePlayer) {\n        margs.call_from = ('from_fake_player')\n        if (selfClass._sourcePlayer.get(0) && selfClass._sourcePlayer.get(0).api_visual_set_volume(arg, margs)) {\n          selfClass._sourcePlayer.get(0).api_visual_set_volume(arg, margs);\n        }\n      }\n\n      if (selfClass._actualPlayer) {\n        // console.log('try to set volume on actual player ( fake player ) ', 'selfClass._actualPlayer - ', selfClass._actualPlayer, margs);\n        if (margs.call_from !== ('from_fake_player')) {\n          // margs.call_from = ('from_fake_player_feeder')\n          if (margs.call_from === 'from_init_loaded') {\n\n            margs.call_from = ('from_fake_player_feeder_from_init_loaded')\n          } else {\n\n            margs.call_from = ('from_fake_player_feeder')\n          }\n          if (selfClass._actualPlayer && selfClass._actualPlayer.get(0) && selfClass._actualPlayer.get(0).api_set_volume) {\n            selfClass._actualPlayer.get(0).api_set_volume(arg, margs);\n          }\n        }\n      }\n\n    }\n\n\n    function volume_setOnlyVisual(arg, margs) {\n\n      // console.log('')\n\n\n      if (selfClass.$controlsVolume.hasClass('controls-volume-vertical')) {\n        selfClass.$controlsVolume.find('.volume_active').eq(0).css({\n          'height': (selfClass.$controlsVolume.find('.volume_static').eq(0).height() * arg)\n        });\n      } else {\n\n        if (selfClass.initOptions.design_skin === 'skin-redlights') {\n\n          selfClass.$controlsVolume.find('.volume_active').eq(0).css({\n            'clip-path': 'inset(0% ' + (Math.abs(1 - arg) * 100) + '% 0% 0%)'\n          });\n        } else {\n\n          selfClass.$controlsVolume.find('.volume_active').eq(0).css({\n            'width': (selfClass.$controlsVolume.find('.volume_static').eq(0).width() * arg)\n          });\n        }\n      }\n\n\n      if (o.design_skin === 'skin-wave' && o.skinwave_dynamicwaves === 'on') {\n        //console.log(arg);\n        selfClass._scrubbar.find('.scrub-bg-img').eq(0).css({\n          'transform': 'scaleY(' + arg + ')'\n        })\n        selfClass._scrubbar.find('.scrub-prog-img').eq(0).css({\n          'transform': 'scaleY(' + arg + ')'\n        })\n\n      }\n\n\n      if (localStorage !== null && selfClass.the_player_id) {\n\n        //console.log(selfClass.the_player_id);\n\n        localStorage.setItem('dzsap_last_volume_' + selfClass.the_player_id, arg);\n\n      }\n\n      volume_lastVolume = arg;\n    }\n\n\n    function volume_handleClickMuteIcon(e) {\n\n      if (isMuted === false) {\n        last_vol_before_mute = volume_lastVolume;\n        volume_setVolume(0, {\n          call_from: \"from_mute\"\n        });\n        isMuted = true;\n      } else {\n        volume_setVolume(last_vol_before_mute, {\n          call_from: \"from_unmute\"\n        });\n        isMuted = false;\n      }\n    }\n\n    function pause_media_visual(pargs) {\n\n\n      var margs = {\n        'call_from': 'default'\n      };\n\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      selfClass.$conPlayPause.removeClass('playing');\n      cthis.removeClass('is-playing');\n      selfClass.player_playing = false;\n\n      //console.log(\"PAUSE MEDIA VISUAL\")\n\n\n      if (cthis.parent().hasClass('zoomsounds-wrapper-bg-center')) {\n        cthis.parent().removeClass('is-playing');\n      }\n      if (selfClass.$reflectionVisualObject) {\n        selfClass.$reflectionVisualObject.removeClass('is-playing');\n      }\n\n      if (o.parentgallery) {\n        o.parentgallery.removeClass('player-is-playing');\n      }\n\n\n      isNotRenderingEnterFrame = true;\n\n\n      if (action_audio_pause) {\n        action_audio_pause(cthis);\n      }\n    }\n\n    function media_pause(pargs) {\n      //console.log('pause_media()', cthis);\n\n\n      var margs = {\n        'audioapi_setlasttime': true,\n        'donot_change_media': false,\n        'call_actual_player': true,\n      };\n\n      if (destroyed) {\n        return false;\n      }\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n\n      pause_media_visual({\n        'call_from': 'pause_media'\n      });\n\n\n      if (margs.call_actual_player && margs.donot_change_media !== true) {\n        if (selfClass._actualPlayer !== null) {\n          var args = {\n            type: selfClass.actualDataTypeOfMedia,\n            fakeplayer_is_feeder: 'on'\n          }\n          if (selfClass._actualPlayer && selfClass._actualPlayer.length && selfClass._actualPlayer.data('feeding-from') !== cthis.get(0)) {\n            args.called_from = 'pause_media from player ' + cthis.attr('data-source');\n            selfClass._actualPlayer.get(0).api_change_media(cthis, args);\n          }\n          setTimeout(function () {\n            if (selfClass._actualPlayer.get(0) && selfClass._actualPlayer.get(0).api_pause_media) {\n              selfClass._actualPlayer.get(0).api_pause_media();\n            }\n          }, 100);\n\n          selfClass.player_playing = false;\n          return;\n        }\n      }\n\n\n      mediaFunctions.media_pause(selfClass, () => {\n        // console.log('selfClass._sourcePlayer - ', selfClass._sourcePlayer, '(cthis) - ', cthis);\n        if (selfClass._sourcePlayer) {\n          if (selfClass._sourcePlayer.get(0) && selfClass._sourcePlayer.get(0).api_pause_media_visual) {\n            selfClass._sourcePlayer.get(0).api_pause_media_visual({\n              'call_from': 'pause_media in child player'\n            });\n          }\n        }\n      })\n\n\n      selfClass.player_playing = false;\n\n\n    }\n\n    function play_media_visual(margs) {\n\n\n      //return false;\n      selfClass.player_playing = true;\n      isNotRenderingEnterFrame = false;\n\n      //return false;\n      cthis.addClass('is-playing');\n      cthis.addClass('first-played');\n\n      if (selfClass.$reflectionVisualObject) {\n        selfClass.$reflectionVisualObject.addClass('is-playing');\n      }\n      if (o.parentgallery) {\n        o.parentgallery.addClass('player-is-playing');\n      }\n\n      if (selfClass.classFunctionalityInnerPlaylist) {\n        selfClass.classFunctionalityInnerPlaylist.player_determineSyncPlayersIndex(selfClass, selfClass._sourcePlayer);\n      }\n      dzsapHelpers.view_player_globalDetermineSyncPlayersIndex(selfClass);\n\n      dzsapHelpers.view_player_playMiscEffects(selfClass);\n\n\n      if (selfClass.$stickToBottomContainer) {\n        selfClass.$stickToBottomContainer.addClass('audioplayer-loaded');\n      }\n\n      //console.log(cthis, margs);\n\n      if (action_audio_play) {\n        action_audio_play(cthis);\n      }\n      if (action_audio_play2) {\n        action_audio_play2(cthis);\n      }\n\n\n    }\n\n    function play_media(pargs) {\n\n      //                console.log(dzsap_list);\n\n\n      var margs = {\n        'api_report_play_media': true\n        , 'called_from': 'default'\n        , 'retry_call': 0\n      }\n      if (pargs) {\n        margs = $.extend(margs, pargs)\n      }\n\n      if (!selfClass.isSetupedMedia) {\n        setup_media({'called_from': margs.called_from + '[play_media .. not setuped]'});\n      }\n\n\n      // console.log('.play_media() -3 ',margs,cthis, 'selfClass.$mediaNode_ - ', selfClass.$mediaNode_);\n      //return false ;\n      //return;\n\n      if (margs.called_from === 'api_sync_players_prev') {\n        // console.log('o.parentgallery - ',o.parentgallery);\n\n        player_index_in_gallery = cthis.parent().children('.audioplayer,.audioplayer-tobe').index(cthis);\n\n        if (o.parentgallery && o.parentgallery.get(0) && o.parentgallery.get(0).api_goto_item) {\n          o.parentgallery.get(0).api_goto_item(player_index_in_gallery);\n        }\n      }\n      // console.log('selfClass.spectrum_audioContext_buffer - ', selfClass.spectrum_audioContext_buffer);\n      if (dzsapHelpers.is_ios() && selfClass.spectrum_audioContext_buffer === 'waiting') {\n        setTimeout(function () {\n          pargs.call_from_aux = 'waiting audioCtx_buffer or ios';\n          play_media(pargs);\n        }, 500);\n        return false;\n      }\n\n      if (margs.called_from === 'click_playpause') {\n        // -- lets setup the playlist\n      }\n\n\n      if (cthis.hasClass('media-setuped') === false && selfClass._actualPlayer === null) {\n        console.log('warning: media not setuped, there might be issues', cthis.attr('id'));\n      }\n\n\n      if (margs.called_from.indexOf('feed_to_feeder') > -1) {\n        if (cthis.hasClass('dzsap-loaded') === false) {\n          init_loaded();\n          var delay = 300;\n          if (dzsapHelpers.is_android_good()) {\n            delay = 0;\n          }\n          if (margs.call_from_aux !== 'with delay') {\n            if (delay) {\n              setTimeout(function () {\n                margs.call_from_aux = 'with delay';\n                play_media(margs);\n              }, delay);\n            } else {\n              play_media(margs);\n            }\n            return false;\n          }\n\n        }\n      }\n\n\n      //console.log(o.type);\n      if (selfClass.audioType !== 'fake') {\n\n        //return false;\n      }\n\n\n      dzsapHelpers.player_stopOtherPlayers(dzsap_list, selfClass);\n\n\n      if (destroyed_for_rebuffer) {\n        setup_media({\n          'called_from': 'play_media() .. destroyed for rebuffer'\n        });\n        if (dzsHelpers.isInt(selfClass.playFrom)) {\n          seek_to(selfClass.playFrom, {\n            'call_from': 'destroyed_for_rebuffer_playfrom'\n          });\n        }\n        destroyed_for_rebuffer = false;\n      }\n\n      // console.log(o.google_analytics_send_play_event, window._gaq, google_analytics_sent_play_event);\n      if (o.google_analytics_send_play_event === 'on' && window._gaq && google_analytics_sent_play_event === false) {\n        //if(window.console){ console.log( 'sent event'); }\n        window._gaq.push(['_trackEvent', 'ZoomSounds Play', 'Play', 'zoomsounds play - ' + dataSrc]);\n        google_analytics_sent_play_event = true;\n      }\n      // console.log(o.google_analytics_send_play_event, window.ga, google_analytics_sent_play_event);\n\n      if (!window.ga) {\n        if (window.__gaTracker) {\n          window.ga = window.__gaTracker;\n        }\n      }\n\n      if (o.google_analytics_send_play_event === 'on' && window.ga && google_analytics_sent_play_event === false) {\n        if (window.console) {\n          console.log('sent event');\n        }\n        google_analytics_sent_play_event = true;\n        window.ga('send', {\n          hitType: 'event',\n          eventCategory: 'zoomsounds play - ' + dataSrc,\n          eventAction: 'play',\n          eventLabel: 'zoomsounds play - ' + dataSrc\n        });\n      }\n\n      //===media functions\n\n      if (selfClass._sourcePlayer) {\n\n        //console.log(cthis, selfClass._sourcePlayer);\n\n        if (selfClass._sourcePlayer.get(0) && selfClass._sourcePlayer.get(0).api_pause_media_visual) {\n          selfClass._sourcePlayer.get(0).api_play_media_visual({\n            'api_report_play_media': false\n          });\n        }\n\n      }\n\n      // console.log(\"TYPE IS \",type, selfClass._actualPlayer);\n\n      if (selfClass._actualPlayer) {\n        // -- the actual player is the footer player\n\n        //console.log(\"SUBMIT PLAY TO fakeplayer\", selfClass._actualPlayer);\n        var args = {\n          type: selfClass.actualDataTypeOfMedia,\n          fakeplayer_is_feeder: 'on',\n          call_from: 'play_media_audioplayer'\n        }\n\n        try {\n          if (margs.called_from === 'click_playpause') {\n            // -- let us reset up the playlist\n\n\n            if (o.parentgallery) {\n              o.parentgallery.get(0).api_regenerate_sync_players_with_this_playlist();\n              selfClass._actualPlayer.get(0).api_regenerate_playerlist_inner();\n            }\n\n            // console.log(\"we regenerate playlist here\");\n          }\n\n          if (selfClass._actualPlayer && selfClass._actualPlayer.length && selfClass._actualPlayer.data('feeding-from') !== cthis.get(0)) {\n\n            args.called_from = 'play_media from player 22 ' + cthis.attr('data-source') + ' < -  ' + 'old call from - ' + margs.called_from;\n\n            if (selfClass._actualPlayer.get(0).api_change_media) {\n              selfClass._actualPlayer.get(0).api_change_media(cthis, args);\n            }\n\n            if (cthis.hasClass('first-played') === false) {\n              if (cthis.data('promise-to-play-footer-player-from')) {\n                seek_to(cthis.data('promise-to-play-footer-player-from'));\n                setTimeout(function () {\n                  cthis.data('promise-to-play-footer-player-from', '');\n                }, 1000);\n              }\n            }\n\n          }\n          setTimeout(function () {\n            if (selfClass._actualPlayer.get(0) && selfClass._actualPlayer.get(0).api_play_media) {\n              selfClass._actualPlayer.get(0).api_play_media({\n                'called_from': '[feed_to_feeder]'\n              });\n            }\n          }, 100);\n\n\n          // console.log('ajax view submitted', cthis, selfClass.ajax_view_submitted);\n          if (selfClass.ajax_view_submitted === 'off') {\n            (ajax_submit_views.bind(selfClass))();\n          }\n          return;\n\n\n        } catch (err) {\n          console.log('no fake player..', err);\n        }\n      }\n\n\n      if (selfClass.audioType === 'youtube') {\n        dzsap_youtube_playMedia(selfClass, margs, selfClass.youtube_currentId);\n      }\n      if (selfClass.audioType === 'selfHosted') {\n\n\n      }\n\n\n      if (selfClass.audioType === 'youtube') {\n        play_media_visual(margs);\n      }\n\n      mediaFunctions.media_tryToPlay(selfClass, () => {\n\n        //return false;\n        play_media_visual(margs);\n\n\n        if (o.scrubbar_type === 'wave' && o.skinwave_enableSpectrum === 'on') {\n          dzsapHelpers.player_initSpectrum(selfClass);\n        }\n\n\n        //console.log(selfClass.ajax_view_submitted);\n\n\n        if (selfClass._sourcePlayer) {\n          window.dzsap_currplayer_focused = selfClass._sourcePlayer.get(0);\n          if (selfClass._sourcePlayer.get(0) && selfClass._sourcePlayer.get(0).api_pause_media_visual) {\n            selfClass._sourcePlayer.get(0).api_try_to_submit_view();\n          }\n\n        } else {\n\n          window.dzsap_currplayer_focused = cthis.get(0);\n          service_submitView();\n        }\n\n\n        if (selfClass.keyboard_controls.play_trigger_step_back === 'on') {\n          if (dzsap_currplayer_focused) {\n            dzsap_currplayer_focused.api_step_back(selfClass.keyboard_controls.step_back_amount);\n          }\n        }\n      }, (err) => {\n        console.log('error autoplay playing -  ', err);\n        setTimeout(() => {\n          media_pause();\n          console.log('trying to pause')\n        }, 30);\n      })\n\n\n    }\n\n\n    function service_submitView() {\n      // console.log('try_to_submit_view', cthis, selfClass.ajax_view_submitted);\n      if (selfClass.ajax_view_submitted === 'auto') {\n        selfClass.ajax_view_submitted = 'off';\n      }\n      if (selfClass.ajax_view_submitted === 'off') {\n\n        (ajax_submit_views.bind(selfClass))();\n      }\n    }\n\n\n  }\n}\n\n\nfunction register_dzsap_plugin() {\n  if(!window.dzsap_settings){\n    window.dzsap_settings = {};\n  }\n  (function ($) {\n\n    Math.easeIn = function (t, b, c, d) {\n      // console.log('math.easein')\n\n      return -c * (t /= d) * (t - 2) + b;\n\n    };\n\n\n    dzsapHelpers.assignHelperFunctionsToJquery($);\n\n\n    // -- define player here\n    $.fn.audioplayer = function (argOptions) {\n      var finalOptions = {};\n      var defaultOptions = Object.assign({}, require('./configs/_settingsPlayer').default_opts);\n      finalOptions = dzsapHelpers.convertPluginOptionsToFinalOptions(this, defaultOptions, argOptions);\n\n\n      // console.log('finalOptions -- ',finalOptions);\n      this.each(function () {\n        var _ap = new DzsAudioPlayer(this, finalOptions, $);\n        return this;\n      })\n    }\n\n\n    // -- defined gallery here\n    // --\n    // AUDIO GALLERY\n    // --\n\n\n    dzsapPlaylist.registerToJquery($);\n    ;\n\n  })(jQuery);\n}\n\nwindow.dzsap_singleton_ready_calls_is_called = false;\n\nwindow.dzsap_get_base_url = function () {\n\n  window.dzsap_base_url = dzsHelpers.getBaseUrl('dzsap_base_url', 'audioplayer.js');\n}\n\nfunction register_dzsap_callScriptsOnReady() {\n  jQuery(document).ready(function ($) {\n\n\n    // -- main call\n\n    if (!window.dzsap_singleton_ready_calls_is_called) {\n      dzsap_singleton_ready_calls();\n    }\n\n\n\n\n    dzsag_init('.audiogallery.auto-init', {\n      init_each: true\n    });\n\n\n    dzsapHelpers.jQueryAuxBindings($);\n\n\n  });\n\n\n}\n\n\nwindow.dzsap_currplayer_focused = null;\nwindow.dzsap_currplayer_from_share = null;\nwindow.dzsap_mouseover = false;\n\n\nwindow.dzsap_init_allPlayers = function ($) {\n\n  $('.audioplayer.auto-init,.audioplayer-tobe.auto-init').each(function () {\n    var _t2 = $(this);\n\n    if (_t2.hasClass('audioplayer-tobe') === true) {\n      if (window.dzsap_init) {\n        dzsap_init(_t2, {\n          init_each: true\n        });\n      }\n    }\n  })\n}\n\n\nasync function dzsap_jQueryInit(callback, reject) {\n\n  return new Promise((resolve, reject) => {\n\n    if (window.jQuery) {\n      resolve('jQuery loaded');\n    } else {\n      var script = document.createElement('script');\n      script.onload = function () {\n        if (window.jQuery) {\n          resolve('jQuery loaded');\n        } else {\n          reject('error loading');\n        }\n      };\n      script.src = ConstantsDzsAp.URL_JQUERY;\n\n      document.head.appendChild(script);\n    }\n\n    setTimeout(() => {\n      reject('error loading');\n    }, 15000);\n  })\n}\n\ndzsap_jQueryInit().then(() => {\n\n  register_dzsap_plugin();\n  register_dzsap_callScriptsOnReady();\n  // console.log('document.readyState - ', document.readyState);\n  jQuery(document).ready(function ($) {\n    // console.log('document.readyState - ', document.readyState);\n    window.dzsap_init_allPlayers($)\n  });\n}).catch((err) => {\n  console.log(err);\n})\n\n\nwindow.dzsap_init = function (selector, settings) {\n\n  //console.log(selector);\n  if (typeof (settings) !== \"undefined\" && typeof (settings.init_each) !== \"undefined\" && settings.init_each === true) {\n    var element_count = 0;\n    for (var e in settings) {\n      element_count++;\n    }\n    if (element_count === 1) {\n      settings = undefined;\n    }\n\n    jQuery(selector).each(function () {\n      var _t = jQuery(this);\n      if (settings && typeof (settings.call_from) === 'undefined') {\n        settings.call_from = 'dzsap_init';\n      }\n\n\n      _t.audioplayer(settings)\n    });\n  } else {\n    jQuery(selector).audioplayer(settings);\n  }\n\n  window.dzsap_lasto = settings;\n\n\n  dzsapHelpers.dzsapInitjQueryRegisters();\n};\ndzsapHelpers.playerRegisterWindowFunctions();\n","export const ConstantsDzsAp = {\n  PLAYLIST_TRANSITION_DURATION: 300,\n  'DEBUG_STYLE_1' : 'background-color: #aaa022; color: #222222;',\n  'DEBUG_STYLE_2' : 'background-color: #7c3b8e; color: #ffffff;',\n  'DEBUG_STYLE_3' : 'background-color: #3a696b; color: #eeeeee;',\n  'DEBUG_STYLE_ERROR' : 'background-color: #3a696b; color: #eeeeee;',\n  URL_WAVESURFER_HELPER_BACKUP : 'https://zoomthe.me/assets/dzsap-wave-generate.js',\n  WAVESURFER_MAX_TIMEOUT : 20000,\n  URL_JQUERY : 'https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js',\n  DEBUG_STYLE_PLAY_FUNCTIONS: 'background-color: #daffda; color: #222222;',\n  ERRORED_OUT_CLASS: 'errored-out',\n  ERRORED_OUT_MAX_ATTEMPTS: 5\n}\n","var default_opts = {\n  design_skin: 'skin-default',  // -- the skin of the player - can be set from the html as well,autoplay: 'off' // -- autoplay the track ( only works is cue is set to \"on\"\n  call_from: 'default', // -- call from a specific api\n  autoplay_on_scrub_click: 'off',  // -- autoplay the track ( only works is cue is set to \"on\"\n  cueMedia: 'on', // -- this chooses wheter \"on\" or not \"off\" a part .. what part is decided by the preload_method below\n  preload_method: 'metadata',  // -- \"none\" or \"metadata\" or \"auto\" ( whole track )\n  loop: 'off',  // -- loop the track\n  pause_method: 'pause',  // -- loop the track\n  // -- extra HTML\n  settings_extrahtml: '',  // -- some extra html - can be rates, plays, likes\n  settings_extrahtml_before_play_pause: '',  // -- some extra html that you may want before play button\n  settings_extrahtml_after_play_pause: '',  // -- some extra html that you may want after play button\n\n  settings_trigger_resize: '0',  // -- check the player dimensions every x milli seconds\n  design_thumbh: \"default\",  // -- thumbnail size\n  extra_classes_player: '',\n  disable_volume: 'default',\n  disable_scrub: 'default'\n  , disable_timer: 'default' // -- disable timer display\n  , disable_player_navigation: 'off'\n  , scrub_show_scrub_time: 'on'\n  , player_navigation: 'default' // -- auto decide if we need player navigation\n  , type: 'audio'\n  , enable_embed_button: 'off' // -- enable the embed button\n  , embed_code: '' // -- embed code\n  , skinwave_dynamicwaves: 'off' // -- dynamic scale based on volume for no spectrum wave\n  , soundcloud_apikey: '',  // -- set the sound cloud api key\n  skinwave_enableSpectrum: 'off' // -- off or on\n  , skinwave_place_thumb_after_volume: 'off' // -- place the thumbnail after volume button\n  , skinwave_place_metaartist_after_volume: 'off' // -- place metaartist after volume button\n  , skinwave_spectrummultiplier: '1' // -- (deprecated) number\n  , php_retriever: 'soundcloudretriever.php' // -- the soundcloud php file used to render soundcloud files\n  , skinwave_mode: 'normal' // -- \"normal\" or \"small\" or \"alternate\"\n  , skinwave_wave_mode: 'canvas' // -- \"normal\" or \"canvas\" or \"line\"\n  , skinwave_wave_mode_canvas_mode: 'normal' // -- \"normal\" or \"reflecto\"\n  , skinwave_wave_mode_canvas_normalize: 'on' // -- normalize wave to look more natural\n\n  // -- wave settings\n  , skinwave_wave_mode_canvas_waves_number: '3' // -- the number of waves in the canvas ( \"1\" pixel waves, \"2\" 2 pixel width waves, \"3\" 3 pixel width waves, \"anything more then 3\" means number of waves in the container, for example 100 means 100 waves in 1000px container if the container is 1000px width )\n  , skinwave_wave_mode_canvas_waves_padding: '1' // -- padding between waves ( \"1\" 1 pixel between < - > \"0\" no reflection )\n  , skinwave_wave_mode_canvas_reflection_size: '0.25' // -- the reflection size ( \"1\" full size < - > \"0\" no reflection )\n  , wavesurfer_pcm_length: '200',  // -- define the precision of the wave generation; higher is more precise, but occupies more space\n\n  pcm_data_try_to_generate: 'on',  // -- try to find out the pcm data and sent it via ajax ( maybe send it via php_handler\n  pcm_data_try_to_generate_wait_for_real_pcm: 'on',  // -- if set to on, the fake pcm data will not be generated\n  pcm_notice: 'off',  // -- show a notice for pcm\n  notice_no_media: 'on',  // -- show a notice for when the media errors out\n\n  sampleTimesMode: 'realPrevivew', // -- \"realPreview\" or \"pseudoPreview\"\n  mobile_delete: \"off\",  // -- delete the whole player on mobile, useful for unwanted footer players in mobile\n  footer_btn_playlist: \"off\",  // -- construct inner player playlist\n  mobile_disable_fakeplayer: \"off\",  // -- disable feeding to other players on mobile\n  skinwave_comments_displayontime: 'on', // -- display the comment when the scrub header is over it\n  skinwave_comments_allow_post_if_not_logged_in: 'on', // -- allow posting in comments section if not looged in, to be logged in, skinwave_comments_account must be an account id\n\n  skinwave_comments_links_to: '',  // -- clicking the comments bar will lead to this link ( optional )\n  skinwave_comments_enable: 'off',  // -- enable the comments, publisher.php must be in the same folder as this html\n  skinwave_comments_mode_outer_selector: '',  // -- the outer selector if it has one\n  skinwave_comments_playerid: '',\n\n  skinwave_timer_static: 'off',  // -- Timer indicators are static\n  default_volume: 'default',  // -- number / set the default volume 0-1 or \"last\" for the last known volume\n  volume_from_gallery: '' // -- the volume set from the gallery item select, leave blank if the player is not called from the gallery\n  , design_menu_show_player_state_button: 'off', // -- show a button that allows to hide or show the menu\n  playfrom: 'off',  // -- off or specific number of settings or set to \"last\"\n  design_animateplaypause: 'default'\n  , embedded: 'off',  // // -- if embedded in a iframe\n  embedded_iframe_id: '', // // -- if embedded in a iframe, specify the iframe id here\n  google_analytics_send_play_event: 'off' // -- send the play event to google analytics, you need to have google analytics script already on your page\n  , fakeplayer: null // -- if this is a fake player, it will feed\n  , failsafe_repair_media_element: '' // -- some scripts might effect the media element used by zoomsounds, this is how we replace the media element in a certain time\n  , action_audio_play: null // -- set a outer play function ( for example for tracking your analytics )\n  , action_audio_play2: null // -- set a outer play function ( for example for tracking your analytics )\n  , action_audio_pause: null // -- set a outer play function ( for example for tracking your analytics )\n  , action_audio_end: null // -- set a outer ended function ( for example for tracking your analytics )\n  , action_audio_comment: null // -- set a outer commented function ( for example for tracking your analytics )\n  , action_received_time_total: null // -- event triggers at receiving time total\n  , action_audio_change_media: null,  // -- set a outer on change track function\n  action_audio_loaded_metadata: null,  // -- set a outer commented function ( for example for tracking your analytics )\n  action_video_contor_60secs: null,  // -- fire every 30s\n  type_audio_stop_buffer_on_unfocus: 'off',  // -- if set to on, when the audio player goes out of focus, it will unbuffer the file so that it will not load anymore, useful if you want to stop buffer on large files\n\n\n  settings_exclude_from_list: 'off',  // -- a audioplayer list is formed at runtime so that when\n  design_wave_color_bg: '222222',  // -- waveform background color..  000000,ffffff gradient is allowed\n  design_wave_color_progress: 'ea8c52', // -- waveform progress color\n\n\n  skin_minimal_button_size: '100',\n  gallery_gapless_play: 'off', // -- play without pause\n  preview_on_hover: 'off',  // -- on mouseenter autoplay the track\n  controls_external_scrubbar: '',  // -- on mouseenter autoplay the track\n  parentgallery: null, // -- the parent gallery of the player\n  scrubbar_type: 'auto', // -- \"wave\" or \"spectrum\" or \"bar\"\n\n  settings_php_handler: '', // -- the path of the publisher.php file, this is used to handle comments, likes etc. - can be \"wpdefault\"\n};\nexports.default_opts = default_opts;\n\n// settings_extrahtml -- for plays use <div class=\"dzsap-counter counter-hits\"><i class=\"fa fa-play\"></i><span class=\"the-number\">{{get_plays}}</span></div>\n","exports.default_opts = {\n  design_skin: 'skin-default', // -- \"skin-default\" or \"skin-aura\" or \"skin-wave\"\n  cueFirstMedia: 'on', // -- preload the mp3 to the first item\n  autoplay: 'off', // -- autoplay the first item\n  autoplayNext: 'on', // -- autoplay items after the first item\n  settings_enable_linking: 'off',  // -- use html5 history to remember last position in the gallery\n\n  design_menu_position: 'bottom',\n  navigation_method: 'mouseover', // -- 'mouseover', 'full', 'legacyscroll' or 'dzsscroll'\n  design_menu_state: 'open',  // -- options are \"open\" or \"closed\", this sets the initial state of the menu, even if the initial state is \"closed\", it can still be opened by a button if you set design_menu_show_player_state_button to \"on\"\n  design_menu_show_player_state_button: 'off',  // -- show a button that allows to hide or show the menu\n  design_menu_width: 'default',\n  design_menu_height: 'default',\n  design_menu_space: 'default',\n  settings_php_handler: '', // -- link to publisher.php ( auto assigned in wordpress to admin-ajax.php )\n  design_menuitem_width: 'default',\n  design_menuitem_height: 'default',\n  design_menuitem_space: 'default',\n\n  disable_menu_navigation: 'off',\n  loop_playlist: 'on'\n  , menu_facebook_share: 'auto' // -- mousemove or scroller or all\n  , enable_easing: 'off' // -- enable easing for menu animation\n  , settings_ap: 'default' // -- string or array\n  , playlistTransition: 'fade' // -- fade or direct\n  , embedded: 'off'\n  , mode_showall_layout: 'one-per-row' // or \"two-per-row\" or \"three-per-row\"\n  , settings_mode: 'mode-normal' // -- mode-normal or mode-showall\n  , settings_mode_showall_show_number: 'on' // mode-normal or mode-showall\n  , mode_normal_video_mode: 'auto' // -- auto or \"one\" ( only one audio player )\n\n};\n\n","exports.decode_json = function (arg) {\n  var fout = {};\n\n  if (arg) {\n\n    try {\n\n      fout = JSON.parse(arg);\n    } catch (err) {\n      console.log(err, arg);\n      return null;\n    }\n  }\n\n  return fout;\n}\n\nexports.loadScriptIfItDoesNotExist = (scriptSrc, checkForVar) => {\n  return new Promise((resolve, reject) => {\n    // console.log({checkForVar})\n    if (checkForVar) {\n      resolve('loadfromvar');\n      return;\n    }\n\n    var script = document.createElement('script');\n    script.onload = function () {\n      resolve('loadfromload');\n    };\n    script.onerror = function () {\n      reject();\n    };\n    script.src = scriptSrc;\n\n    document.head.appendChild(script);\n  })\n}\n\n/**\n *\n * @param {string} baseUrlVar - something like 'dzsap_base_url'\n * @param scriptName\n * @returns {string[]}\n */\nexports.getBaseUrl = (baseUrlVar, scriptName) => {\n  if (window[baseUrlVar]) {\n    // console.log('baseUrlVar')\n    return window[baseUrlVar];\n  }\n\n  let scripts = document.getElementsByTagName(\"script\");\n  for (var scriptKey in scripts) {\n    if (scripts[scriptKey] && scripts[scriptKey].src && String(scripts[scriptKey].src).indexOf(scriptName) > -1) {\n      break;\n    }\n  }\n  var baseUrl_arr = String(scripts[scriptKey].src).split('/');\n  baseUrl_arr.splice(-1, 1);\n  // console.log(baseUrl_arr);\n  const result = baseUrl_arr.join('/');\n  window[baseUrlVar] = result;\n  // console.log('getBaseUrl - ', result);\n  return result;\n}\nexports.sanitizeToCssPx = (arg) => {\n\n  if (String(arg).indexOf('%') > -1 || String(arg).indexOf('em') > -1 || String(arg).indexOf('px') > -1 || String(arg).indexOf('auto') > -1) {\n    return arg;\n  }\n  return arg + 'px';\n}\n\n/**\n *\n * @param args\n * @param args.tooltipInnerHTML {string}\n * @param args.tooltipIndicatorText {string}\n * @param args.tooltipConClass {string}\n * @returns {string}\n */\nexports.setupTooltip = (args) => {\n\n  var mainArgs = Object.assign({\n    tooltipInnerHTML: '',\n    tooltipIndicatorText: '',\n    tooltipConClass: '',\n  }, args)\n\n  return `<div class=\"dzstooltip-con ${mainArgs.tooltipConClass}\"><span class=\"dzstooltip main-tooltip   talign-end arrow-bottom style-rounded color-dark-light  dims-set transition-slidedown \" style=\"width: 280px;\"><span class=\"dzstooltip--inner\">${mainArgs.tooltipInnerHTML}</span> </span></span><span class=\"tooltip-indicator\">${mainArgs.tooltipIndicatorText}</span></div>`;\n}\n\n\nexports.isInt = function (n) {\n  return typeof n == 'number' && Math.round(n) % 1 == 0;\n}\n\nexports.isValid = function (n) {\n  return typeof n != 'undefined' && n != '';\n}\n\n\nexports.getRelativeX = function (mouseX, $el_) {\n  if (jQuery) {\n    return mouseX - jQuery($el_).offset().left;\n  }\n}\n","\nimport * as dzsapHelpers from './_dzsap_helpers';\nconst dzsHelpers = require('../js_common/_dzs_helpers');\n\nexport const ajax_submit_views = function (argp) {\n\n  // console.log('ajax_submit_views()',argp);\n\n  // console.log('this - ', this);\n  var selfClass = this;\n  var $ = jQuery;\n  var data = {\n    action: 'dzsap_submit_views',\n    postdata: 1,\n    playerid: selfClass.the_player_id,\n    currip: selfClass.currIp\n  };\n\n\n  if (selfClass.cthis.attr('data-playerid-for-views')) {\n    data.playerid = selfClass.cthis.attr('data-playerid-for-views');\n  }\n\n\n  if (data.playerid == '') {\n    data.playerid = dzsapHelpers.dzs_clean_string(selfClass.data_source);\n  }\n\n  //                console.log(ajax_view_submitted);\n\n\n  // -- submit view\n  if (selfClass.urlToAjaxHandler) {\n    $.ajax({\n      type: \"POST\",\n      url: selfClass.urlToAjaxHandler,\n      data: data,\n      success: function (response) {\n        if (typeof window.console != \"undefined\") {\n          // console.log('Got this from the server: ' + response);\n        }\n\n        // -- increase number of hits\n        var auxnr = selfClass.cthis.find('.counter-hits .the-number').html();\n        auxnr = parseInt(auxnr, 10);\n        if (selfClass.increment_views != 2) {\n          auxnr++;\n        }\n        if (response) {\n          if (dzsHelpers.decode_json(response)) {\n            auxnr = dzsHelpers.decode_json(response)['number'];\n          }\n        }\n\n        selfClass.cthis.find('.counter-hits .the-number').html(auxnr);\n\n        selfClass.ajax_view_submitted = 'on';\n      },\n      error: function (arg) {\n        if (typeof window.console != \"undefined\") {\n          // console.log('Got this from the server: ' + arg, arg);\n        }\n        ;\n\n\n        var auxlikes = selfClass.cthis.find('.counter-hits .the-number').html();\n        auxlikes = parseInt(auxlikes, 10);\n        auxlikes++;\n        selfClass.cthis.find('.counter-hits .the-number').html(auxlikes);\n\n        selfClass.ajax_view_submitted = 'on';\n      }\n    });\n    selfClass.ajax_view_submitted = 'on';\n  }\n\n}\n\n\n// export const ajax_submit_like = function (argp, playerid, pargs) {\n\n// -- from gallery -- todo:replace with universal form!!\n\n//only handles ajax call + result\n\n\n// var selfClass = this;\n// var $ = jQuery;\n//\n//\n// var mainarg = argp;\n// var data = {\n//   action: 'dzsap_submit_like',\n//   postdata: mainarg,\n//   playerid: playerid\n// };\n//\n// var margs = {\n//   refferer: null\n// }\n//\n// if (pargs) {\n//   margs = $.extend(margs, pargs);\n// }\n//\n// //console.log(margs,pargs,o.settings_php_handler);\n//\n//\n// if (selfClass.urlToAjaxHandler) {\n//\n//   $.ajax({\n//     type: \"POST\",\n//     url: selfClass.urlToAjaxHandler,\n//     data: data,\n//     success: function (response) {\n//       if (typeof window.console != \"undefined\") {\n//         // console.log('Got this from the server: ' + response);\n//       }\n//\n//       if (margs.refferer) {\n//         margs.refferer.addClass('active');\n//       }\n//     },\n//     error: function (arg) {\n//       if (typeof window.console != \"undefined\") {\n//         // console.log('Got this from the server: ' + arg, arg);\n//       }\n//       ;\n//     }\n//   });\n// }\n// }\n\n\nexport const ajax_submit_like = function (argp) {\n  var selfClass = this;\n  var $ = jQuery;\n\n  //only handles ajax call + result\n  var mainarg = argp;\n  var data = {\n    action: 'dzsap_submit_like',\n    postdata: mainarg,\n    playerid: selfClass.the_player_id\n  };\n\n\n  selfClass.cthis.find('.btn-like').addClass('disabled');\n\n  if (selfClass.urlToAjaxHandler || selfClass.cthis.hasClass('is-preview')) {\n\n    $.ajax({\n      type: \"POST\",\n      url: selfClass.urlToAjaxHandler,\n      data: data,\n      success: function (response) {\n        if (typeof window.console != \"undefined\") {\n          // console.log('Got this from the server: ' + response);\n        }\n\n        selfClass.cthis.find('.btn-like').addClass('active');\n        selfClass.cthis.find('.btn-like').removeClass('disabled');\n        var auxlikes = selfClass.cthis.find('.counter-likes .the-number').html();\n        auxlikes = parseInt(auxlikes, 10);\n        auxlikes++;\n        selfClass.cthis.find('.counter-likes .the-number').html(auxlikes);\n      },\n      error: function (arg) {\n        if (typeof window.console != \"undefined\") {\n          // console.log('Got this from the server: ' + arg, arg);\n        }\n        ;\n\n\n        selfClass.cthis.find('.btn-like').addClass('active');\n        selfClass.cthis.find('.btn-like').removeClass('disabled');\n        var auxlikes = selfClass.cthis.find('.counter-likes .the-number').html();\n        auxlikes = parseInt(auxlikes, 10);\n        auxlikes++;\n        selfClass.cthis.find('.counter-likes .the-number').html(auxlikes);\n      }\n    });\n  }\n}\n\nexport const ajax_retract_like = function (argp) {\n  var selfClass = this;\n  var $ = jQuery;\n\n  //only handles ajax call + result\n  var mainarg = argp;\n  var data = {\n    action: 'dzsap_retract_like',\n    postdata: mainarg,\n    playerid: selfClass.the_player_id\n  };\n\n  selfClass.cthis.find('.btn-like').addClass('disabled');\n\n\n  if (selfClass.urlToAjaxHandler) {\n    $.ajax({\n      type: \"POST\",\n      url: selfClass.urlToAjaxHandler,\n      data: data,\n      success: function (response) {\n        if (typeof window.console != \"undefined\") {\n          // console.log('Got this from the server: ' + response);\n        }\n\n        selfClass.cthis.find('.btn-like').removeClass('active');\n        selfClass.cthis.find('.btn-like').removeClass('disabled');\n        var auxlikes = selfClass.cthis.find('.counter-likes .the-number').html();\n        auxlikes = parseInt(auxlikes, 10);\n        auxlikes--;\n        selfClass.cthis.find('.counter-likes .the-number').html(auxlikes);\n      },\n      error: function (arg) {\n        if (typeof window.console != \"undefined\") {\n          // console.log('Got this from the server: ' + arg, arg);\n        }\n        ;\n\n        selfClass.cthis.find('.btn-like').removeClass('active');\n        selfClass.cthis.find('.btn-like').removeClass('disabled');\n        var auxlikes = selfClass.cthis.find('.counter-likes .the-number').html();\n        auxlikes = parseInt(auxlikes, 10);\n        auxlikes--;\n        selfClass.cthis.find('.counter-likes .the-number').html(auxlikes);\n      }\n    });\n  }\n}\n\n\nexport const ajax_comment_publish = function (argp) {\n  // -- only handles ajax call + result\n  var selfClass = this;\n  var $ = jQuery;\n  var o = selfClass.initOptions;\n\n  console.log(' o - ', o, selfClass);\n\n  var mainarg = argp;\n  var data = {\n    action: 'dzsap_front_submitcomment',\n    postdata: mainarg,\n    playerid: selfClass.the_player_id,\n    comm_position: selfClass.commentPositionPerc,\n  };\n\n  if (window.dzsap_settings) {\n    data.skinwave_comments_avatar = window.dzsap_settings.comments_avatar;\n    data.skinwave_comments_account = window.dzsap_settings.comments_username;\n  }\n\n  if (selfClass.cthis.find('*[name=comment-email]').length > 0) {\n    data.email = selfClass.cthis.find('*[name=comment-email]').eq(0).val();\n  }\n\n\n  if (selfClass.urlToAjaxHandler) {\n    jQuery.ajax({\n      type: \"POST\",\n      url: selfClass.urlToAjaxHandler,\n      data: data,\n      success: function (response) {\n        if (response.charAt(response.length - 1) == '0') {\n          response = response.slice(0, response.length - 1);\n        }\n        if (typeof window.console != \"undefined\") {\n          // console.log('Got this from the server: ' + response);\n        }\n\n        //console.log(data.postdata);\n\n\n        var aux = '';\n\n        // -- process php\n        aux = '';\n        aux += '<span class=\"dzstooltip-con\" style=\"left:' + selfClass.commentPositionPerc + '\"><span class=\"dzstooltip arrow-from-start transition-slidein arrow-bottom skin-black\" style=\"width: 250px;\"><span class=\"the-comment-author\">@' + window.dzsap_settings.comments_username + '</span> says:<br>';\n        aux += dzsapHelpers.htmlEncode(data.postdata);\n\n\n        aux += '</span><div class=\"the-avatar\" style=\"background-image: url(' + window.dzsap_settings.comments_avatar + ')\"></div></span>';\n\n\n        // console.log(aux);\n        // selfClass._commentsHolder.append(aux);\n\n        selfClass._commentsHolder.children().each(function () {\n          var _t2 = $(this);\n\n          if (_t2.hasClass('dzstooltip-con') == false) {\n            _t2.addClass('dzstooltip-con');\n          }\n        })\n\n        selfClass._commentsHolder.append(aux);\n\n\n        if (selfClass.action_audio_comment) {\n          selfClass.action_audio_comment(selfClass.cthis, aux);\n        }\n\n\n        //jQuery('#save-ajax-loading').css('visibility', 'hidden');\n      },\n      error: function (arg) {\n        if (typeof window.console != \"undefined\") {\n          // console.log('Got this from the server: ' + arg, arg);\n        }\n        ;\n        selfClass._commentsHolder.append(data.postdata);\n      }\n    });\n  }\n}\n\n\nexport const ajax_submit_total_time = function (selfClass) {\n\n  const isTheNeedToSendTotalTime = () => {\n    // debugger;\n    return !selfClass.cthis.attr('data-sample_time_total') || (selfClass.cthis.attr('data-sample_time_total') && selfClass.timeModel.getActualTotalTime() &&  selfClass.timeModel.getActualTotalTime() != selfClass.cthis.attr('data-sample_time_total') && !selfClass.cthis.attr('data-sample_time_end'));\n  }\n\n  if (!selfClass.isSentCacheTotalTime) {\n    if (isTheNeedToSendTotalTime()) {\n      if (selfClass.initOptions.action_received_time_total) {\n        // console.log('drawTotalTime selfClass.cthis - ', selfClass.cthis);\n        selfClass.timeModel.refreshTimes();\n        selfClass.initOptions.action_received_time_total(selfClass.timeModel.getActualTotalTime(), selfClass.cthis);\n      }\n    }\n    selfClass.isSentCacheTotalTime = true;\n  }\n}\n\n\nexport const ajax_submit_download = function (argp) {\n  //only handles ajax call + result\n  var mainarg = argp;\n  var selfClass = this;\n  var data = {\n    action: 'dzsap_submit_download',\n    postdata: mainarg,\n    playerid: selfClass.the_player_id\n  };\n\n  if (selfClass.starrating_alreadyrated > -1) {\n    return;\n  }\n\n  if (selfClass.urlToAjaxHandler) {\n\n    jQuery.ajax({\n      type: \"POST\",\n      url: selfClass.urlToAjaxHandler,\n      data: data,\n      success: function (response) {\n        // console.log('Got this from the server: ' + response);\n\n\n      },\n      error: function (arg) {\n        // console.log('Got this from the server: ' + arg, arg);\n\n\n      }\n    });\n  }\n};\n\n","const dzsapSvgs = require('./_dzsap_svgs');\nconst dzsHelpers = require('../js_common/_dzs_helpers');\n\nexport const dzsap_generate_keyboard_controls = function () {\n  var keyboard_controls = {\n    'play_trigger_step_back': 'off'\n    , 'step_back_amount': '5'\n    , 'step_back': '37'\n    , 'step_forward': '39'\n    , 'sync_players_goto_next': ''\n    , 'sync_players_goto_prev': ''\n    , 'pause_play': '32'\n    , 'show_tooltips': 'off'\n  }\n\n\n  if (window.dzsap_keyboard_controls) {\n    // console.log('keyboard_controls - ',keyboard_controls);\n    // console.log('window.dzsap_keyboard_controls - ',window.dzsap_keyboard_controls);\n    keyboard_controls = jQuery.extend(keyboard_controls, window.dzsap_keyboard_controls);\n  }\n\n  keyboard_controls.step_back_amount = Number(keyboard_controls.step_back_amount);\n  // for (let lab in keyboard_controls) {\n  //   keyboard_controls[lab] = Number(keyboard_controls[lab]);\n  // }\n\n  return keyboard_controls;\n};\n\n\nexport function formatTime(arg) {\n  //formats the time\n  var s = Math.round(arg);\n  var m = 0;\n  var h = 0;\n  if (s > 0) {\n    while (s > 3599 && s < 3000000 && isFinite(s)) {\n      h++;\n      s -= 3600;\n    }\n    while (s > 59 && s < 3000000 && isFinite(s)) {\n      m++;\n      s -= 60;\n    }\n    if (h) {\n\n      return String((h < 10 ? \"0\" : \"\") + h + \":\" + String((m < 10 ? \"0\" : \"\") + m + \":\" + (s < 10 ? \"0\" : \"\") + s));\n    }\n    return String((m < 10 ? \"0\" : \"\") + m + \":\" + (s < 10 ? \"0\" : \"\") + s);\n  } else {\n    return \"00:00\";\n  }\n}\n\nexport function can_history_api() {\n  return !!(window.history && history.pushState);\n}\n\nexport function dzs_clean_string(arg) {\n\n  if (arg) {\n\n    arg = arg.replace(/[^A-Za-z0-9\\-]/g, '');\n    //console.log(arg);\n    arg = arg.replace(/\\./g, '');\n    return arg;\n  }\n\n  return '';\n\n\n  //console.log(arg);\n\n\n}\n\n\nexport function get_query_arg(purl, key) {\n  if (purl) {\n    // console.log('purl - ',purl);\n    if (String(purl).indexOf(key + '=') > -1) {\n      //faconsole.log('testtt');\n      var regexS = \"[?&]\" + key + \"=.+\";\n      var regex = new RegExp(regexS);\n      var regtest = regex.exec(purl);\n      //console.log(regtest);\n\n      if (regtest != null) {\n        var splitterS = regtest[0];\n        if (splitterS.indexOf('&') > -1) {\n          var aux = splitterS.split('&');\n          splitterS = aux[1];\n        }\n        //console.log(splitterS);\n        var splitter = splitterS.split('=');\n        //console.log(splitter[1]);\n        //var tempNr = ;\n\n        return splitter[1];\n\n      }\n      //$('.zoombox').eq\n    }\n\n  } else {\n    console.log('purl not found - ', purl);\n  }\n}\n\nexport function add_query_arg(purl, key, value) {\n  // -- key and value must be unescaped for uri\n  key = encodeURIComponent(key);\n  value = encodeURIComponent(value);\n\n  if (!(purl)) {\n    purl = '';\n  }\n  var s = purl;\n  var pair = key + \"=\" + value;\n\n  var r = new RegExp(\"(&|\\\\?)\" + key + \"=[^\\&]*\");\n\n  s = s.replace(r, \"$1\" + pair);\n  //console.log(s, pair);\n  if (s.indexOf(key + '=') > -1) {\n\n\n  } else {\n    if (s.indexOf('?') > -1) {\n      s += '&' + pair;\n    } else {\n      s += '?' + pair;\n    }\n  }\n  //if(!RegExp.$1) {s += (s.length>0 ? '&' : '?') + kvp;};\n\n\n  //if value NaN we remove this field from the url\n  if (value === 'NaN') {\n    var regex_attr = new RegExp('[\\?|\\&]' + key + '=' + value);\n    s = s.replace(regex_attr, '');\n\n\n    if (s.indexOf('?') === -1 && s.indexOf('&') > -1) {\n      s = s.replace('&', '?');\n    }\n  }\n\n  return s;\n}\n\n\nexport function dzsap_is_mobile() {\n\n  // return true;\n  return is_ios() || is_android_good();\n}\n\nexport function is_ie() {\n  return !!window.MSInputMethodContext && !!document.documentMode;\n}\n\nexport function is_ios() {\n  // return true;\n  return ((navigator.platform.indexOf(\"iPhone\") !== -1) || (navigator.platform.indexOf(\"iPod\") !== -1) || (navigator.platform.indexOf(\"iPad\") !== -1));\n}\n\n\nexport function can_canvas() {\n  // check if we have canvas support\n  var oCanvas = document.createElement(\"canvas\");\n  if (oCanvas.getContext(\"2d\")) {\n    return true;\n  }\n  return false;\n}\n\nexport function is_safari() {\n  return Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n}\n\n\nexport function is_android() {\n  return is_android_good();\n}\n\nexport function select_all(el) {\n  if (typeof window.getSelection !== \"undefined\" && typeof document.createRange !== \"undefined\") {\n    var range = document.createRange();\n    range.selectNodeContents(el);\n    var sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(range);\n  } else if (typeof document.selection !== \"undefined\" && typeof document.body.createTextRange !== \"undefined\") {\n    var textRange = document.body.createTextRange();\n    textRange.moveToElementText(el);\n    textRange.select();\n  }\n}\n\nexport function is_android_good() {\n  //return false;\n  //return true;\n  var ua = navigator.userAgent.toLowerCase();\n\n  //console.log('ua - ',ua);\n  return (ua.indexOf(\"android\") > -1);\n}\n\nexport function htmlEncode(arg) {\n  return jQuery('<div/>').text(arg).html();\n}\n\nexport function dzsap_generate_keyboard_tooltip(keyboard_controls, lab) {\n\n\n  // console.log('keyboard_controls - ',keyboard_controls,lab,keyboard_controls.lab);\n  var structureDzsTooltipCommentAfterSubmit = '<span class=\"dzstooltip color-dark-light talign-start transition-slidein arrow-bottom style-default\" style=\"width: auto;  white-space:nowrap;\"><span class=\"dzstooltip--inner\">' + 'Shortcut' + ': ' + keyboard_controls[lab] + '</span></span>';\n  // left: 5px;\n  structureDzsTooltipCommentAfterSubmit = structureDzsTooltipCommentAfterSubmit.replace('32', 'space');\n  structureDzsTooltipCommentAfterSubmit = structureDzsTooltipCommentAfterSubmit.replace('27', 'escape');\n\n  return structureDzsTooltipCommentAfterSubmit;\n\n\n}\n\n\n/**\n *\n * @param e\n * @param {number} e.keyCode\n * @param {boolean} e.ctrlKey\n * @returns {boolean}\n */\nexport function handle_keypresses(e) {\n\n  // -- local .. step back / step forward\n  // console.log('handle_keypresses()', {e});\n\n  /**\n   *\n   * @param {string} checkKeyCode\n   * @returns {boolean}\n   */\n  function isKeyPressed(checkKeyCode) {\n    let isKeyPressed = false;\n    if (checkKeyCode.indexOf('ctrl+') > -1) {\n      if (e.ctrlKey) {\n        checkKeyCode = checkKeyCode.replace('ctrl+', '');\n        if (e.keyCode === Number(checkKeyCode)) {\n          isKeyPressed = true;\n        }\n      }\n    } else {\n      if (e.keyCode === Number(checkKeyCode)) {\n        isKeyPressed = true;\n      }\n    }\n    return isKeyPressed;\n  }\n\n  var $ = jQuery;\n\n  var keyboard_controls = $.extend({}, dzsap_generate_keyboard_controls());\n  // console.log('keyboard_controls.pause_play - ',keyboard_controls.pause_play);\n  // console.log('keyboard_controls - ',keyboard_controls);\n\n  // console.log('e.keyCode - ',e.keyCode, keyboard_controls);\n\n  if (dzsap_currplayer_focused && dzsap_currplayer_focused.api_pause_media) {\n\n    if (isKeyPressed(keyboard_controls.pause_play)) {\n      if ($(dzsap_currplayer_focused).hasClass('comments-writer-active') === false) {\n        if ($(dzsap_currplayer_focused).hasClass('is-playing')) {\n          dzsap_currplayer_focused.api_pause_media();\n        } else {\n          dzsap_currplayer_focused.api_play_media();\n        }\n\n        if (window.dzsap_mouseover) {\n          e.preventDefault();\n          return false;\n        }\n      }\n    }\n\n\n    if (isKeyPressed(keyboard_controls.step_back)) {\n      dzsap_currplayer_focused.api_step_back(keyboard_controls.step_back_amount);\n    }\n\n    if (isKeyPressed(keyboard_controls.step_forward)) {\n      dzsap_currplayer_focused.api_step_forward(keyboard_controls.step_back_amount);\n    }\n\n    if (isKeyPressed(keyboard_controls.sync_players_goto_next)) {\n      if (dzsap_currplayer_focused && dzsap_currplayer_focused.api_sync_players_goto_next) {\n        dzsap_currplayer_focused.api_sync_players_goto_next();\n      }\n    }\n\n\n    if (isKeyPressed(keyboard_controls.sync_players_goto_prev)) {\n      if (dzsap_currplayer_focused && dzsap_currplayer_focused.api_sync_players_goto_prev) {\n        dzsap_currplayer_focused.api_sync_players_goto_prev();\n      }\n    }\n\n\n  }\n}\n\n\nexport function hexToRgb(hex, palpha) {\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  var str = '';\n  if (result) {\n    result = {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    };\n\n\n    var alpha = 1;\n\n    if (palpha) {\n      alpha = palpha;\n    }\n\n\n    str = 'rgba(' + result.r + ',' + result.g + ',' + result.b + ',' + alpha + ')';\n  }\n\n\n  // console.log('hexToRgb ( hex - '+hex+' ) result ', str);\n\n  return str;\n\n\n}\n\nexport function assignHelperFunctionsToJquery($) {\n\n  $.fn.prependOnce = function (arg, argfind) {\n    var _t = $(this) // It's your element\n\n\n    //        console.log(argfind);\n    if (typeof (argfind) === 'undefined') {\n      var regex = new RegExp('class=\"(.*?)\"');\n      var auxarr = regex.exec(arg);\n\n\n      if (typeof auxarr[1] !== 'undefined') {\n        argfind = '.' + auxarr[1];\n      }\n    }\n\n\n    // we compromise chaining for returning the success\n    if (_t.children(argfind).length < 1) {\n      _t.prepend(arg);\n      return true;\n    } else {\n      return false;\n    }\n  };\n  $.fn.appendOnce = function (arg, argfind) {\n    var _t = $(this) // It's your element\n\n\n    if (typeof (argfind) === 'undefined') {\n      var regex = new RegExp('class=\"(.*?)\"');\n      var auxarr = regex.exec(arg);\n\n\n      if (typeof auxarr[1] !== 'undefined') {\n        argfind = '.' + auxarr[1];\n      }\n    }\n    // we compromise chaining for returning the success\n    if (_t.children(argfind).length < 1) {\n      _t.append(arg);\n      return true;\n    } else {\n      return false;\n    }\n  };\n};\n\n\nexport function registerTextWidth($) {\n\n  $.fn.textWidth = function () {\n    var _t = jQuery(this);\n    var html_org = _t.html();\n    if (_t[0].nodeName === 'INPUT') {\n      html_org = _t.val();\n    }\n    var html_calcS = '<span class=\"forcalc\">' + html_org + '</span>';\n    jQuery('body').append(html_calcS);\n    var _lastspan = jQuery('span.forcalc').last();\n    //console.log(_lastspan, html_calc);\n    _lastspan.css({\n      'font-size': _t.css('font-size'),\n      'font-family': _t.css('font-family')\n    })\n    var width = _lastspan.width();\n    //_t.html(html_org);\n    _lastspan.remove();\n    return width;\n  };\n}\n\nexport function player_checkIfWeShouldShowAComment(selfClass, real_time_curr, real_time_total) {\n\n  var $ = jQuery;\n  var timer_curr_perc = Math.round((real_time_curr / real_time_total) * 100) / 100;\n  if (selfClass.audioType === 'fake') {\n    timer_curr_perc = Math.round((selfClass.timeCurrent / selfClass.timeTotal) * 100) / 100;\n  }\n  if (selfClass._commentsHolder) {\n    selfClass._commentsHolder.children().each(function () {\n      var _t = $(this);\n      if (_t.hasClass('dzstooltip-con')) {\n        var _t_posx = _t.offset().left - selfClass._commentsHolder.offset().left;\n\n\n        var aux = Math.round((parseFloat(_t_posx) / selfClass._commentsHolder.outerWidth()) * 100) / 100;\n\n\n        if (aux) {\n\n          if (Math.abs(aux - timer_curr_perc) < 0.02) {\n            selfClass._commentsHolder.find('.dzstooltip').removeClass('active');\n            _t.find('.dzstooltip').addClass('active');\n          } else {\n            _t.find('.dzstooltip').removeClass('active');\n          }\n        }\n      }\n    })\n  }\n}\n\n\n/**\n * return object with properties from DOM element\n * @param _sourceForChange\n * @returns {{}|*}\n */\nexport function sanitizeObjectForChangeMediaArgs(_sourceForChange) {\n\n  var changeMediaArgs = {};\n  var _feed_fakePlayer = _sourceForChange;\n\n  var lab = '';\n\n  if (_sourceForChange.data('original-settings')) {\n    return _sourceForChange.data('original-settings');\n  }\n\n  // -- settle source\n  changeMediaArgs.source = null;\n  if (_feed_fakePlayer.attr('data-source')) {\n    changeMediaArgs.source = _feed_fakePlayer.attr('data-source')\n  } else {\n    // -- if it is a inline link\n    if (_feed_fakePlayer.attr('href')) {\n      changeMediaArgs.source = _feed_fakePlayer.attr('href');\n    }\n  }\n\n  if (_feed_fakePlayer.attr('data-pcm')) {\n    changeMediaArgs.pcm = _feed_fakePlayer.attr('data-pcm');\n  }\n\n\n  lab = 'thumb';\n  if (_feed_fakePlayer.attr('data-' + lab)) {\n    changeMediaArgs[lab] = _sourceForChange.attr('data-' + lab);\n  }\n\n  lab = 'playerid';\n  if (_feed_fakePlayer.attr('data-' + lab)) {\n    changeMediaArgs[lab] = _sourceForChange.attr('data-' + lab);\n  }\n  lab = 'type';\n  if (_feed_fakePlayer.attr('data-' + lab)) {\n    changeMediaArgs[lab] = _sourceForChange.attr('data-' + lab);\n  }\n\n\n  if (_feed_fakePlayer.attr('data-thumb_link')) {\n    changeMediaArgs.thumb_link = _sourceForChange.attr('data-thumb_link');\n  }\n\n\n  if (_sourceForChange.find('.meta-artist').length > 0 || _sourceForChange.find('.meta-artist-con').length > 0) {\n\n    changeMediaArgs.artist = _sourceForChange.find('.the-artist').eq(0).html();\n    changeMediaArgs.song_name = _sourceForChange.find('.the-name').eq(0).html();\n  }\n\n\n  if (_sourceForChange.attr('data-thumb_for_parent')) {\n    changeMediaArgs.thumb = _sourceForChange.attr('data-thumb_for_parent');\n  }\n\n\n  if (_sourceForChange.find('.feed-song-name').length > 0 || _sourceForChange.find('.feed-artist-name').length > 0) {\n\n    changeMediaArgs.artist = _sourceForChange.find('.feed-artist-name').eq(0).html();\n    changeMediaArgs.song_name = _sourceForChange.find('.feed-song-name').eq(0).html();\n  }\n\n\n  return changeMediaArgs;\n}\n\n/**\n *\n * @param {string} colorString\n */\nexport function utils_sanitizeToColor(colorString) {\n  if (colorString.indexOf('#') === -1 && colorString.indexOf('rgb') === -1 && colorString.indexOf('hsl') === -1) {\n    return '#' + colorString;\n  }\n  return colorString;\n}\n\nexport function dzsapInitjQueryRegisters() {\n\n  window.dzsap_generate_list_for_sync_players = function (pargs) {\n    var $ = jQuery;\n\n    var margs = {\n      'force_regenerate': false\n\n    };\n\n    if (pargs) {\n      margs = $.extend(margs, pargs);\n    }\n    window.dzsap_syncList_players = [];\n\n\n\n    if((window.dzsap_settings.syncPlayers_buildList === 'on') || margs.force_regenerate) {\n\n      jQuery('.audioplayer,.audioplayer-tobe').each(function () {\n        var _t2 = jQuery(this);\n        if (_t2.attr('data-do-not-include-in-list') !== 'on') {\n          if (_t2.attr('data-type') !== 'fake' || _t2.attr('data-fakeplayer')) {\n            window.dzsap_syncList_players.push(_t2);\n          }\n        }\n      })\n\n      // console.log('dzsap_syncList_players -5 ',dzsap_syncList_players);\n\n    }\n  }\n\n\n  jQuery(document).off('click.dzsap_global');\n  jQuery(document).on('click.dzsap_global', '.dzsap-btn-info', function () {\n\n    var _t = jQuery(this);\n    if (_t.hasClass('dzsap-btn-info')) {\n\n      _t.find('.dzstooltip').toggleClass('active');\n      return;\n    }\n\n  })\n  jQuery(document).on('mouseover.dzsap_global', '.dzsap-btn-info', function () {\n\n    var _t = jQuery(this);\n    if (_t.hasClass('dzsap-btn-info')) {\n      // console.log(_t.offset().left);\n      if (window.innerWidth < 500) {\n        // -- if we are in the left side of the screen, we move the tooltip to the right.\n        if (_t.offset().left < (window.innerWidth / 2)) {\n          _t.find('.dzstooltip').removeClass('talign-end').addClass('talign-start');\n        }\n      } else {\n        _t.find('.dzstooltip').addClass('talign-end').removeClass('talign-start');\n      }\n    }\n\n  });\n}\n\nexport function player_radio_isNameUpdatable(selfClass, radio_update_song_name, targetKey) {\n\n  if (selfClass._metaArtistCon.find(targetKey).length && selfClass._metaArtistCon.find(targetKey).eq(0).text().length > 0) {\n    // -- we already have artist name..\n    if (selfClass._metaArtistCon.find(targetKey).eq(0).html().indexOf('{{update}}') > -1) {\n      return true;\n    }\n  }\n\n\n  return false;\n}\n\nexport function playerRegisterWindowFunctions() {\n\n\n  window.dzsap_send_total_time = function (argtime, argcthis) {\n\n\n    // console.log('dzsap_send_total_time()',argtime,argcthis);\n    if(argtime && argtime!==Infinity){\n      var data = {\n        action: 'dzsap_send_total_time_for_track'\n        , id_track: argcthis.attr('data-playerid')\n        , postdata: Math.ceil(argtime)\n      };\n      jQuery.post(window.dzsap_ajaxurl, data, function (response) {\n      });\n    }\n\n  }\n\n\n  window.dzs_open_social_link = function (arg, argthis) {\n    var leftPosition, topPosition;\n    var w = 500, h = 500;\n    //Allow for borders.\n    leftPosition = (window.screen.width / 2) - ((w / 2) + 10);\n    //Allow for title and status bars.\n    topPosition = (window.screen.height / 2) - ((h / 2) + 50);\n    var windowFeatures = \"status=no,height=\" + h + \",width=\" + w + \",resizable=yes,left=\" + leftPosition + \",top=\" + topPosition + \",screenX=\" + leftPosition + \",screenY=\" + topPosition + \",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no\";\n\n\n    // console.log('dzs_open_social_link()', arg, 'argthis - ', argthis);\n\n\n    arg = arg.replace('{{replacewithcurrurl}}', encodeURIComponent(window.location.href));\n    // console.log({argthis}, argthis.constructor);\n    if (argthis && argthis.attr) {\n      arg = arg.replace(/{{replacewithdataurl}}/g, argthis.attr('data-url'));\n    }\n\n    var aux = window.location.href;\n\n\n    var auxa = aux.split('?');\n\n    var cid = '';\n    var cid_gallery = '';\n\n\n    if (argthis) {\n\n    } else {\n      if (window.dzsap_currplayer_from_share) {\n\n        argthis = window.dzsap_currplayer_from_share;\n      }\n    }\n\n\n    // console.log('window.dzsap_currplayer_from_share -> ', window.dzsap_currplayer_from_share);\n    // console.log('argthis -> ', argthis);\n\n\n    if (argthis) {\n\n      var $ = jQuery;\n\n      if ($(argthis).hasClass('audioplayer')) {\n        cid = $(argthis).parent().children().index(argthis);\n        cid_gallery = $(argthis).parent().parent().parent().attr('id');\n      } else {\n        if (jQuery(argthis).parent().parent().attr('data-menu-index')) {\n\n          cid = jQuery(argthis).parent().parent().attr('data-menu-index');\n        }\n        if (jQuery(argthis).parent().parent().attr('data-gallery-id')) {\n\n          cid_gallery = jQuery(argthis).parent().parent().attr('data-gallery-id');\n        }\n      }\n\n    }\n\n\n    var shareurl = encodeURIComponent(auxa[0] + '?fromsharer=on&audiogallery_startitem_' + cid_gallery + '=' + cid + '');\n    arg = arg.replace('{{shareurl}}', shareurl);\n\n    // console.log('shareurl -> ', shareurl);\n\n    //console.log(argthis);\n    //console.log('arg - ',arg);\n    window.open(arg, \"sharer\", windowFeatures);\n  }\n\n\n  window.dzsap_wp_send_contor_60_secs = function (argcthis, argtitle) {\n\n    var data = {\n      video_title: argtitle\n      // ,video_analytics_id: argcthis.attr('data-analytics-id')\n      , video_analytics_id: argcthis.attr('data-playerid')\n      , curr_user: window.dzsap_curr_user\n    };\n    var theajaxurl = 'index.php?action=ajax_dzsap_submit_contor_60_secs';\n\n    if (window.dzsap_settings.dzsap_site_url) {\n\n      theajaxurl = dzsap_settings.dzsap_site_url + theajaxurl;\n    }\n\n    // console.log('dzsap_wp_send_contor_60_secs()',argcthis,argtitle);\n\n\n    jQuery.ajax({\n      type: \"POST\",\n      url: theajaxurl,\n      data: data,\n      success: function (response) {\n        if (typeof window.console != \"undefined\") {\n          // console.log('Ajax - submit view - ' + response);\n        }\n\n\n      },\n      error: function (arg) {\n        if (typeof window.console != \"undefined\") {\n          // console.warn('Got this from the server: ' + arg);\n        }\n        ;\n      }\n    });\n  }\n\n\n  /**\n   * deprecated\n   */\n  window.dzsap_init_multisharer = function () {\n    // console.log('window.dzsap_init_multisharer()');\n\n  }\n\n\n  window.dzsap_submit_like = function (argp, e) {\n    //only handles ajax call + result\n    var mainarg = argp;\n    var data = {\n      action: 'dzsap_submit_like',\n      playerid: argp\n    };\n\n    var _t = null;\n\n    if (e) {\n      _t = jQuery(e.currentTarget);\n    }\n\n\n    if (window.dzsap_settings && window.dzsap_settings.ajax_url) {\n\n      jQuery.ajax({\n        type: \"POST\",\n        url: window.dzsap_settings.ajax_url,\n        data: data,\n        success: function (response) {\n          if (typeof window.console != \"undefined\") {\n            console.log('Got this from the server: ' + response);\n          }\n\n\n          if (_t) {\n\n            var htmlaux = _t.html();\n\n            _t.html(htmlaux.replace('fa-heart-o', 'fa-heart'));\n          }\n\n        },\n        error: function (arg) {\n          if (typeof window.console != \"undefined\") {\n            // console.log('Got this from the server: ' + arg, arg);\n          }\n          ;\n        }\n      });\n    }\n  }\n\n\n  window.dzsap_retract_like = function (argp, e) {\n    //only handles ajax call + result\n    var mainarg = argp;\n    var data = {\n      action: 'dzsap_retract_like',\n      playerid: argp\n    };\n\n    var _t = null;\n\n    if (e) {\n      _t = jQuery(e.currentTarget);\n    }\n\n\n    if (window.dzsap_settings && window.dzsap_settings.ajax_url) {\n\n      jQuery.ajax({\n        type: \"POST\",\n        url: window.dzsap_settings.ajax_url,\n        data: data,\n        success: function (response) {\n          if (typeof window.console != \"undefined\") {\n            console.log('Got this from the server: ' + response);\n          }\n\n\n          if (_t) {\n            var htmlaux = _t.html();\n\n            _t.html(htmlaux.replace('fa-heart', 'fa-heart-o'));\n          }\n\n        },\n        error: function (arg) {\n          if (typeof window.console != \"undefined\") {\n            // console.log('Got this from the server: ' + arg, arg);\n          }\n          ;\n        }\n      });\n    }\n  }\n\n}\n\n\n\nexport function dzsap_singleton_ready_calls() {\n\n  window.dzsap_singleton_ready_calls_is_called = true;\n\n\n  jQuery('body').append('<style class=\"dzsap--style\"></style>');\n\n  window.dzsap__style = jQuery('.dzsap--style');\n\n\n  jQuery('audio.zoomsounds-from-audio').each(function () {\n    var _t = jQuery(this);\n    _t.after('<div class=\"audioplayer-tobe auto-init skin-silver\" data-source=\"' + _t.attr('src') + '\"></div>');\n    _t.remove();\n  })\n  // -- remove focus on input focus\n  jQuery(document).on('focus.dzsap', 'input', function () {\n    // console.log(\"FOCUS - \");\n    window.dzsap_currplayer_focused = null;\n  })\n  registerTextWidth(jQuery);\n}\n\nexport function jQueryAuxBindings($) {\n\n  // console.log('start aux bindings');\n\n  /**\n   *\n   * @param {Event} e\n   * @returns {boolean}\n   */\n  function handleClick_onGlobalZoomSoundsButton(e) {\n    var $t = $(this);\n\n    console.log('$t - ', $t);\n    e.preventDefault();\n    e.stopPropagation();\n    e.stopImmediatePropagation();\n\n    if ($t.hasClass('dzsap-syncPlayers-autoplay-toggler')) {\n\n\n\n    }\n    if ($t.hasClass('audioplayer-song-changer')) {\n\n\n      // console.log('.audioplayer-song-changer', _t);\n      var _c = $($t.attr('data-fakeplayer')).eq(0);\n      // console.log($t, $t.attr('data-fakeplayer'), $t.attr('data-target'), _c, _c.get(0));\n\n\n      if (_c && _c.get(0) && _c.get(0).api_change_media) {\n        _c.get(0).api_change_media($t, {\n          'feeder_type': 'button'\n          , 'call_from': 'changed audioplayer-song-changer'\n        });\n      }\n\n      return false;\n    }\n\n    if ($t.hasClass('dzsap-wishlist-but')) {\n\n\n      var data = {\n        action: 'dzsap_add_to_wishlist',\n        playerid: $t.attr('data-post_id'),\n        wishlist_action: 'add',\n      };\n\n\n      if ($t.find('.svg-icon').hasClass('fa-star')) {\n        data.wishlist_action = 'remove';\n      }\n\n\n      if (window.dzsap_lasto.settings_php_handler) {\n        $.ajax({\n          type: \"POST\",\n          url: window.dzsap_lasto.settings_php_handler,\n          data: data,\n          success: function (response) {\n            //if(typeof window.console != \"undefined\" ){ console.log('Ajax - get - comments - ' + response); }\n\n\n            if ($t.find('.svg-icon').hasClass('fa-star-o')) {\n              $t.find('.svg-icon').eq(0).attr('class', 'svg-icon fa fa-star');\n            } else {\n\n              $t.find('.svg-icon').eq(0).attr('class', 'svg-icon fa fa-star-o');\n            }\n\n          },\n          error: function (arg) {\n            if (typeof window.console != \"undefined\") {\n              // console.log('Got this from the server: ' + arg, arg);\n            }\n            ;\n          }\n        });\n      }\n\n      return false;\n\n\n    }\n\n  }\n\n\n  $(document).off('click.dzsap_metas')\n  $(document).on('click.dzsap_metas', '.audioplayer-song-changer, .dzsap-wishlist-but', handleClick_onGlobalZoomSoundsButton)\n\n\n\n\n\n  if ($('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-silver').length > 0) {\n    setInterval(function () {\n\n      //console.log($('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-silver > .audioplayer').eq(0).hasClass('dzsap-loaded'));\n      if ($('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-silver  .audioplayer').eq(0).hasClass('dzsap-loaded')) {\n        $('.dzsap-sticktobottom-placeholder').eq(0).addClass('active');\n\n        if ($('.dzsap-sticktobottom').hasClass('audioplayer-was-loaded') === false) {\n\n          $('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-silver').addClass('audioplayer-loaded')\n        }\n      }\n    }, 1000);\n  }\n\n\n  if ($('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-wave').length > 0) {\n    setInterval(function () {\n\n      // console.log($('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-wave  .audioplayer'), $('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-wave  .audioplayer').eq(0).hasClass('dzsap-loaded'));\n      if ($('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-wave  .audioplayer').eq(0).hasClass('dzsap-loaded')) {\n        $('.dzsap-sticktobottom-placeholder').eq(0).addClass('active');\n\n        if ($('.dzsap-sticktobottom').hasClass('audioplayer-was-loaded') === false) {\n\n          $('.dzsap-sticktobottom.dzsap-sticktobottom-for-skin-wave').addClass('audioplayer-loaded')\n        }\n      }\n\n\n    }, 1000);\n  }\n\n\n\n\n\n\n\n  // console.log('init here auxBindings');\n  $(document).on('keydown.dzsapkeyup keypress.dzsapkeyup', function (e) {\n    // console.log('e - ',e);\n    // console.log('dzsap_currplayer_focused - ',dzsap_currplayer_focused);\n\n    handle_keypresses(e);\n  })\n\n\n  $(document).on('keydown blur', '.zoomsounds-search-field', function (e) {\n\n    // console.info(e.currentTarget.value);\n    var _t = $(e.currentTarget);\n\n    setTimeout(function () {\n\n      if (_t) {\n        var _target = $('.audiogallery').eq(0);\n        if (_t.attr('data-target')) {\n          _target = $(_t.attr('data-target'));\n        }\n        if (_target.get(0) && _target.get(0).api_filter) {\n          _target.get(0).api_filter('title', _t.val());\n        }\n      }\n    }, 100);\n\n  });\n\n\n  $(document).on('click', '.dzsap-like-but', function (e) {\n\n    var _t = $(this);\n\n\n    var playerid = _t.attr('data-post_id');\n\n    if (playerid && playerid != '0') {\n\n    } else {\n      if (_t.parent().parent().parent().parent().parent().hasClass('audioplayer')) {\n\n        playerid = _t.parent().parent().parent().parent().parent().attr('data-feed-playerid');\n      }\n    }\n    window.dzsap_submit_like(playerid, e);\n\n    _t.removeClass('dzsap-like-but').addClass('dzsap-retract-like-but');\n\n    return false;\n  })\n\n  $(document).on('click', '.dzsap-retract-like-but', function (e) {\n\n    var _t = $(this);\n    var playerid = _t.attr('data-post_id');\n\n    if (playerid && playerid != '0') {\n\n    } else {\n      if (_t.parent().parent().parent().parent().parent().hasClass('audioplayer')) {\n\n        playerid = _t.parent().parent().parent().parent().parent().attr('data-feed-playerid');\n      }\n    }\n\n\n    window.dzsap_retract_like(playerid, e);\n    _t.addClass('dzsap-like-but').removeClass('dzsap-retract-like-but');\n    return false;\n  })\n\n\n}\n\n\nexport function selectText(arg) {\n\n  if (document.selection) {\n    var range = document.body.createTextRange();\n    range.moveToElementText(arg);\n    range.select();\n  } else if (window.getSelection) {\n    var range = document.createRange();\n    range.selectNode(arg);\n    window.getSelection().removeAllRanges();\n    window.getSelection().addRange(range);\n  }\n}\n\n\n\n\nexport function view_player_playMiscEffects(selfClass) {\n\n  selfClass.$conPlayPause.addClass('playing');\n\n  if (selfClass.cthis.parent().hasClass('zoomsounds-wrapper-bg-center')) {\n    selfClass.cthis.parent().addClass('is-playing');\n  }\n}\n\n/**\n * syncPlayers\n * @param selfClass\n */\nexport function view_player_globalDetermineSyncPlayersIndex(selfClass) {\n\n  if (selfClass._sourcePlayer === null && window.dzsap_syncList_players) {\n    window.dzsap_syncList_players.forEach(($syncPlayer, index) => {\n      if (selfClass.cthis.attr('data-playerid') == $syncPlayer.attr('data-playerid')) {\n        window.dzsap_syncList_index = index;\n      }\n    })\n  }\n}\n\n/**\n * add classes\n * @param selfClass\n */\nexport function player_view_addMetaLoaded(selfClass) {\n\n  selfClass.cthis.addClass('meta-loaded');\n  selfClass.cthis.removeClass('meta-fake');\n  if (selfClass._sourcePlayer) {\n    selfClass._sourcePlayer.addClass('meta-loaded');\n    selfClass._sourcePlayer.removeClass('meta-fake');\n  }\n  if (selfClass.$totalTime) {\n    // console.log('formatTime(selfClass.timeModel.getVisualTotalTime()) - ', formatTime(selfClass.timeModel.getVisualTotalTime()), selfClass.$mediaNode_.duration);\n    selfClass.timeModel.refreshTimes();\n    selfClass.$totalTime.html(formatTime(selfClass.timeModel.getVisualTotalTime()));\n  }\n  if (selfClass._sourcePlayer) {\n    selfClass._sourcePlayer.addClass('meta-loaded');\n  }\n}\n\n\nexport function player_determineActualPlayer(selfClass) {\n\n  var $ = jQuery;\n  var $fakePlayer = $(selfClass.cthis.attr('data-fakeplayer'));\n\n  // console.log({$fakePlayer});\n  if ($fakePlayer.length === 0) {\n    $fakePlayer = $(String(selfClass.cthis.attr('data-fakeplayer')).replace('#', '.'));\n    if ($fakePlayer.length) {\n      selfClass._actualPlayer = $(String(selfClass.cthis.attr('data-fakeplayer')).replace('#', '.'));\n      selfClass.cthis.attr('data-fakeplayer', String(selfClass.cthis.attr('data-fakeplayer')).replace('#', '.'));\n    }\n  }\n\n  if ($fakePlayer.length === 0) {\n    selfClass.cthis.attr('data-fakeplayer', '');\n  } else {\n    selfClass.cthis.addClass('player-is-feeding is-source-player-for-actual-player');\n    if (selfClass.cthis.attr('data-type')) {\n\n      selfClass._actualPlayer = $(selfClass.cthis.attr('data-fakeplayer')).eq(0);\n      selfClass.actualDataTypeOfMedia = selfClass.cthis.attr('data-type');\n      selfClass.cthis.attr('data-original-type', selfClass.actualDataTypeOfMedia);\n    }\n  }\n}\n\nfunction htmlEntities(str) {\n  return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\n\nexport function waitForScriptToBeAvailableThenExecute(verifyVar, callbackFn) {\n  // console.log('waitForScriptToBeAvailableThenExecute()');\n  new Promise((resolve, reject) => {\n\n    var checkInterval = 0;\n\n    function checkIfVarExists() {\n      // console.log('window.dzsap_part_starRatings_loaded - ', window.dzsap_part_starRatings_loaded);\n      // console.log('verifyVar -', verifyVar);\n\n      if (verifyVar) {\n\n        clearInterval(checkInterval);\n        resolve('var exists');\n      }\n    }\n\n    checkIfVarExists()\n    checkInterval = setInterval(checkIfVarExists, 300);\n\n    setTimeout(() => {\n\n      // resolve('timeout');\n      reject('timeout');\n    }, 5000);\n\n  }).then((resolve => {\n    callbackFn(resolve);\n  })).catch((err) => {\n    // console.log(err);\n\n\n    // callbackFn('error');\n  })\n}\n\n/**\n *\n * @param cthis\n * @param o\n * @param {DzsAudioPlayer} selfClass\n */\nexport function configureAudioPlayerOptionsInitial(cthis, o, selfClass) {\n\n\n  selfClass.cthis.addClass('preload-method-' + o.preload_method);\n\n  o.wavesurfer_pcm_length = Number(o.wavesurfer_pcm_length);\n\n\n  o.settings_trigger_resize = parseInt(o.settings_trigger_resize, 10);\n\n\n  if (isNaN(parseInt(o.design_thumbh, 10)) === false) {\n    o.design_thumbh = parseInt(o.design_thumbh, 10);\n  }\n\n  if (o.skinwave_wave_mode === '') {\n    o.skinwave_wave_mode = 'canvas';\n  }\n  if (o.skinwave_wave_mode_canvas_normalize === '') {\n    o.skinwave_wave_mode_canvas_normalize = 'on';\n  }\n  if (o.skinwave_wave_mode_canvas_waves_number === '' || isNaN(Number(o.skinwave_wave_mode_canvas_waves_number))) {\n    o.skinwave_wave_mode_canvas_waves_number = 3;\n  }\n\n\n  if (o.autoplay === 'on' && o.cue === 'on') {\n    o.preload_method = 'auto';\n  }\n\n  cthis.addClass(o.extra_classes_player)\n\n  if (o.design_skin === '') {\n    o.design_skin = 'skin-default';\n  }\n\n\n  if (selfClass.cthis.find('.feed-dzsap--embed-code').length) {\n\n    selfClass.feedEmbedCode = selfClass.cthis.find('.feed-dzsap--embed-code').eq(0).html();\n  } else {\n    if (o.embed_code !== '') {\n      selfClass.feedEmbedCode = o.embed_code;\n    }\n  }\n\n  if (this.is_ios()) {\n    // todo: ios not playing nice.. with audio context\n    if (selfClass.initOptions.skinwave_enableSpectrum === 'on') {\n      selfClass.initOptions.skinwave_enableSpectrum = 'off';\n    }\n\n  }\n\n  var regexr = / skin-/g;\n\n\n  if (regexr.test(cthis.attr('class'))) {\n\n  } else {\n\n    cthis.addClass(o.design_skin);\n  }\n\n\n  if (cthis.hasClass('skin-default')) {\n    o.design_skin = 'skin-default';\n  }\n  if (cthis.hasClass('skin-wave')) {\n    o.design_skin = 'skin-wave';\n  }\n  if (cthis.hasClass('skin-justthumbandbutton')) {\n    o.design_skin = 'skin-justthumbandbutton';\n  }\n  if (cthis.hasClass('skin-pro')) {\n    o.design_skin = 'skin-pro';\n  }\n  if (cthis.hasClass('skin-aria')) {\n    o.design_skin = 'skin-aria';\n  }\n  if (cthis.hasClass('skin-silver')) {\n    o.design_skin = 'skin-silver';\n  }\n  if (cthis.hasClass('skin-redlights')) {\n    o.design_skin = 'skin-redlights';\n  }\n  if (cthis.hasClass('skin-steel')) {\n    o.design_skin = 'skin-steel';\n  }\n  if (cthis.hasClass('skin-customcontrols')) {\n    o.design_skin = 'skin-customcontrols';\n  }\n\n\n  if (o.design_skin === 'skin-wave') {\n    if (o.scrubbar_type === 'auto') {\n      o.scrubbar_type = 'wave';\n    }\n  }\n  if (o.scrubbar_type === 'auto') {\n    o.scrubbar_type = 'bar';\n  }\n\n  if (o.settings_php_handler === 'wpdefault') {\n    o.settings_php_handler = window.ajaxurl;\n  }\n  if (o.action_received_time_total === 'wpdefault') {\n    o.action_received_time_total = window.dzsap_send_total_time;\n  }\n  if (o.action_video_contor_60secs === 'wpdefault') {\n    o.action_video_contor_60secs = window.action_video_contor_60secs;\n  }\n\n\n  if (is_ios() || is_android()) {\n    o.autoplay = 'off';\n    o.disable_volume = 'on';\n    if (o.cueMedia === 'off') {\n      o.cueMedia = 'on';\n    }\n    o.cueMedia = 'on';\n  }\n\n  if (cthis.attr('data-viewsubmitted') === 'on') {\n    selfClass.ajax_view_submitted = 'on';\n\n    // console.log('selfClass.ajax_view_submitted from data-viewsubmitted', cthis);\n  }\n  if (cthis.attr('data-userstarrating')) {\n    selfClass.starrating_alreadyrated = Number(cthis.attr('data-userstarrating'));\n  }\n\n\n  if (cthis.hasClass('skin-minimal')) {\n    o.design_skin = 'skin-minimal';\n    if (o.disable_volume === 'default') {\n      o.disable_volume = 'on';\n    }\n\n    if (o.disable_scrub === 'default') {\n      o.disable_scrub = 'on';\n    }\n    o.disable_timer = 'on';\n  }\n  if (cthis.hasClass('skin-minion')) {\n    o.design_skin = 'skin-minion';\n    if (o.disable_volume === 'default') {\n      o.disable_volume = 'on';\n    }\n\n    if (o.disable_scrub === 'default') {\n      o.disable_scrub = 'on';\n    }\n\n    o.disable_timer = 'on';\n  }\n\n\n  if (o.design_color_bg) {\n    o.design_wave_color_bg = o.design_color_bg;\n  }\n\n\n  if (o.design_color_highlight) {\n    o.design_wave_color_progress = o.design_color_highlight;\n  }\n\n\n  if (o.design_skin === 'skin-justthumbandbutton') {\n    if (o.design_thumbh === 'default') {\n      o.design_thumbh = '';\n      //                        res_thumbh = true;\n    }\n    o.disable_timer = 'on';\n    o.disable_volume = 'on';\n\n    if (o.design_animateplaypause === 'default') {\n      o.design_animateplaypause = 'on';\n    }\n  }\n  if (o.design_skin === 'skin-redlights') {\n    o.disable_timer = 'on';\n    o.disable_volume = 'off';\n    if (o.design_animateplaypause === 'default') {\n      o.design_animateplaypause = 'on';\n    }\n\n  }\n  if (o.design_skin === 'skin-steel') {\n    if (o.disable_timer === 'default') {\n\n      o.disable_timer = 'off';\n    }\n    o.disable_volume = 'on';\n    if (o.design_animateplaypause === 'default') {\n      o.design_animateplaypause = 'on';\n    }\n\n\n    if (o.disable_scrub === 'default') {\n      o.disable_scrub = 'on';\n    }\n\n  }\n  if (o.design_skin === 'skin-customcontrols') {\n    if (o.disable_timer === 'default') {\n\n      o.disable_timer = 'on';\n    }\n    o.disable_volume = 'on';\n    if (o.design_animateplaypause === 'default') {\n      o.design_animateplaypause = 'on';\n    }\n\n\n    if (o.disable_scrub === 'default') {\n      o.disable_scrub = 'on';\n    }\n\n  }\n\n  if (o.skinwave_wave_mode_canvas_mode === 'reflecto') {\n    o.skinwave_wave_mode_canvas_reflection_size = 0.5;\n    // o.skinwave_wave_mode_canvas_waves_number=1;\n    // o.skinwave_wave_mode_canvas_waves_padding=0;\n  }\n\n  if (o.skinwave_wave_mode_canvas_mode === 'reflecto') {\n    o.skinwave_wave_mode_canvas_reflection_size = 0.5;\n    // o.skinwave_timer_static='on';\n  }\n\n\n  if (o.embed_code === '') {\n    if (cthis.find('div.feed-embed-code').length > 0) {\n      o.embed_code = cthis.find('div.feed-embed-code').eq(0).html();\n    }\n  }\n\n  if (o.design_animateplaypause === 'default') {\n    o.design_animateplaypause = 'off';\n  }\n\n  if (o.design_animateplaypause === 'on') {\n    cthis.addClass('design-animateplaypause');\n  }\n\n  if (window.dzsap_settings) {\n    if (window.dzsap_settings.php_handler) {\n      if (!o.settings_php_handler) {\n\n        o.settings_php_handler = window.dzsap_settings.php_handler;\n      }\n    }\n  }\n\n  if (o.settings_php_handler) {\n    selfClass.urlToAjaxHandler = o.settings_php_handler;\n  }\n\n\n  player_reinit_findIfPcmNeedsGenerating(selfClass);\n\n}\n\n/**\n *\n * @param {DzsAudioPlayer} selfClass\n */\nexport function player_reinit_findIfPcmNeedsGenerating(selfClass) {\n  const o = selfClass.initOptions;\n\n  if (selfClass.cthis.attr('data-pcm')) {\n    selfClass.hasInitialPcmData = true;\n  }\n\n  if (!selfClass.hasInitialPcmData && o.skinwave_wave_mode === 'canvas' && (o.design_skin === 'skin-wave' || selfClass.cthis.attr('data-fakeplayer'))) {\n    selfClass.isPcmRequiredToGenerate = true;\n  }\n}\n\n\nexport function playerFunctions(selfClass, functionType) {\n  var o = selfClass.initOptions;\n\n  if (functionType === 'detectIds') {\n\n    // console.log('playerFunctions()', functionType);\n    if (o.skinwave_comments_playerid === '') {\n      if (typeof (selfClass.cthis.attr('id')) !== 'undefined') {\n        selfClass.the_player_id = selfClass.cthis.attr('id');\n      }\n    }\n\n\n    if (selfClass.the_player_id == '') {\n\n      if (selfClass.cthis.attr('data-computed-playerid')) {\n        selfClass.the_player_id = selfClass.cthis.attr('data-computed-playerid');\n      }\n      if (selfClass.cthis.attr('data-real-playerid')) {\n        selfClass.the_player_id = selfClass.cthis.attr('data-real-playerid');\n      }\n    }\n    selfClass.uniqueId = selfClass.the_player_id;\n    selfClass.identifier_pcm = selfClass.uniqueId;\n\n    // -- needs a real player id\n    if (selfClass.the_player_id === '') {\n      o.skinwave_comments_enable = 'off';\n    }\n    // console.log('o.skinwave_comments_enable - ', o.skinwave_comments_enable, o.skinwave_comments_playerid);\n  }\n}\n\nexport function player_delete(selfClass) {\n\n  var _con = null;\n  if (selfClass.cthis.parent().parent().hasClass('dzsap-sticktobottom')) {\n    _con = selfClass.cthis.parent().parent();\n  }\n  if (_con) {\n    if (_con.prev().hasClass(\"dzsap-sticktobottom-placeholder\")) {\n      _con.prev().remove();\n    }\n    _con.remove();\n  }\n  selfClass.cthis.remove();\n  return false;\n}\n\nexport function player_viewApplySkinWaveModes(selfClass) {\n\n\n  var o = selfClass.initOptions;\n\n  selfClass.cthis.removeClass('skin-wave-mode-normal');\n\n  if (o.design_skin === 'skin-wave') {\n    selfClass.cthis.addClass('skin-wave-mode-' + selfClass.skinwave_mode);\n\n\n    selfClass.cthis.addClass('skin-wave-wave-mode-' + o.skinwave_wave_mode);\n    if (o.skinwave_enableSpectrum === 'on') {\n      selfClass.cthis.addClass('skin-wave-is-spectrum');\n    }\n    selfClass.cthis.addClass('skin-wave-wave-mode-canvas-mode-' + o.skinwave_wave_mode_canvas_mode);\n  }\n\n\n}\n\n/**\n *\n * @param hexcolor\n * @returns {string}\n */\nexport function sanitizeToHexColor(hexcolor) {\n  if (hexcolor.indexOf('#') === -1) {\n    hexcolor = '#' + hexcolor;\n  }\n  return hexcolor;\n}\n\nexport function player_identifySource(selfClass) {\n\n  selfClass.data_source = selfClass.cthis.attr('data-source') || '';\n}\n\nexport function player_identifyTypes(selfClass) {\n\n\n  var o = selfClass.initOptions;\n  const cthis = selfClass.cthis;\n  if (cthis.attr('data-type') === 'youtube') {\n    o.type = 'youtube';\n    selfClass.audioType = 'youtube';\n  }\n  if (cthis.attr('data-type') === 'soundcloud') {\n    o.type = 'soundcloud';\n    selfClass.audioType = 'soundcloud';\n\n    o.skinwave_enableSpectrum = 'off';\n    cthis.removeClass('skin-wave-is-spectrum');\n  }\n  if (cthis.attr('data-type') === 'mediafile') {\n    o.type = 'audio';\n    selfClass.audioType = 'audio';\n  }\n  // todo: move shoutcast\n  if (cthis.attr('data-type') === 'shoutcast') {\n    o.type = 'shoutcast';\n    selfClass.audioType = 'audio';\n    o.disable_timer = 'on';\n    o.skinwave_enableSpectrum = 'off';\n    // -- might still use it for skin-wave\n\n    if (o.design_skin === 'skin-default') {\n      o.disable_scrub = 'on';\n    }\n    //                    o.disable_scrub = 'on';\n  }\n\n\n  if (selfClass.audioType === 'audio' || selfClass.audioType === 'normal' || selfClass.audioType === '') {\n    selfClass.audioType = 'selfHosted';\n  }\n\n\n  if (String(selfClass.data_source).indexOf('https://soundcloud.com/') > -1) {\n    selfClass.audioType = 'soundcloud';\n  }\n}\n\nexport function player_adjustIdentifiers(selfClass) {\n\n  selfClass.identifier_pcm = selfClass.the_player_id; // -- the pcm identifier to send via ajax\n\n\n  var _feed_obj = null;\n\n  if (selfClass.$feed_fakeButton) {\n    _feed_obj = selfClass.$feed_fakeButton;\n  } else {\n    if (selfClass._sourcePlayer) {\n      _feed_obj = selfClass._sourcePlayer;\n    } else {\n      _feed_obj = null;\n    }\n  }\n\n\n  if (selfClass.identifier_pcm === 'dzs_footer') {\n    selfClass.identifier_pcm = dzs_clean_string(selfClass.cthis.attr('data-source'));\n  }\n\n  if (_feed_obj) {\n    if (_feed_obj.attr('data-playerid')) {\n      selfClass.identifier_pcm = _feed_obj.attr('data-playerid');\n    } else {\n      if (_feed_obj.attr('data-source')) {\n        selfClass.identifier_pcm = _feed_obj.attr('data-source');\n      }\n    }\n  }\n\n\n}\n\n/**\n * get the playFrom\n * @param selfClass\n */\nexport function player_getPlayFromTime(selfClass) {\n\n  selfClass.playFrom = selfClass.initOptions.playfrom;\n\n  if (dzsHelpers.isValid(selfClass.cthis.attr('data-playfrom'))) {\n    selfClass.playFrom = selfClass.cthis.attr('data-playfrom');\n  }\n\n  if (isNaN(parseInt(selfClass.playFrom, 10)) === false) {\n    selfClass.playFrom = parseInt(selfClass.playFrom, 10);\n  }\n\n\n  if (selfClass.playFrom === 'off' || selfClass.playFrom === '') {\n    if (this.get_query_arg(window.location.href, 'audio_time')) {\n      selfClass.playFrom = this.sanitizeToIntFromPointTime(this.get_query_arg(window.location.href, 'audio_time'));\n    }\n  }\n\n  if (selfClass.timeModel.sampleTimeStart) {\n    if (selfClass.playFrom < selfClass.timeModel.sampleTimeStart) {\n      selfClass.playFrom = selfClass.timeModel.sampleTimeStart;\n    }\n    if (typeof selfClass.playFrom === 'string') {\n      selfClass.playFrom = selfClass.timeModel.sampleTimeStart;\n    }\n  }\n}\n\n\n/**\n * from 1:01 to 61\n * @param arg\n * @returns {number}\n */\nexport function sanitizeToIntFromPointTime(arg) {\n  //formats the time\n\n\n  arg = String(arg).replace('%3A', ':');\n  arg = String(arg).replace('#', '');\n\n  if (arg && String(arg).indexOf(':') > -1) {\n\n    var arr = /(\\d.*):(\\d.*)/g.exec(arg);\n\n    // console.log('result arr -  ',arr);\n\n    var m = parseInt(arr[1], 10);\n    var s = parseInt(arr[2], 10);\n\n\n    return (m * 60) + s;\n  } else {\n    return Number(arg);\n  }\n}\n\nexport function player_initSpectrum(selfClass) {\n\n  if (window.dzsap_audio_ctx === null) {\n    if (typeof AudioContext !== 'undefined') {\n      selfClass.spectrum_audioContext = new AudioContext();\n    } else if (typeof webkitAudioContext !== 'undefined') {\n      selfClass.spectrum_audioContext = new webkitAudioContext();\n    } else {\n      selfClass.spectrum_audioContext = null;\n    }\n    window.dzsap_audio_ctx = selfClass.spectrum_audioContext;\n  } else {\n    selfClass.spectrum_audioContext = window.dzsap_audio_ctx;\n  }\n\n\n  console.log('selfClass.spectrum_audioContext - ', selfClass.spectrum_audioContext);\n\n  if (selfClass.spectrum_audioContext) {\n\n\n    // -- normal\n    // setup a analyzer\n    if (selfClass.spectrum_analyser === null) {\n\n      selfClass.spectrum_analyser = selfClass.spectrum_audioContext.createAnalyser();\n      selfClass.spectrum_analyser.smoothingTimeConstant = 0.3;\n      selfClass.spectrum_analyser.fftSize = 512;\n\n      console.log('selfClass.spectrum_analyser - ', selfClass.spectrum_analyser);\n\n      // console.log('selfClass.audioType - ', selfClass.audioType);\n      if (selfClass.audioType === 'selfHosted') {\n        // console.log($mediaNode_);\n        // return;\n        selfClass.$mediaNode_.crossOrigin = \"anonymous\";\n        selfClass.spectrum_mediaElementSource = selfClass.spectrum_audioContext.createMediaElementSource(selfClass.$mediaNode_);\n\n        selfClass.spectrum_mediaElementSource.connect(selfClass.spectrum_analyser);\n        if (selfClass.spectrum_audioContext.createGain) {\n          selfClass.spectrum_gainNode = selfClass.spectrum_audioContext.createGain();\n        }\n        selfClass.spectrum_analyser.connect(selfClass.spectrum_audioContext.destination);\n\n        selfClass.spectrum_gainNode.gain.value = 1;\n\n        var frameCount = selfClass.spectrum_audioContext.sampleRate * 2.0;\n        selfClass.spectrum_audioContext_buffer = selfClass.spectrum_audioContext.createBuffer(2, frameCount, selfClass.spectrum_audioContext.sampleRate);\n      }\n    }\n  }\n}\n\nexport function player_initSpectrumOnUserAction(selfClass) {\n\n\n  // console.log('player_initSpectrumOnUserAction setting up listeners for player_initSpectrumOnUserAction');\n  selfClass.cthis.get(0).addEventListener('mousedown', handleMouseDown, {once: true});\n  selfClass.cthis.get(0).addEventListener('touchdown', handleMouseDown, {once: true});\n\n  function handleMouseDown(e) {\n    console.log('setting up audio context --', e);\n\n\n    player_initSpectrum(selfClass);\n  }\n\n\n}\n\n\nexport function player_icecastOrShoutcastRefresh(selfClass) {\n\n\n  var url = selfClass.cthis.attr('data-source');\n\n  if (selfClass.audioTypeSelfHosted_streamType === 'shoutcast') {\n    url = add_query_arg(selfClass.urlToAjaxHandler, 'action', 'dzsap_shoutcast_get_streamtitle');\n    url = add_query_arg(url, 'source', (selfClass.data_source));\n  }\n\n\n  jQuery.ajax({\n    type: \"GET\",\n    url: url,\n    crossDomain: true,\n    success: function (response) {\n\n      if (response.documentElement && response.documentElement.innerHTML) {\n        response = response.documentElement.innerHTML;\n      }\n\n      // console.log(' response - ',response);\n\n      var regex_title = '';\n      var regex_creator = '';\n      var new_title = '';\n      var new_artist = '';\n\n      if (selfClass.audioTypeSelfHosted_streamType === 'icecast') {\n\n        var regex_location = /<location>(.*?)<\\/location>/g\n\n        var regexMatches = null;\n        if (regexMatches = regex_location.exec(response)) {\n          // console.log(' aux - ', aux);\n\n          if (regexMatches[1] !== selfClass.data_source) {\n            selfClass.data_source = regexMatches[1];\n            selfClass.setup_media({\n              'called_from': 'icecast setup'\n            });\n          }\n        }\n      }\n\n      if (selfClass.radio_isGoingToUpdateSongName) {\n        if (selfClass.audioTypeSelfHosted_streamType === 'icecast') {\n          regex_title = /<title>(.*?)<\\/title>/g\n\n          if (regexMatches = regex_title.exec(response)) {\n            new_title = regexMatches[1];\n          }\n        }\n        if (selfClass.audioTypeSelfHosted_streamType === 'shoutcast') {\n          new_title = response;\n        }\n\n      }\n      if (selfClass.radio_isGoingToUpdateArtistName) {\n        if (selfClass.audioTypeSelfHosted_streamType === 'icecast') {\n\n          regex_creator = /<creator>(.*?)<\\/creator>/g;\n\n          if (regexMatches = regex_creator.exec(response)) {\n            new_artist = regexMatches[1];\n          }\n        }\n        if (selfClass.audioTypeSelfHosted_streamType === 'shoutcast') {\n        }\n      }\n\n      if (selfClass.radio_isGoingToUpdateSongName) {\n\n        selfClass._metaArtistCon.find('.the-name').html(new_title);\n      }\n      if (selfClass.radio_isGoingToUpdateArtistName) {\n\n        selfClass._metaArtistCon.find('.the-artist').html(new_artist)\n      }\n    },\n    error: function (err) {\n      console.log('error loading icecast - ', err);\n    }\n  });\n\n}\n\nexport function player_determineStickToBottomContainer(selfClass) {\n\n  if (selfClass.cthis.parent().hasClass('dzsap-sticktobottom')) {\n    selfClass.$stickToBottomContainer = selfClass.cthis.parent();\n\n  }\n  if (selfClass.cthis.parent().parent().hasClass('dzsap-sticktobottom')) {\n    selfClass.$stickToBottomContainer = selfClass.cthis.parent().parent();\n  }\n}\n\nexport function player_stickToBottomContainerDetermineClasses(selfClass) {\n\n  if (selfClass.$stickToBottomContainer) {\n    if (selfClass.cthis.hasClass('theme-dark')) {\n      selfClass.$stickToBottomContainer.addClass('theme-dark');\n    }\n\n    setTimeout(function () {\n\n      selfClass.$stickToBottomContainer.addClass('inited');\n    }, 500)\n    selfClass.$stickToBottomContainer.addClass('dzsap-sticktobottom-for-' + selfClass.initOptions.design_skin);\n    selfClass.$stickToBottomContainer.prev().addClass('dzsap-sticktobottom-for-' + selfClass.initOptions.design_skin);\n\n    if (selfClass.initOptions.design_skin === 'skin-wave') {\n      selfClass.$stickToBottomContainer.addClass('dzsap-sticktobottom-for-' + selfClass.initOptions.design_skin + '--mode-' + selfClass.skinwave_mode)\n      selfClass.$stickToBottomContainer.prev().addClass('dzsap-sticktobottom-for-' + selfClass.initOptions.design_skin + '--mode-' + selfClass.skinwave_mode)\n    }\n\n\n    var regex = /(skinvariation-.*?)($| )/g\n\n    var aux = regex.exec(selfClass.cthis.attr('class'));\n\n    if (aux && aux[1]) {\n      selfClass.$stickToBottomContainer.addClass(aux[1]);\n      selfClass.$stickToBottomContainer.prev().addClass(aux[1]);\n    }\n  }\n\n}\n\nexport function player_service_getSourceProtection(selfClass) {\n\n  return new Promise((resolve, reject) => {\n    // -- generate nonce\n    jQuery.ajax({\n      type: \"POST\",\n      url: selfClass.data_source,\n      data: {},\n      success: function (response) {\n        resolve(response);\n      },\n      error: function (err) {\n        reject(err);\n      }\n    });\n  })\n}\n\nexport function player_isGoingToSetupMediaNow(selfClass) {\n  return selfClass.audioTypeSelfHosted_streamType !== 'icecast' && selfClass.audioType !== 'youtube';\n}\n\nexport function player_determineHtmlAreas(selfClass) {\n\n  var o = selfClass.initOptions;\n\n\n  // console.log('selfClass.cthis.children(\\'.feed-dzsap--extra-html\\')- ', selfClass.cthis.children('.feed-dzsap--extra-html'));\n  let extraHtmlBottom = '';\n  let extraHtmlControlsLeft = '';\n  let extraHtmlControlsRight = '';\n\n  // console.log('selfClass.cthis.children(\\'.feed-dzsap--extra-html\\').length - ', selfClass.cthis.children('.feed-dzsap--extra-html').length, selfClass.cthis);\n  if (selfClass.cthis.children('.feed-dzsap--extra-html').length > 0 && o.settings_extrahtml === '') {\n    selfClass.cthis.children('.feed-dzsap--extra-html').each(function () {\n\n      extraHtmlBottom += jQuery(this).html();\n    })\n    selfClass.cthis.children('.feed-dzsap--extra-html').remove();\n  } else {\n    if (o.settings_extrahtml) {\n      extraHtmlBottom = o.settings_extrahtml;\n    }\n  }\n\n\n  if (selfClass.cthis.children('.feed-dzsap--extra-html-in-controls-left').length > 0) {\n    extraHtmlControlsLeft = selfClass.cthis.children('.feed-dzsap--extra-html-in-controls-left').eq(0).html();\n  }\n  if (selfClass.cthis.children('.feed-dzsap--extra-html-in-controls-right').length > 0) {\n    extraHtmlControlsRight = selfClass.cthis.children('.feed-dzsap--extra-html-in-controls-right').eq(0).html();\n  }\n  if (selfClass.cthis.children('.feed-dzsap--extra-html-bottom').length > 0) {\n    extraHtmlBottom = selfClass.cthis.children('.feed-dzsap--extra-html-bottom').eq(0).html();\n  }\n\n\n  selfClass.extraHtmlAreas.controlsLeft = extraHtmlControlsLeft;\n  selfClass.extraHtmlAreas.controlsRight = extraHtmlControlsRight;\n  selfClass.extraHtmlAreas.bottom = extraHtmlBottom;\n\n\n  if (selfClass.extraHtmlAreas.controlsRight) {\n    selfClass.extraHtmlAreas.controlsRight = String(selfClass.extraHtmlAreas.controlsRight).replace(/{{svg_share_icon}}/g, dzsapSvgs.svg_share_icon);\n  }\n\n  // console.log('selfClass.feedEmbedCode - ', selfClass.feedEmbedCode);\n  // console.log('selfClass.extraHtmlAreas - ', selfClass.extraHtmlAreas);\n  for (var key in selfClass.extraHtmlAreas) {\n    // debugger;\n    selfClass.extraHtmlAreas[key] = String(selfClass.extraHtmlAreas[key]).replace('{{heart_svg}}', '\\t&hearts;');\n    selfClass.extraHtmlAreas[key] = String(selfClass.extraHtmlAreas[key]).replace('{{embed_code}}', selfClass.feedEmbedCode);\n  }\n}\n\nexport function player_stopOtherPlayers(dzsap_list, selfClass) {\n\n  var i = 0;\n  for (i = 0; i < dzsap_list.length; i++) {\n    // -- pause other players\n    if (dzsap_list[i].get(0) && dzsap_list[i].get(0).api_pause_media && (dzsap_list[i].get(0) != selfClass.cthis.get(0))) {\n\n      //console.error(\"LETS PAUSE\");\n      if (dzsap_list[i].data('type_audio_stop_buffer_on_unfocus') && dzsap_list[i].data('type_audio_stop_buffer_on_unfocus') === 'on') {\n        dzsap_list[i].get(0).api_destroy_for_rebuffer();\n      } else {\n        dzsap_list[i].get(0).api_pause_media({\n          'audioapi_setlasttime': false\n        });\n      }\n    }\n  }\n}\n\n\nexport function player_syncPlayers_gotoItem(selfClass, targetIncrement) {\n  if(window.dzsap_settings.syncPlayers_autoplayEnabled){\n\n    for (var keySyncPlayer in window.dzsap_syncList_players) {\n      var $playerInSyncList = selfClass.cthis;\n\n      if (selfClass._sourcePlayer) {\n        $playerInSyncList = selfClass._sourcePlayer;\n      }\n\n\n      if (window.dzsap_syncList_players[keySyncPlayer].get(0) === $playerInSyncList.get(0)) {\n\n        keySyncPlayer = parseInt(keySyncPlayer, 10);\n        let targetIndex = window.dzsap_syncList_index + targetIncrement;\n        if (targetIndex >= 0 && targetIndex < window.dzsap_syncList_players.length) {\n          let $currentSyncPlayer_ = window.dzsap_syncList_players[targetIndex].get(0);\n          // console.log('THIS IS _c ',_c);\n\n          if ($currentSyncPlayer_ && $currentSyncPlayer_.api_play_media) {\n            setTimeout(function () {\n              $currentSyncPlayer_.api_play_media({\n                'called_from': 'api_sync_players_prev'\n              });\n            }, 200);\n\n          }\n        }\n      }\n    }\n  }\n\n}\nexport function player_syncPlayers_buildList() {\n\n  if (!window.syncPlayers_isDzsapListBuilt) {\n    // -- reset list first\n    window.dzsap_syncList_players = [];\n\n    window.syncPlayers_isDzsapListBuilt = true;\n\n    jQuery('.audioplayer.is-single-player,.audioplayer-tobe.is-single-player').each(function () {\n      var _t23 = jQuery(this);\n\n\n      if (_t23.hasClass('dzsap_footer')) {\n        return;\n      }\n\n      // console.log(_t23);\n      if (_t23.attr('data-do-not-include-in-list') !== 'on') {\n        window.dzsap_syncList_players.push(_t23);\n      }\n    })\n\n    // console.log(window.dzsap_syncList_players);\n\n    clearTimeout(window.syncPlayers_buildTimeout);\n\n    window.syncPlayers_buildTimeout = setTimeout(function () {\n      window.syncPlayers_isDzsapListBuilt = false;\n    }, 500);\n\n  }\n}\nexport function player_detect_skinwave_mode() {\n\n  var selfClass = this;\n\n\n  selfClass.skinwave_mode = selfClass.initOptions.skinwave_mode;\n\n  if (selfClass.cthis.hasClass('skin-wave-mode-small')) {\n    selfClass.skinwave_mode = 'small'\n  }\n  if (selfClass.cthis.hasClass('skin-wave-mode-alternate')) {\n    selfClass.skinwave_mode = 'alternate'\n  }\n  if (selfClass.cthis.hasClass('skin-wave-mode-bigwavo')) {\n    selfClass.skinwave_mode = 'bigwavo'\n  }\n}\n\nexport function player_constructArtistAndSongCon(margs) {\n\n  var selfClass = this;\n\n  if (selfClass.cthis.find('.meta-artist').length === 0) {\n    if (selfClass.cthis.find('.feed-artist').length || selfClass.cthis.find('.feed-songname').length) {\n      var structHtml = '<span class=\"meta-artist player-artistAndSong\">';\n      if (selfClass.cthis.find('.feed-artist').length) {\n        structHtml += '<span class=\"the-artist\">' + selfClass.cthis.find('.feed-artist').eq(0).html() + '</span>';\n      }\n      if (selfClass.cthis.find('.feed-songname').length) {\n        structHtml += '<span class=\"the-name player-meta--songname\">' + selfClass.cthis.find('.feed-songname').eq(0).html() + '</span>';\n      }\n      structHtml += '</span>';\n      selfClass.cthis.append(structHtml);\n    }\n  }\n\n  if (selfClass.cthis.attr(\"data-type\") === 'fake') {\n    if (selfClass.cthis.find('.meta-artist').length === 0) {\n      selfClass.cthis.append('<span class=\"meta-artist\"><span class=\"the-artist\"></span><span class=\"the-name\"></span></span>')\n    }\n  }\n\n  if (!selfClass._metaArtistCon || margs.call_from === 'reconstruct') {\n    // -- reconstruct\n    if (selfClass.cthis.children('.meta-artist').length > 0) {\n      //console.log(cthis.hasClass('alternate-layout'));\n      if (selfClass.cthis.hasClass('skin-wave-mode-alternate')) {\n        //console.log(_conControls.children().last());\n\n        if (selfClass._conControls.children().last().hasClass('clear')) {\n          selfClass._conControls.children().last().remove();\n        }\n        selfClass._conControls.append(selfClass.cthis.children('.meta-artist'));\n      } else {\n\n        // -- normal\n        if (selfClass._audioplayerInner) {\n\n          selfClass._audioplayerInner.append(selfClass.cthis.children('.meta-artist'));\n        }\n      }\n\n    }\n\n\n    // -- we need meta-artist at this point\n    selfClass._audioplayerInner.find('.meta-artist').eq(0).wrap('<div class=\"meta-artist-con\"></div>');\n\n    //console.log('ceva');\n\n    selfClass._metaArtistCon = selfClass._audioplayerInner.find('.meta-artist-con').eq(0);\n\n\n    var o = selfClass.initOptions;\n\n\n    if (selfClass._apControls.find('.ap-controls-right').length > 0) {\n      selfClass._apControlsRight = selfClass.cthis.find('.ap-controls-right').eq(0);\n    }\n    if (selfClass._apControls.find('.ap-controls-left').length > 0) {\n      selfClass._apControlsLeft = selfClass._apControls.find('.ap-controls-left').eq(0);\n    }\n\n\n    if (o.design_skin === 'skin-pro') {\n      selfClass._apControlsRight = selfClass.cthis.find('.con-controls--right').eq(0)\n    }\n\n    if (o.design_skin === 'skin-wave') {\n\n\n      if (selfClass.cthis.find('.dzsap-repeat-button').length) {\n        selfClass.cthis.find('.dzsap-repeat-button').after(selfClass._metaArtistCon);\n      } else {\n\n\n        if (selfClass.cthis.find('.dzsap-loop-button').length && selfClass.cthis.find('.dzsap-loop-button').eq(0).parent().hasClass('feed-dzsap-for-extra-html-right') === false) {\n          selfClass.cthis.find('.dzsap-loop-button').after(selfClass._metaArtistCon);\n        } else {\n\n          selfClass._conPlayPauseCon.after(selfClass._metaArtistCon);\n        }\n      }\n\n      if (selfClass.skinwave_mode === 'alternate') {\n        selfClass._apControlsRight.before(selfClass._metaArtistCon);\n      }\n\n\n    }\n    if (o.design_skin === 'skin-aria') {\n      selfClass._apControlsRight.prepend(selfClass._metaArtistCon);\n\n    }\n    if (o.design_skin === 'skin-redlights' || o.design_skin === 'skin-steel') {\n\n      selfClass._apControlsRight.prepend(selfClass._metaArtistCon);\n\n\n    }\n    if (o.design_skin === 'skin-silver') {\n      selfClass._apControlsRight.append(selfClass._metaArtistCon);\n    }\n    if (o.design_skin === 'skin-default') {\n      selfClass._apControlsRight.before(selfClass._metaArtistCon);\n    }\n\n\n  }\n\n\n}\n\n\nexport function convertPluginOptionsToFinalOptions(elThis, defaultOptions, argOptions = null, searchedAttr = 'data-options', $es) {\n\n  var finalOptions = null;\n  var tempOptions = {};\n  var sw_setFromJson = false;\n\n  if ($es === undefined) {\n    $es = jQuery;\n  }\n  // console.log('arguments - ', arguments);\n  // console.log('$es - ', $es);\n  var $elThis = $es(elThis);\n\n  if (argOptions && typeof argOptions === 'object') {\n    tempOptions = argOptions;\n  } else {\n    if ($elThis.attr(searchedAttr)) {\n      try {\n        tempOptions = JSON.parse($elThis.attr(searchedAttr));\n        sw_setFromJson = true;\n      } catch (err) {\n\n        console.log('err - ', err);\n      }\n    }\n    if (!sw_setFromJson) {\n\n      if (typeof argOptions === 'undefined' || !argOptions) {\n        if (typeof $elThis.attr(searchedAttr) != 'undefined' && $elThis.attr('data-options') != '') {\n          var aux = $elThis.attr(searchedAttr);\n          aux = 'var aux_opts = ' + aux;\n          eval(aux);\n          tempOptions = Object.assign({}, aux_opts);\n        }\n      }\n    }\n  }\n  finalOptions = Object.assign(defaultOptions, tempOptions);\n\n  return finalOptions;\n}\n\nexport function generateFakeArrayForPcm() {\n\n  //console.log('generateFakeArray()');\n  var maxlen = 256;\n\n  var arr = [];\n\n  for (var it1 = 0; it1 < maxlen; it1++) {\n    arr[it1] = Math.random() * 100;\n\n  }\n\n  return arr;\n}\n\n\nexport function scrubbar_modeWave_clearObsoleteCanvas(selfClass) {\n  if (selfClass._scrubbar) {\n    selfClass._scrubbar.find('.scrubbar-type-wave--canvas.transitioning-out').remove();\n  }\n}\n\n\nexport function scrubbar_modeWave_setupCanvas(pargs, selfClass) {\n\n  var margs = {\n    prepare_for_transition_in: false\n  }\n\n  if (pargs) {\n    margs = Object.assign(margs, pargs);\n  }\n\n  // console.trace();\n\n  var struct_scrubBg_str = '';\n  var struct_scrubProg_str = '';\n  var aux_selector = '';\n  var o = selfClass.initOptions;\n\n\n  struct_scrubBg_str = '<canvas class=\"scrubbar-type-wave--canvas scrub-bg-img';\n  struct_scrubBg_str += '\" ></canvas>';\n\n  struct_scrubProg_str = '<canvas class=\"scrubbar-type-wave--canvas scrub-prog-img';\n  struct_scrubProg_str += '\" ></canvas>';\n\n  // console.log('scrubbar_modeWave_setupCanvas() selfClass._scrubbar.find(\\'.scrub-bg\\') - ', selfClass._scrubbar);\n  selfClass._scrubbar.find('.scrub-bg').eq(0).append(struct_scrubBg_str);\n  selfClass._scrubbar.find('.scrub-prog').eq(0).append(struct_scrubProg_str);\n\n\n  selfClass._scrubbarbg_canvas = selfClass._scrubbar.find('.scrub-bg-img').last();\n  selfClass._scrubbarprog_canvas = selfClass._scrubbar.find('.scrub-prog-img').last();\n\n  if (o.skinwave_enableSpectrum === 'on') {\n    selfClass._scrubbarprog_canvas.hide();\n  }\n\n\n  if (margs.prepare_for_transition_in) {\n    selfClass._scrubbarbg_canvas.addClass('preparing-transitioning-in');\n    selfClass._scrubbarprog_canvas.addClass('preparing-transitioning-in');\n    setTimeout(function () {\n      selfClass._scrubbarbg_canvas.addClass('transitioning-in');\n      selfClass._scrubbarprog_canvas.addClass('transitioning-in');\n    }, 20);\n  }\n}\n","import {ConstantsDzsAp} from \"../configs/_constants\";\n\nconst dzsapWaveFunctions = require('./wave-render/_wave-render-functions');\n\nexport function retrieve_soundcloud_url(selfClass, pargs) {\n\n\n  var o = selfClass.initOptions;\n  // console.log(' ooo - ', o);\n  if (o.soundcloud_apikey == '') {\n    alert('soundcloud api key not defined, read docs!');\n  }\n  var aux = 'https://api.' + 'soundcloud.com' + '/resolve?url=' + selfClass.data_source + '&format=json&consumer_key=' + o.soundcloud_apikey;\n  //console.log(aux);\n\n\n  aux = encodeURIComponent(aux);\n\n\n  var soundcloud_retriever = o.php_retriever + '?scurl=' + aux;\n\n\n  jQuery.ajax({\n    type: \"GET\",\n    url: soundcloud_retriever\n    , data: {}\n    , async: true\n    , dataType: 'text'\n    , error: function (err, q, t) {\n\n      console.log('retried soundcloud error', err, q, t);\n    }\n    , success: function (response) {\n\n      // console.log('got response - ', response);\n      var data = [];\n\n\n      let newSource = '';\n      try {\n        data = JSON.parse(response);\n        // console.log('got json - ', data);\n        selfClass.audioType = 'selfHosted';\n\n\n        if (data == '') {\n          selfClass.cthis.addClass(ConstantsDzsAp.ERRORED_OUT_CLASS);\n          selfClass.cthis.append('<div class=\"feedback-text\">soundcloud track does not seem to serve via api</div>');\n        }\n\n\n        //console.log('o.design_skin - ', o.design_skin);\n        selfClass.original_real_mp3 = selfClass.cthis.attr('data-source');\n        if (data.stream_url) {\n\n          newSource = data.stream_url + '?consumer_key=' + o.soundcloud_apikey + '&origin=localhost';\n          selfClass.cthis.attr('data-source', newSource);\n\n\n          if (selfClass.$feed_fakeButton) {\n            selfClass.$feed_fakeButton.attr('data-source', newSource);\n          }\n          if (selfClass._sourcePlayer) {\n            selfClass._sourcePlayer.attr('data-source', newSource);\n          }\n        } else {\n\n          selfClass.cthis.addClass(ConstantsDzsAp.ERRORED_OUT_CLASS);\n          selfClass.cthis.append('<div class=\"feedback-text \">this soundcloud track does not allow streaming  </div>');\n        }\n        selfClass.data_source = newSource;\n\n\n        if (selfClass.cthis.attr('data-pcm')) {\n          selfClass.isAlreadyHasRealPcm = true;\n        }\n        if (o.design_skin == 'skin-wave') {\n          if (o.skinwave_wave_mode == 'canvas') {\n            if (selfClass.isAlreadyHasRealPcm == false) {\n              if ((o.pcm_data_try_to_generate == 'on' && o.pcm_data_try_to_generate_wait_for_real_pcm == 'on') == false) {\n                dzsapWaveFunctions.scrubModeWave__initGenerateWaveData(selfClass, {\n                  'call_from': 'soundcloud init(), pcm not real..'\n                });\n              }\n            }\n          }\n        }\n\n        selfClass.setup_media({\n          'called_from': 'change_media'\n        });\n\n\n        setTimeout(function () {\n\n          // console.log('selfClass.isPlayPromised -3 ',selfClass.isPlayPromised);\n          if (selfClass.isPlayPromised) {\n            selfClass.play_media({\n              'call_from': 'change_media'\n            })\n            selfClass.isPlayPromised = false;\n          }\n        }, 300);\n      } catch (err) {\n        console.log('soduncloud parse error -', response, ' - ', soundcloud_retriever);\n      }\n    }\n  });\n\n}\n","import * as dzsapHelpers from './_dzsap_helpers';\n\nconst ZoomSoundsNav = require('./components/_nav');\n\nimport {ConstantsDzsAp} from \"../configs/_constants\";\n\n// Constants.DEMO;\n\nclass DzsApPlaylist {\n  constructor(argThis, argOptions, $) {\n\n    this.argThis = argThis;\n    this.argOptions = argOptions;\n    this.$ = $;\n    this.navClass = null;\n\n\n    this.init();\n  }\n\n  init() {\n    // console.log('this -> ', this);\n\n\n    var $ = this.$;\n    var selfGallery = this;\n    //console.log(\"INITED\");\n    var o = selfGallery.argOptions;\n    var cgallery = $(selfGallery.argThis);\n    var cid = 'ag1';\n    var currNr = -1 // -- the current player that is playing\n      , lastCurrNr = 0\n      , nrChildren = 0\n      , tempNr = 0;\n\n    var i = 0;\n\n\n    var dzsap_currplayer_focused = null;\n    var _sliderMain, _sliderClipper, _navMain, _navClipper, _cache;\n    var busy = false,\n      first = true,\n      destroyed = true,\n      skin_redlight_give_controls_right_to_all_players = false // -- if the mode is mode-showall and the skin of the player is redlights, then make all players with controls right\n    ;\n\n\n    var trying_to_get_track_data = false;\n\n\n    var arr_menuitems = [];\n    var track_data = []; // -- the whole track data views / likes etc.\n\n    var str_alertBeforeRate = 'You need to comment or rate before downloading.';\n\n\n    var duration_viy = 20;\n\n    var target_viy = 0;\n\n    var begin_viy = 0;\n\n    var change_viy = 0;\n\n    selfGallery.goto_item = goto_item;\n    selfGallery.handleResize = handleResize;\n\n\n    selfGallery.initOptions = o;\n    if (window.dzsap_settings && typeof (window.dzsap_settings.str_alertBeforeRate) != 'undefined') {\n      str_alertBeforeRate = window.dzsap_settings.str_alertBeforeRate;\n    }\n\n    cgallery.get(0).currNr_2 = -1; // -- we use this as backup currNR for mode-showall ( hack )\n\n    init();\n\n    function init() {\n      // -- init gallery here\n\n\n      // console.log('o.settings_ap- ' , o.settings_ap);\n      if (o.settings_ap === 'default') {\n        if (cgallery.attr('data-player-options')) {\n          o.settings_ap = dzsapHelpers.convertPluginOptionsToFinalOptions(cgallery.get(0), {}, null, 'data-player-options');\n        } else {\n          const _firstPlayer = cgallery.find('.audioplayer, .audioplayer-tobe').eq(0);\n          if (_firstPlayer) {\n\n            o.settings_ap = dzsapHelpers.convertPluginOptionsToFinalOptions(_firstPlayer.get(0), {}, null);\n          }\n        }\n      } else {\n        if (typeof o.settings_ap == 'string' && window.dzsap_apconfigs) {\n          if (typeof window.dzsap_apconfigs[o.settings_ap] === 'object') {\n            o.settings_ap = {...window.dzsap_apconfigs[o.settings_ap]};\n          }\n        }\n      }\n      // console.log('selfGallery.initOptions - ', selfGallery.initOptions, 'o.settings_ap - ', o.settings_ap, window.dzsap_apconfigs);\n\n\n      // console.log('o.settings_ap after data-player-options - ',Object.assign({}, o.settings_ap));\n      if (o.settings_ap === 'default' || typeof o.settings_ap === 'string') {\n        o.settings_ap = {};\n      }\n\n\n      if (o.design_menu_width === 'default') {\n        o.design_menu_width = '100%';\n      }\n      // console.log('o.design_menu_height- ' , o.design_menu_height);\n      if (o.design_menu_height === 'default') {\n        o.design_menu_height = '200';\n      }\n      // console.log('o.design_menu_height- ' , o.design_menu_height);\n\n\n      if (cgallery.hasClass('skin-wave')) {\n        o.design_skin = 'skin-wave';\n      }\n      if (cgallery.hasClass('skin-default')) {\n        o.design_skin = 'skin-default';\n      }\n      if (cgallery.hasClass('skin-aura')) {\n        o.design_skin = 'skin-aura';\n      }\n\n\n      cgallery.addClass(o.settings_mode);\n\n\n      cgallery.append('<div class=\"slider-main\"><div class=\"slider-clipper\"></div></div>');\n\n      cgallery.addClass('menu-position-' + o.design_menu_position);\n\n      _sliderMain = cgallery.find('.slider-main').eq(0);\n\n\n      var lengthAudioPlayersInPlaylist = cgallery.find('.items').children('.audioplayer-tobe').length;\n\n      // --- if there is a single audio player in the gallery - theres no point of a menu\n\n\n      o.settings_ap.disable_player_navigation = o.disable_player_navigation;\n      if (lengthAudioPlayersInPlaylist === 0 || lengthAudioPlayersInPlaylist === 1) {\n        o.design_menu_position = 'none';\n        o.settings_ap.disable_player_navigation = 'on';\n      }\n\n\n      // console.log('ZoomSoundsNav - ', ZoomSoundsNav);\n\n      selfGallery.navClass = new ZoomSoundsNav.ZoomSoundsNav(selfGallery);\n\n\n      if (o.design_menu_position === 'top') {\n        _sliderMain.before(selfGallery.navClass.get_structZoomsoundsNav());\n      }\n      if (o.design_menu_position === 'bottom') {\n        _sliderMain.after(selfGallery.navClass.get_structZoomsoundsNav());\n      }\n\n      // console.log('[settingsap] o.settings_ap -', o.settings_ap);\n      if (o.settings_php_handler) {\n\n      } else {\n        if (o.settings_ap.settings_php_handler) {\n          o.settings_php_handler = o.settings_ap.settings_php_handler;\n        }\n      }\n\n\n      if (typeof cgallery.attr('id')) {\n        cid = cgallery.attr('id');\n      } else {\n\n        var ind = 0;\n        while ($('ag' + ind).length === 0) {\n          ind++;\n        }\n\n\n        cid = 'ag' + ind;\n\n        cgallery.attr('id', cid);\n      }\n\n\n      _sliderClipper = cgallery.find('.slider-clipper').eq(0);\n      _navMain = cgallery.find('.nav-main').eq(0);\n      _navClipper = cgallery.find('.nav-clipper').eq(0);\n\n      if (cgallery.children('.extra-html').length) {\n        cgallery.append(cgallery.children('.extra-html'));\n      }\n\n      if (o.settings_mode === 'mode-showall') {\n        _sliderClipper.addClass('layout-' + o.mode_showall_layout);\n      }\n\n      selfGallery.navClass.set_elements(_navMain, _navClipper, cgallery);\n\n\n      reinit();\n\n      //console.log(arr_menuitems);\n\n      selfGallery.navClass.init_ready();\n\n\n      parse_track_data();\n\n\n      if (dzsapHelpers.can_history_api() === false) {\n        o.settings_enable_linking = 'off';\n      }\n\n      $(window).bind('resize', handleResize);\n      handleResize();\n      setTimeout(handleResize, 1000);\n\n\n      cgallery.get(0).api_skin_redlights_give_controls_right_to_all = function () {\n\n        // -- void f()\n\n        skin_redlight_give_controls_right_to_all_players = true;\n      }\n\n\n      if (dzsapHelpers.get_query_arg(window.location.href, 'audiogallery_startitem_' + cid)) {\n        tempNr = Number(dzsapHelpers.get_query_arg(window.location.href, 'audiogallery_startitem_' + cid));\n\n        lastCurrNr = tempNr;\n        if (Number(dzsapHelpers.get_query_arg(window.location.href, 'audiogallery_startitem_' + cid)) && Number(dzsapHelpers.get_query_arg(window.location.href, 'audiogallery_startitem_' + cid)) > 0) {\n\n          // console.log(cid,o.force_autoplay_when_coming_from_share_link)\n\n          // -- caution .. coming from share link will trigger autoplay!!!\n          if (o.force_autoplay_when_coming_from_share_link == 'on') {\n            o.autoplay = 'on';\n          }\n        }\n      }\n      // console.log('%c o gallery','background-color: #ccc;',$.extend({},o));\n\n\n      if (o.settings_mode == 'mode-normal') {\n\n        goto_item(tempNr, {\n          'called_from': 'init'\n        });\n      }\n\n\n      if (o.settings_mode === 'mode-showall') {\n        // -- mode-showall\n\n        _sliderClipper.children().each(function () {\n          var _t = $(this);\n\n          //console.log(_t);\n\n          var ind = _t.parent().children('.audioplayer,.audioplayer-tobe').index(_t);\n\n          if (_t.hasClass('audioplayer-tobe')) {\n            //console.log(o.settings_ap);\n\n\n            var player_args = Object.assign({}, o.settings_ap);\n            player_args.parentgallery = cgallery;\n            player_args.call_from = 'mode show-all';\n            player_args.action_audio_play = mode_showall_listen_for_play;\n\n            // -- showall\n            _t.audioplayer(player_args);\n\n            //console.log(ind);\n\n            ind = String(ind + 1);\n\n            if (ind.length < 2) {\n              ind = '0' + ind;\n            }\n\n            if (o.mode_showall_layout === 'one-per-row' && o.settings_mode_showall_show_number !== 'off') {\n\n              _t.before('<div class=\"number-wrapper\"><span class=\"the-number\">' + ind + '</span></div>')\n              _t.after('<div class=\"clear for-number-wrapper\"></div>')\n            }\n          }\n\n        })\n\n\n        if ($.fn.isotope && o.mode_showall_layout !== 'one-per-row') {\n\n          // -- we have isotope\n          _sliderClipper.find('.audioplayer,.audioplayer-tobe').addClass('isotope-item');\n          setTimeout(function () {\n\n            _sliderClipper.prepend('<div class=\"grid-sizer\"></div>');\n            _sliderClipper.isotope({\n              // options\n              itemSelector: '.isotope-item',\n              layoutMode: 'fitRows',\n              percentPosition: true,\n              masonry: {\n                columnWidth: '.grid-sizer'\n              }\n            });\n            _sliderClipper.addClass('isotoped');\n            setTimeout(function () {\n              _sliderClipper.isotope('layout')\n            }, 900);\n          }, ConstantsDzsAp.PLAYLIST_TRANSITION_DURATION);\n\n\n          _sliderClipper.append('<div class=\"clear\"></div>');\n        }\n\n\n        //console.log('dada2', skin_redlight_give_controls_right_to_all_players);\n\n\n        if (skin_redlight_give_controls_right_to_all_players) {\n\n          _sliderClipper.children('.audioplayer').each(function () {\n\n            var _t = $(this);\n\n            //console.log(_t);\n\n            if (_t.find('.ap-controls-right').eq(0).prev().hasClass('controls-right') === false) {\n              _t.find('.ap-controls-right').eq(0).before('<div class=\"controls-right\"> </div>');\n            }\n          });\n        }\n\n      }\n\n\n      cgallery.find('.download-after-rate').bind('click', click_downloadAfterRate);\n\n      cgallery.get(0).api_regenerate_sync_players_with_this_playlist = regenerate_sync_players_with_this_playlist;\n      cgallery.get(0).api_goto_next = goto_next;\n      cgallery.get(0).api_goto_prev = goto_prev;\n      cgallery.get(0).api_goto_item = goto_item;\n      cgallery.get(0).api_gallery_handle_end = gallery_handle_end;\n      cgallery.get(0).api_toggle_menu_state = toggle_menu_state;\n      cgallery.get(0).api_handleResize = handleResize;\n      cgallery.get(0).api_player_commentSubmitted = player_commentSubmitted;\n      cgallery.get(0).api_player_rateSubmitted = player_rateSubmitted;\n      cgallery.get(0).api_reinit = reinit;\n      cgallery.get(0).api_play_curr_media = play_curr_media;\n      cgallery.get(0).api_get_nr_children = get_nr_children;\n      cgallery.get(0).api_init_player_from_gallery = init_player_from_gallery;\n      cgallery.get(0).api_filter = filterPlayersInPlaylist;\n      cgallery.get(0).api_destroy = destroy_gallery;\n\n\n      setInterval(calculate_on_interval, 1000);\n\n\n      setTimeout(init_loaded, 700);\n\n\n      if (o.enable_easing == 'on') {\n\n        handle_frame();\n      }\n      //console.log(cgallery);\n\n      cgallery.addClass('dzsag-inited');\n\n      cgallery.addClass('transition-' + o.playlistTransition);\n      cgallery.addClass('playlist-transition-' + o.playlistTransition);\n\n\n    }\n\n\n    function destroy_gallery() {\n\n\n      if (destroyed) {\n        return false;\n      }\n\n\n      // $(window).off('resize.dzsap');\n\n      cgallery.remove();\n      cgallery = null;\n\n      destroyed = true;\n    }\n\n    function filterPlayersInPlaylist(filterBy, searchedString) {\n      if (!(filterBy)) {\n        filterBy = 'title';\n      }\n\n      /**\n       *\n       * @param $audioPlayer_\n       * @returns {boolean} true if found\n       */\n      const filterForIsotope = ($audioPlayer_) => {\n        // console.log($audioPlayer_);\n        var $audioPlayer = $($audioPlayer_);\n        var referenceVal = '';\n\n        if (filterBy === 'title') {\n          referenceVal = $audioPlayer.find('.the-name').text();\n        }\n\n        // console.log({searchedString, referenceVal, $audioPlayer});\n\n        // console.log('argby - ',argby, ' | ', _t, _t.find('.the-name'));\n        // console.log('$(this).find(\\'.the-name\\') - ',referenceVal, ' | ', arg);\n\n        if (searchedString === '') {\n          return true;\n        }\n        return referenceVal.toLowerCase().indexOf(searchedString.toLowerCase()) > -1;\n\n        // console.log(arg2,this,arg);\n      }\n\n      _sliderClipper.children().each(function () {\n        var isAccordingToSearch = filterForIsotope(this);\n        if(isAccordingToSearch){\n          $(this).addClass('is-according-to-search');\n        }else{\n          $(this).removeClass('is-according-to-search');\n        }\n        if (_sliderClipper.hasClass('isotoped')) {\n          // console.log(_sliderClipper.isotope('getItemElements'));\n          _sliderClipper.isotope({\n            filter: '.is-according-to-search'\n          });\n        } else {\n          if (isAccordingToSearch) {\n            $(this).fadeIn('fast');\n          } else {\n            $(this).fadeOut('fast');\n          }\n        }\n      });\n\n    }\n\n    function regenerate_sync_players_with_this_playlist() {\n\n      // -- in case we play from playlist we overwrite whole footer playlist\n\n      window.dzsap_syncList_players = [];\n\n      _sliderClipper.children('.audioplayer,.audioplayer-tobe').each(function () {\n        var _t = $(this);\n        _t.addClass('feeded-whole-playlist');\n        if (_t.attr('data-do-not-include-in-list') != 'on') {\n          window.dzsap_syncList_players.push(_t);\n        }\n      })\n    }\n\n\n    function init_parse_track_data() {\n\n      if (trying_to_get_track_data) {\n        return false;\n      }\n\n      trying_to_get_track_data = true;\n\n      var data = {\n        action: 'dzsap_get_views_all',\n        postdata: '1',\n      };\n\n\n      if (o.settings_php_handler) {\n        $.ajax({\n          type: \"POST\",\n          url: o.settings_php_handler,\n          data: data,\n          success: function (response) {\n            //if(typeof window.console != \"undefined\" ){ console.log('Ajax - get - comments - ' + response); }\n\n            cgallery.attr('data-track-data', response);\n            parse_track_data();\n\n          },\n          error: function (arg) {\n            if (typeof window.console != \"undefined\") {\n              // console.log('Got this from the server: ' + arg, arg);\n            }\n            ;\n          }\n        });\n      }\n\n\n    }\n\n    function parse_track_data() {\n      if (cgallery.attr('data-track-data')) {\n        try {\n          track_data = JSON.parse(cgallery.attr('data-track-data'));\n        } catch (err) {\n          console.log(err);\n        }\n\n        if (track_data && track_data.length) {\n\n          selfGallery.navClass.parseTrackData(track_data);\n          //console.warn(foundnr, track_data.length);\n        }\n\n\n      }\n\n      //console.log(' track_data - ' ,track_data);\n    }\n\n    function get_nr_children() {\n      return nrChildren;\n    }\n\n    function find_player_id(arg) {\n      if (arg.attr('data-player-id')) {\n        return arg.attr('data-player-id');\n      } else {\n        if (arg.attr('id')) {\n          return arg.attr('id');\n        } else {\n          if (arg.attr('data-source')) {\n            return dzsapHelpers.dzs_clean_string(arg.attr('data-source'));\n          }\n        }\n      }\n    }\n\n    function reinit() {\n\n\n      //console.log('reinit()', cgallery.find('.items').eq(0).children(), cgallery.find('.items').eq(0).children().length);\n\n      var notInitedPlayersLength = cgallery.find('.items').eq(0).children('.audioplayer-tobe').length;\n      arr_menuitems = [];\n\n      var player_id = '';\n\n      //console.log('reinit - ', cgallery.find('.items').eq(0).children());\n\n      for (i = 0; i < notInitedPlayersLength; i++) {\n        // -- construct palyers here\n        var _c = cgallery.find('.items').children('.audioplayer-tobe').eq(0);\n\n        //console.log('_c) - ',_c);\n\n        var menuDescriptionHtml = '';\n\n        if (_c.find('.menu-description').html()) {\n          menuDescriptionHtml = _c.find('.menu-description').html();\n        } else {\n          menuDescriptionHtml = '';\n\n          if (_c.find('.feed-artist').length || _c.find('.feed-songname').length) {\n\n            menuDescriptionHtml = ``;\n            if (_c.attr('data-thumb')) {\n              menuDescriptionHtml += `<div class=\"menu-item-thumb-con\"><div class=\"menu-item-thumb\" style=\"background-image: url(${_c.attr('data-thumb')})\"></div></div>`;\n            }\n            menuDescriptionHtml += `<div class=\"menu-artist-info\"><span class=\"the-artist\">${_c.find('.feed-artist').html()}</span><span class=\"the-name\">${_c.find('.feed-songname').html()}</span></div>`\n          }\n        }\n\n        var auxer = {\n          'menu_description': menuDescriptionHtml\n          , 'player_id': find_player_id(_c)\n        }\n\n        arr_menuitems.push(auxer)\n        //cgallery.find('.items').children().eq(0).find('.menu-description').remove();\n\n        // console.log('_c - ',_c);\n\n\n        _sliderClipper.append(_c);\n\n        // if (o.settings_mode == 'mode-showall') {\n        //   _c.wrap('<div class=\"\"></div>')\n        // }\n\n      }\n\n\n      // console.log('arr_menuitems - ', arr_menuitems);\n      for (i = 0; i < arr_menuitems.length; i++) {\n        var extra_class = '';\n        if (arr_menuitems[i].menu_description && arr_menuitems[i].menu_description.indexOf('<div class=\"menu-item-thumb-con\"><div class=\"menu-item-thumb\" style=\"') == -1) {\n          extra_class += ' no-thumb';\n        }\n\n\n        var aux = '<div class=\"menu-item' + extra_class + '\"  data-menu-index=\"' + i + '\" data-gallery-id=\"' + cid + '\" data-playerid=\"' + arr_menuitems[i].player_id + '\">'\n\n        if (cgallery.hasClass('skin-aura')) {\n          aux += '<div class=\"menu-item-number\">' + (++nrChildren) + '</div>';\n        }\n\n        aux += arr_menuitems[i].menu_description;\n\n\n        if (cgallery.hasClass('skin-aura') && String(arr_menuitems[i].menu_description).indexOf('menu-item-views') == 1) {\n\n          if (track_data && track_data.length > 0) {\n\n            aux += '<div class=\"menu-item-views\"></div>';\n          } else {\n\n            init_parse_track_data();\n            aux += '<div class=\"menu-item-views\">' + dzsapSvgs.svg_play_icon + ' ' + '<span class=\"the-count\">{{views_' + arr_menuitems[i].player_id + '}}' + '</span></div>';\n          }\n\n        }\n\n\n        aux += '</div>';\n\n        _navClipper.append(aux);\n\n\n        if (cgallery.hasClass('skin-aura')) {\n\n          if (arr_menuitems[i] && arr_menuitems[i].menu_description && arr_menuitems[i].menu_description.indexOf('float-right') > -1) {\n            _navClipper.children().last().addClass('has-extra-info')\n          }\n        }\n        // nrChildren++;\n      }\n    }\n\n    function init_loaded() {\n      // -- gallery\n\n      cgallery.addClass('dzsag-loaded');\n    }\n\n    function click_downloadAfterRate() {\n      var _t = $(this);\n\n\n      if (_t.hasClass('active') == false) {\n        alert(str_alertBeforeRate)\n        return false;\n      }\n    }\n\n\n    function play_curr_media() {\n\n      if (typeof (_sliderClipper.children().eq(currNr).get(0)) != 'undefined') {\n        if (typeof (_sliderClipper.children().eq(currNr).get(0).api_play_media) != 'undefined') {\n          _sliderClipper.children().eq(currNr).get(0).api_play_media({\n            'call_from': 'play_curr_media_gallery'\n          });\n        }\n\n      }\n    }\n\n    function mode_showall_listen_for_play(arg) {\n\n      //console.log('mode_showall_listen_for_play()',currNr, arg);\n\n      if (o.settings_mode == 'mode-showall') {\n\n        var ind = _sliderClipper.children('.audioplayer,.audioplayer-tobe').index(arg);\n        //console.log(ind);\n        currNr = ind;\n        cgallery.get(0).currNr_2 = ind;\n        //console.log(cgallery,currNr)\n      }\n      //console.log('mode_showall_listen_for_play()',currNr,this, cgallery.get(0).currNr_2);\n    }\n\n    function handle_frame() {\n\n      // -- cgallery\n\n      if (isNaN(target_viy)) {\n        target_viy = 0;\n      }\n\n      if (duration_viy === 0) {\n        requestAnimationFrame(handle_frame);\n        return false;\n      }\n\n      begin_viy = target_viy;\n      change_viy = selfGallery.navClass.finish_viy - begin_viy;\n\n\n      //console.log('handle_frame', finish_viy, duration_viy, target_viy);\n\n      //console.log(duration_viy);\n\n\n      target_viy = Number(Math.easeIn(1, begin_viy, change_viy, duration_viy).toFixed(4));\n      ;\n\n\n      if (dzsapHelpers.is_ios() == false && dzsapHelpers.is_android() == false) {\n        _navClipper.css({\n          'transform': 'translateY(' + target_viy + 'px)'\n        });\n      }\n\n\n      //console.log(_blackOverlay,target_bo);;\n\n      requestAnimationFrame(handle_frame);\n    }\n\n\n    function toggle_menu_state() {\n\n      selfGallery.navClass.toggle_menu_state();\n    }\n\n    function gallery_handle_end() {\n\n      if (o.autoplayNext == 'on') {\n\n        goto_next();\n      }\n    }\n\n    function player_commentSubmitted() {\n      _navClipper.children('.menu-item').eq(currNr).find('.download-after-rate').addClass('active');\n\n    }\n\n    function player_rateSubmitted() {\n      _navClipper.children('.menu-item').eq(currNr).find('.download-after-rate').addClass('active');\n    }\n\n    function calculateDims() {\n      //                console.log('calculateDims');\n\n\n      // console.log('_sliderClipper.hasClass(\\'isotoped\\') - ',_sliderClipper.hasClass('isotoped'));\n      if (o.settings_mode != 'mode-showall' && _sliderClipper.hasClass('isotoped') == false && o.mode_normal_video_mode != 'one') {\n        // -- mode normal, not isotope\n        if (_sliderClipper.children().eq(currNr).hasClass('zoomsounds-wrapper-bg-bellow') == false) {\n          _sliderClipper.css('height', _sliderClipper.children().eq(currNr).outerHeight());\n\n        }\n      }\n\n      if (_sliderClipper.hasClass('isotoped') == false) {\n        // -- not isotope\n        setTimeout(function () {\n          _sliderClipper.css('height', 'auto');\n        }, ConstantsDzsAp.PLAYLIST_TRANSITION_DURATION);\n      }\n\n      //                _navMain.show();\n\n      //                return;\n\n\n      selfGallery.navClass.calculateDims();\n\n      if (o.embedded == 'on') {\n        //console.log(window.frameElement)\n        if (window.frameElement) {\n          window.frameElement.height = cgallery.height();\n          //console.log(window.frameElement.height, cgallery.outerHeight())\n        }\n      }\n    }\n\n\n    function calculate_on_interval() {\n      // -- @called on setInterval\n\n      selfGallery.navClass.calculateDims();\n\n      // -- this is for player ? todo ...\n      if (0 && o.gallery_gapless_play == 'on') {\n        var args = {\n          'call_from': 'gapless_play'\n        }\n\n        if (o.parentgallery && cthis.hasClass('active-from-gallery')) {\n          var _c = o.parentgallery;\n          // console.log(_c);\n          // console.log(_c.data('currNr'));\n\n\n          var _cach = _sliderClipper.children().eq(Number(_c.data('currNr')) + 1);\n\n\n          if (!(_cach.data('gapless-inited') == true)) {\n\n            var args = {\n              preload_method: \"auto\"\n              , \"autoplay\": \"off\"\n              , \"call_from\": \"gapless_play\"\n            }\n\n\n            _c.get(0).api_init_player_from_gallery(_cach, args);\n\n            _cach.data('gapless-inited', true);\n\n            setTimeout(function () {\n              _cach.get(0).api_handleResize();\n            }, 1000)\n          }\n        }\n      }\n\n\n      // console.log('nm_maindim - ' ,nc_maindim);\n    }\n\n\n    function handleResize() {\n\n      if (o.settings_mode !== 'mode-showall' && _sliderClipper.hasClass('isotoped') === false) {\n        setTimeout(function () {\n          //console.log(_sliderClipper.children().eq(currNr), _sliderClipper.children().eq(currNr).height())\n          _sliderClipper.css('height', _sliderClipper.children().eq(currNr).outerHeight());\n        }, 500);\n      }\n\n      calculateDims();\n\n    }\n\n    function transition_end(newCurrNr) {\n      _sliderClipper.children().eq(lastCurrNr).removeClass('transitioning-out');\n\n      _sliderClipper.children().eq(newCurrNr).removeClass('transitioning-in');\n      lastCurrNr = currNr;\n      busy = false;\n    }\n\n    function transition_bg_end() {\n      cgallery.parent().children('.the-bg').eq(0).remove();\n      busy = false;\n    }\n\n    function goto_prev() {\n      tempNr = currNr;\n      tempNr--;\n\n      var sw_goto_item = true;\n\n\n      if (tempNr < 0) {\n        tempNr = _sliderClipper.children().length - 1;\n\n        if (o.loop_playlist == 'off') {\n          sw_goto_item = false;\n        }\n      }\n\n      if (sw_goto_item) {\n\n        goto_item(tempNr);\n      }\n    }\n\n    function goto_next() {\n      // console.warn('ag','goto_next()', currNr,cgallery.get(0).currNr_2);\n      tempNr = currNr;\n\n\n      var sw_goto_item = true;\n\n      if (o.settings_mode == 'mode-showall') {\n        tempNr = cgallery.get(0).currNr_2;\n      }\n      tempNr++;\n      if (tempNr >= _sliderClipper.children().length) {\n        tempNr = 0;\n\n        if (o.loop_playlist == 'off') {\n          sw_goto_item = false;\n        }\n      }\n\n\n      if (sw_goto_item) {\n\n        goto_item(tempNr);\n      }\n    }\n\n    function goto_item(newCurrNr, pargs) {\n\n\n      var margs = {\n\n        'ignore_arg_currNr_check': false\n        , 'ignore_linking': false // -- does not change the link if set to true\n        , donotopenlink: \"off\"\n        , called_from: \"default\"\n      }\n\n      if (pargs) {\n        margs = $.extend(margs, pargs);\n      }\n\n      // console.log('goto_item()', arg, busy);\n\n      if (busy == true) {\n        return;\n      }\n\n      if (newCurrNr == \"last\") {\n        newCurrNr = _sliderClipper.children().length - 1;\n      }\n\n      // console.log('goto_item()', currNr, newCurrNr, '(currNr == newCurrNr)', currNr == newCurrNr, busy, newCurrNr==\"last\");\n\n\n      if (!!(currNr == newCurrNr)) {\n\n        if (_sliderClipper && _sliderClipper.children().eq(currNr).get(0) && _sliderClipper.children().eq(currNr).get(0).api_play_media) {\n          _sliderClipper.children().eq(currNr).get(0).api_play_media({\n            'call_from': 'gallery'\n          });\n        }\n        return;\n      }\n\n      var _audioplayerToBeActive = _sliderClipper.children('.audioplayer,.audioplayer-tobe').eq(newCurrNr);\n\n      // console.warn('_audioplayerToBeActive - ', _audioplayerToBeActive);\n      // console.warn('currNr - ', currNr);\n      var currNr_last_vol = '';\n\n      if (currNr > -1) {\n        if (typeof (_sliderClipper.children().eq(currNr).get(0)) != 'undefined') {\n          if (typeof (_sliderClipper.children().eq(currNr).get(0).api_pause_media) != 'undefined') {\n            _sliderClipper.children().eq(currNr).get(0).api_pause_media();\n          }\n          if (typeof (_sliderClipper.children().eq(currNr).get(0).api_get_last_vol) != 'undefined') {\n            currNr_last_vol = _sliderClipper.children().eq(currNr).get(0).api_get_last_vol();\n          }\n\n        }\n\n\n        _navClipper.children().removeClass('active active-from-gallery');\n\n\n        if (o.mode_normal_video_mode == 'one') {\n\n        } else {\n\n          if (o.settings_mode != 'mode-showall') {\n\n\n            //console.log(o.playlistTransition);\n            _sliderClipper.children().eq(currNr).removeClass('active active-from-gallery');\n            _navClipper.children().eq(currNr).removeClass('active active-from-gallery');\n\n\n          }\n        }\n\n      }\n\n\n      // --  setting settings\n      if (o.settings_ap.design_skin === 'sameasgallery') {\n        o.settings_ap.design_skin = o.design_skin;\n      }\n\n      // console.log('o.settings_ap HERE IT IS 2 - ',$.extend({}, o.settings_ap), currNr);\n\n\n      // console.log('%c o.autoplay from gallery - ','background-color: #dadada;',o.autoplay);\n\n      // -- if this is  the first audio\n      if (currNr == -1 && o.autoplay == 'on') {\n        o.settings_ap.autoplay = 'on';\n      }\n      // console.log('o.settings_ap HERE IT IS 24 - ',$.extend({}, o.settings_ap));\n\n      // -- if this is not the first audio\n      if (currNr > -1 && o.autoplayNext == 'on') {\n        o.settings_ap.autoplay = 'on';\n      }\n      o.settings_ap.parentgallery = cgallery;\n\n      o.settings_ap.design_menu_show_player_state_button = o.design_menu_show_player_state_button;\n      o.settings_ap.cue = 'on';\n      if (first == true) {\n        if (o.cueFirstMedia == 'off') {\n          o.settings_ap.cue = 'off';\n        }\n\n        first = false;\n      }\n\n      // -- setting settings END\n\n\n      var args_player = $.extend({}, o.settings_ap);\n\n      // console.log('o.settings_ap HERE IT IS 3 - ',$.extend({}, o.settings_ap));\n\n      args_player.volume_from_gallery = currNr_last_vol;\n      args_player.call_from = 'gotoItem';\n      args_player.player_navigation = o.player_navigation;\n\n      // console.log('lets init player here', arg);\n      if (o.mode_normal_video_mode == 'one' && newCurrNr > -1 && margs.called_from != 'init') {\n        // -- video mode -> one\n\n\n        // console.error('lets init player here', arg);\n\n        var _c = _sliderClipper.children().eq(0).get(0);\n        _audioplayerToBeActive = _sliderClipper.children().eq(0);\n\n        if (_c) {\n          if (_c.api_play_media) {\n\n            // console.log('_sliderClipper.children().eq(arg) -5 ',_sliderClipper.children().eq(arg));\n            _c.api_change_media(_sliderClipper.children().eq(newCurrNr), {\n              'called_from': 'goto_item -- mode_normal_video_mode()',\n              'modeOneGalleryIndex': newCurrNr,\n              'source_player_do_not_update': 'on',\n              // ,'fakeplayer_is_feeder':'on'\n            });\n\n            if (o.autoplayNext == 'on') {\n              setTimeout(function () {\n                _c.api_play_media();\n              }, 200);\n            }\n          }\n        }\n      } else {\n\n        // -- init player from gallery\n        init_player_from_gallery(_audioplayerToBeActive, args_player);\n\n      }\n\n\n      // -- actions after init\n      if (o.autoplayNext === 'on') {\n        if (o.settings_mode === 'mode-showall') {\n          currNr = cgallery.get(0).currNr_2;\n        }\n        if (!!(currNr > -1 && _audioplayerToBeActive.get(0) && _audioplayerToBeActive.get(0).api_play)) {\n          _audioplayerToBeActive.get(0).api_play();\n        }\n      }\n\n      if (o.settings_ap.playfrom === undefined || o.settings_ap.playfrom === \"0\") {\n        if (_audioplayerToBeActive.get(0) && _audioplayerToBeActive.get(0).api_seek_to) {\n          _audioplayerToBeActive.get(0).api_seek_to(0, {call_from: 'playlist_seek_from_0'});\n        } else {\n          console.log('_audioplayerToBeActive not found - ', _audioplayerToBeActive);\n        }\n      }\n\n      // console.log('o.settings_ap - ', o.settings_ap);\n      // -- end actions after init\n\n      dzsap_currplayer_focused = _audioplayerToBeActive.get(0);\n\n\n      if (o.settings_mode !== 'mode-showall') {\n        _sliderClipper.children().eq(currNr).addClass('transitioning-out');\n        _audioplayerToBeActive.removeClass('transitioning-out-complete');\n        _audioplayerToBeActive.addClass('transitioning-in');\n        setTimeout((_arg) => {\n          _arg.addClass('transitioning-out-complete')\n        }, ConstantsDzsAp.PLAYLIST_TRANSITION_DURATION, _sliderClipper.children().eq(currNr));\n\n        if (_audioplayerToBeActive.attr('data-type') != 'link') {\n          if (margs.ignore_linking == false && o.settings_enable_linking == 'on') {\n            var stateObj = {foo: \"bar\"};\n            history.pushState(stateObj, null, dzsapHelpers.add_query_arg(window.location.href, 'audiogallery_startitem_' + cid, (newCurrNr)));\n          }\n        }\n\n        if (o.playlistTransition === 'fade') {\n          setTimeout(transition_end, ConstantsDzsAp.PLAYLIST_TRANSITION_DURATION, newCurrNr);\n          busy = true;\n        }\n        if (o.playlistTransition === 'direct') {\n          transition_end(newCurrNr);\n        }\n      }\n\n      _audioplayerToBeActive.addClass('active active-from-gallery');\n      _navClipper.children().eq(newCurrNr).addClass('active active-from-gallery');\n\n      // -- background parent\n\n      // console.log('_audioplayerToBeActive - ',_audioplayerToBeActive);\n\n\n      var bgimage = '';\n\n      if (_audioplayerToBeActive.attr(\"data-bgimage\")) {\n        bgimage = _audioplayerToBeActive.attr(\"data-bgimage\");\n      }\n\n      if (_audioplayerToBeActive.attr(\"data-wrapper-image\")) {\n        bgimage = _audioplayerToBeActive.attr(\"data-wrapper-image\");\n      }\n\n\n      if (bgimage && cgallery.parent().hasClass('ap-wrapper') && cgallery.parent().children('.the-bg').length > 0) {\n\n        // console.warn(\"ENTER HIER\");\n        cgallery.parent().children('.the-bg').eq(0).after('<div class=\"the-bg\" style=\"background-image: url(' + bgimage + ');\"></div>')\n        cgallery.parent().children('.the-bg').eq(0).css({\n          'opacity': 1\n        })\n\n\n        cgallery.parent().children('.the-bg').eq(1).css({\n          'opacity': 0\n        })\n        cgallery.parent().children('.the-bg').eq(1).animate({\n          'opacity': 1\n        }, {\n          queue: false,\n          duration: 1000,\n          complete: transition_bg_end,\n          step: function () {\n            busy = true;\n          }\n        })\n        busy = true;\n      }\n\n\n      //console.log('set currNr', currNr, o.settings_mode);\n\n      if (o.settings_mode != 'mode-showall') {\n\n        currNr = newCurrNr;\n\n        cgallery.data('currNr', currNr);\n      }\n\n\n      //console.log('_sliderClipper.children().eq(currNr) - ',_sliderClipper.children().eq(currNr));\n      if (_sliderClipper.children().eq(currNr).get(0) && _sliderClipper.children().eq(currNr).get(0).api_handleResize && _sliderClipper.children().eq(currNr).hasClass('media-setuped')) {\n\n\n        //console.log('_sliderClipper.children().eq(currNr) - ',_sliderClipper.children().eq(currNr));\n        _sliderClipper.children().eq(currNr).get(0).api_handleResize();\n      }\n\n      calculateDims();\n    }\n\n    function init_player_from_gallery(_cache, pargs) {\n\n      var player_args = $.extend({}, o.settings_ap);\n\n\n      if (pargs) {\n        player_args = $.extend(player_args, pargs);\n      }\n\n      // console.log('init_player_from_gallery',margs_player);\n      // console.log('currNr_last_vol', currNr_last_vol);\n\n      if (_cache.hasClass('audioplayer-tobe')) {\n        o.settings_ap.call_from = 'init player from gallery';\n        // console.log('player_args - ', player_args);\n        _cache.audioplayer(player_args);\n      }\n    }\n  }\n}\n\nexport const registerToJquery = function ($) {\n  $.fn.audiogallery = function (argOptions) {\n    var finalOptions = {};\n    var defaultOptions = require('../configs/_settingsPlaylist').default_opts;\n    finalOptions = dzsapHelpers.convertPluginOptionsToFinalOptions(this, defaultOptions, argOptions);\n\n\n    this.each(function () {\n\n      var _ag = new DzsApPlaylist(this, finalOptions, $);\n\n      // console.log('this playlist -2 ', this);\n      this.linkedClassInstance = _ag;\n    });\n  }\n\n\n  window.dzsag_init = function (selector, settings) {\n    if (typeof (settings) !== \"undefined\" && typeof (settings.init_each) !== \"undefined\" && settings.init_each === true) {\n      if (Object.keys(settings).length === 1) {\n        settings = undefined;\n      }\n\n      $(selector).each(function () {\n        var _t = $(this);\n        _t.audiogallery(settings)\n      });\n    } else {\n      $(selector).audiogallery(settings);\n    }\n  }\n}\n","\n\n\nvar playbtn_svg = '<svg class=\"svg-icon\" version=\"1.2\" baseProfile=\"tiny\" id=\"Layer_1\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"25px\" height=\"30px\" viewBox=\"0 0 25 30\" xml:space=\"preserve\"> <path d=\"M24.156,13.195L2.406,0.25C2.141,0.094,1.867,0,1.555,0C0.703,0,0.008,0.703,0.008,1.562H0v26.875h0.008 C0.008,29.297,0.703,30,1.555,30c0.32,0,0.586-0.109,0.875-0.266l21.727-12.93C24.672,16.375,25,15.727,25,15 S24.672,13.633,24.156,13.195z\"/> </svg>';\nvar pausebtn_svg = '<svg class=\"svg-icon\" version=\"1.1\" id=\"Layer_3\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"12px\" height=\"13px\" viewBox=\"0 0 13.415 16.333\" enable-background=\"new 0 0 13.415 16.333\" xml:space=\"preserve\"> <path fill=\"#D2D6DB\" d=\"M4.868,14.59c0,0.549-0.591,0.997-1.322,0.997H2.2c-0.731,0-1.322-0.448-1.322-0.997V1.618 c0-0.55,0.592-0.997,1.322-0.997h1.346c0.731,0,1.322,0.447,1.322,0.997V14.59z\"/> <path fill=\"#D2D6DB\" d=\"M12.118,14.59c0,0.549-0.593,0.997-1.324,0.997H9.448c-0.729,0-1.322-0.448-1.322-0.997V1.619 c0-0.55,0.593-0.997,1.322-0.997h1.346c0.731,0,1.324,0.447,1.324,0.997V14.59z\"/> </svg>';\n\n\n\n\n\nvar svg_share_icon = '<svg class=\"svg-icon\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Capa_1\" x=\"0px\" y=\"0px\" width=\"512px\" height=\"512px\" viewBox=\"0 0 511.626 511.627\" style=\"enable-background:new 0 0 511.626 511.627;\" xml:space=\"preserve\"> <g> <path d=\"M506.206,179.012L360.025,32.834c-3.617-3.617-7.898-5.426-12.847-5.426s-9.233,1.809-12.847,5.426 c-3.617,3.619-5.428,7.902-5.428,12.85v73.089h-63.953c-135.716,0-218.984,38.354-249.823,115.06C5.042,259.335,0,291.03,0,328.907 c0,31.594,12.087,74.514,36.259,128.762c0.57,1.335,1.566,3.614,2.996,6.849c1.429,3.233,2.712,6.088,3.854,8.565 c1.146,2.471,2.384,4.565,3.715,6.276c2.282,3.237,4.948,4.859,7.994,4.859c2.855,0,5.092-0.951,6.711-2.854 c1.615-1.902,2.424-4.284,2.424-7.132c0-1.718-0.238-4.236-0.715-7.569c-0.476-3.333-0.715-5.564-0.715-6.708 c-0.953-12.938-1.429-24.653-1.429-35.114c0-19.223,1.668-36.449,4.996-51.675c3.333-15.229,7.948-28.407,13.85-39.543 c5.901-11.14,13.512-20.745,22.841-28.835c9.325-8.09,19.364-14.702,30.118-19.842c10.756-5.141,23.413-9.186,37.974-12.135 c14.56-2.95,29.215-4.997,43.968-6.14s31.455-1.711,50.109-1.711h63.953v73.091c0,4.948,1.807,9.232,5.421,12.847 c3.62,3.613,7.901,5.424,12.847,5.424c4.948,0,9.232-1.811,12.854-5.424l146.178-146.183c3.617-3.617,5.424-7.898,5.424-12.847 C511.626,186.92,509.82,182.636,506.206,179.012z\" fill=\"#696969\"/> </g></svg> ';\n\n\n\nvar svg_embed_button = ' <svg class=\"svg-icon\" version=\"1.1\" id=\"Layer_1\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"10.975px\" height=\"14.479px\" viewBox=\"0 0 10.975 14.479\" enable-background=\"new 0 0 10.975 14.479\" xml:space=\"preserve\"> <g> <path d=\"M2.579,1.907c0.524-0.524,1.375-0.524,1.899,0l4.803,4.804c0.236-0.895,0.015-1.886-0.687-2.587L5.428,0.959 c-1.049-1.05-2.75-1.05-3.799,0L0.917,1.671c-1.049,1.05-1.049,2.751,0,3.801l3.167,3.166c0.7,0.702,1.691,0.922,2.587,0.686 L1.867,4.52c-0.524-0.524-0.524-1.376,0-1.899L2.579,1.907z M5.498,13.553c1.05,1.05,2.75,1.05,3.801,0l0.712-0.713 c1.05-1.05,1.05-2.75,0-3.8L6.843,5.876c-0.701-0.7-1.691-0.922-2.586-0.686l4.802,4.803c0.524,0.525,0.524,1.376,0,1.897 l-0.713,0.715c-0.523,0.522-1.375,0.522-1.898,0L1.646,7.802c-0.237,0.895-0.014,1.886,0.686,2.586L5.498,13.553z\"/> </g> </svg> ';\n\n\n\nvar svg_prev_btn = '<svg class=\"svg-icon\" version=\"1.1\" id=\"Layer_2\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"14px\" height=\"14px\" viewBox=\"0 0 12.5 12.817\" enable-background=\"new 0 0 12.5 12.817\" xml:space=\"preserve\"> <g> <g> <g> <path fill=\"#D2D6DB\" d=\"M2.581,7.375c-0.744-0.462-1.413-0.94-1.486-1.061C1.021,6.194,1.867,5.586,2.632,5.158l2.35-1.313 c0.765-0.427,1.505-0.782,1.646-0.789s0.257,1.03,0.257,1.905V7.87c0,0.876-0.051,1.692-0.112,1.817 C6.711,9.81,5.776,9.361,5.032,8.898L2.581,7.375z\"/> </g> </g> </g> <g> <g> <g> <path fill=\"#D2D6DB\" d=\"M6.307,7.57C5.413,7.014,4.61,6.441,4.521,6.295C4.432,6.15,5.447,5.42,6.366,4.906l2.82-1.577 c0.919-0.513,1.809-0.939,1.979-0.947s0.309,1.236,0.309,2.288v3.493c0,1.053-0.061,2.033-0.135,2.182S10.144,9.955,9.25,9.4 L6.307,7.57z\"/> </g> </g> </g> </svg>';\nvar svg_next_btn = '<svg class=\"svg-icon\" version=\"1.1\" id=\"Layer_2\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"14px\" height=\"14px\" viewBox=\"0 0 12.5 12.817\" enable-background=\"new 0 0 12.5 12.817\" xml:space=\"preserve\"> <g> <g> <g> <path fill=\"#D2D6DB\" d=\"M9.874,5.443c0.744,0.462,1.414,0.939,1.486,1.06c0.074,0.121-0.771,0.729-1.535,1.156L7.482,8.967 C6.719,9.394,5.978,9.75,5.837,9.756C5.696,9.761,5.581,8.726,5.581,7.851V4.952c0-0.875,0.05-1.693,0.112-1.816 c0.062-0.124,0.995,0.326,1.739,0.788L9.874,5.443z\"/> </g> </g> </g> <g> <g> <g> <path fill=\"#D2D6DB\" d=\"M6.155,5.248c0.893,0.556,1.696,1.129,1.786,1.274c0.088,0.145-0.928,0.875-1.847,1.389l-2.811,1.57 c-0.918,0.514-1.808,0.939-1.978,0.947c-0.169,0.008-0.308-1.234-0.308-2.287V4.66c0-1.052,0.061-2.034,0.135-2.182 s1.195,0.391,2.089,0.947L6.155,5.248z\"/> </g> </g> </g> </svg>';\n\n\n\n\n\nvar svg_menu_state = '<svg class=\"svg-icon\" version=\"1.1\" id=\"Layer_2\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"13.25px\" height=\"13.915px\" viewBox=\"0 0 13.25 13.915\" enable-background=\"new 0 0 13.25 13.915\" xml:space=\"preserve\"> <path d=\"M1.327,4.346c-0.058,0-0.104-0.052-0.104-0.115V2.222c0-0.063,0.046-0.115,0.104-0.115H11.58 c0.059,0,0.105,0.052,0.105,0.115v2.009c0,0.063-0.046,0.115-0.105,0.115H1.327z\"/> <path d=\"M1.351,8.177c-0.058,0-0.104-0.051-0.104-0.115V6.054c0-0.064,0.046-0.115,0.104-0.115h10.252 c0.058,0,0.105,0.051,0.105,0.115v2.009c0,0.063-0.047,0.115-0.105,0.115H1.351z\"/> <path d=\"M1.351,12.182c-0.058,0-0.104-0.05-0.104-0.115v-2.009c0-0.064,0.046-0.115,0.104-0.115h10.252 c0.058,0,0.105,0.051,0.105,0.115v2.009c0,0.064-0.047,0.115-0.105,0.115H1.351z\"/> </svg>';\nvar svg_embed_btn = '<svg class=\"svg-icon\" version=\"1.2\" baseProfile=\"tiny\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"15px\" height=\"15px\" viewBox=\"0 0 15 15\" xml:space=\"preserve\"> <g id=\"Layer_1\"> <polygon fill=\"#E6E7E8\" points=\"1.221,7.067 0.494,5.422 4.963,1.12 5.69,2.767 \"/> <polygon fill=\"#E6E7E8\" points=\"0.5,5.358 1.657,4.263 3.944,10.578 2.787,11.676 \"/> <polygon fill=\"#E6E7E8\" points=\"13.588,9.597 14.887,8.34 12.268,2.672 10.969,3.93 \"/> <polygon fill=\"#E6E7E8\" points=\"14.903,8.278 14.22,6.829 9.714,11.837 10.397,13.287 \"/> </g> <g id=\"Layer_2\"> <rect x=\"6.416\" y=\"1.713\" transform=\"matrix(0.9663 0.2575 -0.2575 0.9663 2.1699 -1.6329)\" fill=\"#E6E7E8\" width=\"1.805\" height=\"11.509\"/> </g> </svg>';\n\n\nvar svg_footer_playlist = '<svg class=\"svg-icon\" version=\"1.1\" id=\"Layer_2\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"13.25px\" height=\"13.915px\" viewBox=\"0 0 13.25 13.915\" enable-background=\"new 0 0 13.25 13.915\" xml:space=\"preserve\"> <path d=\"M1.327,4.346c-0.058,0-0.104-0.052-0.104-0.115V2.222c0-0.063,0.046-0.115,0.104-0.115H11.58 c0.059,0,0.105,0.052,0.105,0.115v2.009c0,0.063-0.046,0.115-0.105,0.115H1.327z\"/> <path d=\"M1.351,8.177c-0.058,0-0.104-0.051-0.104-0.115V6.054c0-0.064,0.046-0.115,0.104-0.115h10.252 c0.058,0,0.105,0.051,0.105,0.115v2.009c0,0.063-0.047,0.115-0.105,0.115H1.351z\"/> <path d=\"M1.351,12.182c-0.058,0-0.104-0.05-0.104-0.115v-2.009c0-0.064,0.046-0.115,0.104-0.115h10.252 c0.058,0,0.105,0.051,0.105,0.115v2.009c0,0.064-0.047,0.115-0.105,0.115H1.351z\"/> </svg>';\n\n\nexports.svg_footer_playlist = svg_footer_playlist;\nexports.svg_embed_btn = svg_embed_btn;\nexports.svg_prev_btn = svg_prev_btn;\nexports.svg_next_btn = svg_next_btn;\nexports.svg_menu_state = svg_menu_state;\n\nexports.svg_embed_button = svg_embed_button;\nexports.playbtn_svg = playbtn_svg;\nexports.svg_share_icon = svg_share_icon;\nexports.pausebtn_svg = pausebtn_svg;\n","import * as dzsapHelpers from \"./_dzsap_helpers\";\n\n/**\n * @property actualTotalTime\n */\nexport class PlayerTime {\n  constructor(selfClass) {\n\n    this.timeCurrent = 0;\n    this.timeTotal = 0;\n    this.sampleTimeStart = null;\n    this.sampleTimeEnd = null;\n    this.sampleTimeTotal = null;\n\n    this.referenceMediaCurrentTime = 0;\n    this.referenceMediaTotalTime = 0;\n\n    this.visualCurrentTime = null;\n    this.visualTotalTime = null;\n\n    this.actualTotalTime = null;\n\n    // console.log('inited');\n    this.dzsapInstance = selfClass;\n    this.init();\n  }\n\n  init() {\n\n\n\n\n  }\n\n  initObjects(){\n\n    var selfClass = this.dzsapInstance;\n    var timeInstance = this;\n\n\n    // -- set current time\n    selfClass.cthis.get(0).api_set_timeVisualCurrent = function (arg) {\n      timeInstance.visualCurrentTime = arg;\n\n      // this.visualCurrentTime = selfClass.sample_time_start + this.visualCurrentTime;\n\n    }\n    selfClass.cthis.get(0).api_get_time_total = function() {\n\n      return timeInstance.getVisualTotalTime();\n    }\n    selfClass.cthis.get(0).api_get_time_curr = function() {\n      return timeInstance.getVisualCurrentTime();\n    };\n\n    // -- set total time\n    selfClass.cthis.get(0).api_set_timeVisualTotal = function (arg) {\n      // time_total_for_visual = arg;\n      // curr_time_first_set = true;\n      // console.log('api_set_timeVisualTotal - ',arg, selfClass.cthis);\n      timeInstance.visualTotalTime = arg;\n      timeInstance.refreshTimes();\n      // if(selfClass.cthis.attr('id')==='player1'){\n      //   debugger;\n      // }\n    };\n  }\n\n\n\n  /**\n   * called from enterFrame and other places\n   */\n  refreshTimes() {\n\n    var selfClass = this.dzsapInstance;\n\n\n\n    // console.log('get_times () margs - ',margs,'type - ',type,o.type);\n    // -- trying to get current time\n    // console.log('selfClass.audioType -' , selfClass.audioType);\n    if ((selfClass.audioType === 'selfHosted' || (selfClass.audioType === 'fake' && selfClass._actualPlayer))) {\n      if (selfClass.dataType !== 'shoutcast') {\n\n\n        if (selfClass.$mediaNode_ && isNaN(selfClass.$mediaNode_.duration) === false) {\n          this.referenceMediaTotalTime = selfClass.$mediaNode_.duration;\n        }\n\n        if (0 && selfClass.spectrum_audioContext_buffer && selfClass.spectrum_audioContext_buffer !== 'placeholder' && selfClass.spectrum_audioContext_buffer !== 'waiting') {\n\n          if (selfClass._actualPlayer === null) {\n            this.referenceMediaCurrentTime = selfClass.spectrum_audioContext.currentTime;\n          }\n\n        } else {\n\n          // -- normal\n          if (selfClass.$mediaNode_) {\n            if (selfClass._actualPlayer === null) {\n              this.referenceMediaCurrentTime = selfClass.$mediaNode_.currentTime;\n            }\n          }\n        }\n\n\n        if (selfClass.playFrom === 'last' && selfClass.playFrom_ready) {\n          if (typeof Storage !== 'undefined') {\n            localStorage['dzsap_' + selfClass.the_player_id + '_lastpos'] = selfClass.timeCurrent;\n          }\n        }\n\n\n      }\n\n\n    }\n\n\n    if (selfClass._sourcePlayer && selfClass._sourcePlayer.get(0)) {\n      if (selfClass._sourcePlayer.get(0).api_get_time_curr) {\n        if (isNaN(selfClass._sourcePlayer.get(0).api_get_time_total()) || selfClass._sourcePlayer.get(0).api_get_time_total() === '' || selfClass._sourcePlayer.get(0).api_get_time_total() < 1) {\n          selfClass._sourcePlayer.get(0).api_set_timeVisualTotal(this.getVisualTotalTime());\n        }\n      }\n    }\n\n\n    // -- setting real times ( if actual player is not there )\n    if (selfClass._actualPlayer === null && this.referenceMediaCurrentTime > -1) {\n      selfClass.timeCurrent = this.referenceMediaCurrentTime;\n    }\n\n    if (selfClass._actualPlayer === null && this.referenceMediaTotalTime > -1) {\n      selfClass.timeTotal = this.referenceMediaTotalTime;\n    }\n\n\n\n\n    if (this.sampleTimeStart) {\n\n      if (this.visualCurrentTime < selfClass.pseudo_sample_time_start) {\n        this.visualCurrentTime = selfClass.pseudo_sample_time_start;\n      }\n\n\n      if (this.sampleTimeEnd) {\n        if (selfClass.timeCurrent > this.sampleTimeEnd) {\n\n          var args = {\n            'call_from': 'time_curr>pseudo_sample_time_end'\n          }\n          selfClass.handle_end(args);\n\n          selfClass.isMediaEnded = true;\n\n          clearTimeout(selfClass.inter_isEnded);\n          selfClass.inter_isEnded = setTimeout(function () {\n\n            selfClass.isMediaEnded = false;\n          }, 1000);\n        }\n      }\n    }\n  }\n\n  processCurrentFrame(){\n\n    var selfClass = this.dzsapInstance;\n    if (selfClass._sourcePlayer) {\n      if (selfClass._sourcePlayer.get(0)) {\n        if (selfClass._sourcePlayer.get(0).api_get_time_curr) {\n          selfClass._sourcePlayer.get(0).api_set_timeVisualCurrent(selfClass.timeCurrent);\n        }\n      }\n\n\n      if (selfClass._sourcePlayer.get(0) && selfClass._sourcePlayer.get(0).api_seek_to_visual) {\n        var temp_time_curr = selfClass.timeCurrent;\n        // TODO: to be continued\n        if (selfClass.pseudo_sample_time_start === 0) {\n\n          if (selfClass.sample_time_start) {\n            temp_time_curr -= selfClass.sample_time_start;\n          }\n        }\n\n\n        selfClass._sourcePlayer.get(0).api_seek_to_visual(temp_time_curr / selfClass.timeTotal);\n      } else {\n        console.log('warning .. no seek to visual');\n      }\n\n    }\n\n\n    // -- check end track\n    if (selfClass.isSafeToChangeTrack && selfClass.timeTotal > 1 && selfClass.timeCurrent >= selfClass.timeTotal - 0.07) {\n      var args = {\n        'call_from': 'selfClass.timeTotal > 0 && selfClass.timeCurrent >= selfClass.timeTotal - 0.07 ... '\n      }\n\n      if (selfClass._actualPlayer === null) {\n\n        selfClass.handle_end(args);\n        selfClass.isMediaEnded = true;\n\n\n        clearTimeout(selfClass.inter_isEnded);\n        selfClass.inter_isEnded = setTimeout(function () {\n          selfClass.isMediaEnded = false;\n        }, 1000);\n      }\n    }\n\n  }\n\n  getVisualCurrentTime(){\n\n    var selfClass = this.dzsapInstance;\n    // if(this.sampleTimeTotal){\n    //   return this.sampleTimeTotal;\n    // }\n\n    if (selfClass._actualPlayer === null && this.referenceMediaCurrentTime > -1) {\n      return this.referenceMediaCurrentTime;\n    }\n    // todo: actualPlayer\n\n\n\n    if(this.visualCurrentTime){\n      return this.visualCurrentTime;\n    }\n\n\n    if(selfClass.playFrom){\n      return selfClass.playFrom;\n    }\n\n    // todo: offsetVisual\n    // if (selfClass._actualPlayer === null) {\n    //   if (selfClass.pseudo_sample_time_start === 0) {\n    //     if (selfClass.sample_time_start > 0) {\n    //       time_curr_for_visual = selfClass.sample_time_start + time_curr_for_real;\n    //     }\n    //   }\n    // }\n\n    return 0;\n  }\n  getActualTotalTime(){\n    return this.actualTotalTime;\n  }\n\n  /**\n   *\n   * @returns {null|number}\n   */\n  getVisualTotalTime(){\n    var selfClass = this.dzsapInstance;\n    // if(selfClass.cthis.attr('id')==='player1'){\n    //   console.log('player1');\n    // }\n    if(this.sampleTimeTotal){\n      return this.sampleTimeTotal;\n    }\n\n\n    if (selfClass._actualPlayer === null){\n      if(this.referenceMediaTotalTime > -1) {\n        return this.referenceMediaTotalTime;\n      }\n    }else{\n      // -- has footer player\n\n      if(this.visualTotalTime){\n        return this.visualTotalTime;\n      }\n      //-- last resort\n      if(this.referenceMediaTotalTime > -1) {\n        return this.referenceMediaTotalTime;\n      }\n    }\n\n\n    return 0;\n  }\n\n  /**\n   * compare target scrub time with sample times\n   * @param targetTime\n   * @returns {*}\n   */\n  getActualTargetTime(targetTime){\n    if (this.sampleTimeStart) {\n      if (targetTime < this.sampleTimeStart) {\n        targetTime = this.sampleTimeStart;\n      }\n      if (targetTime > this.sampleTimeEnd) {\n        targetTime = this.sampleTimeEnd;\n      }\n    }\n\n    return targetTime;\n  }\n\n  getSampleTimesFromDom($targetPlayer = null) {\n    var selfClass = this.dzsapInstance;\n\n    selfClass.sample_time_start = 0;\n    selfClass.sample_time_total = 0;\n    selfClass.sample_time_start = 0;\n    selfClass.pseudo_sample_time_end = 0;\n\n\n    if($targetPlayer===null){\n      $targetPlayer = selfClass.cthis;\n    }\n\n\n\n    if ($targetPlayer.attr('data-sample_time_start')) {\n      this.sampleTimeStart = Number($targetPlayer.attr('data-sample_time_start'));\n    }\n    if ($targetPlayer.attr('data-sample_time_end')) {\n      this.sampleTimeEnd = Number($targetPlayer.attr('data-sample_time_end'));\n    }\n    if ($targetPlayer.attr('data-sample_time_total')) {\n      this.sampleTimeTotal = Number($targetPlayer.attr('data-sample_time_total'));\n    }\n\n    // console.log($targetPlayer, this, this.sampleTimeStart, this.sampleTimeEnd);\n\n    selfClass.sample_perc_start = selfClass.sample_time_start / selfClass.sample_time_total;\n    selfClass.sample_perc_end = selfClass.sample_time_end / selfClass.sample_time_total;\n\n\n    if ((this.sampleTimeTotal && this.sampleTimeStart) || (this.sampleTimeStart && this.sampleTimeEnd)) {\n      selfClass.isSample = true;\n    } else {\n      selfClass.isSample = false;\n    }\n\n  }\n}\n","const dzsapAjax = require('../_dzsap_ajax');\nconst dzsCommons = require('../../js_common/_dzs_helpers');\nimport * as dzsapHelpers from '../_dzsap_helpers';\n\nconst TOOLTIP_ALL_TALIGN_CLASSES = `talign-start talign-center talign-end`;\nconst STRUCTURE_COMMENTS_WRITER = `<div class=\"dzstooltip dzstooltip--comments-writer    talign-center arrow-top style-rounded color-dark-light    dims-set transition-slidedown \" style=\"width: 330px;\">  <div class=\"dzstooltip--inner\"><div class=\"comments-writer\"><div class=\"comments-writer-inner\">\n<div class=\"comments-writer--form\">\n\n                <div class=\"dzsap-comments--section\">\n\n                  <textarea name=\"comment-text\" placeholder=\"Your comment..\" type=\"text\" class=\"comment-input\"></textarea>\n\n                </div>\n                <div class=\"dzsap-comments--section\">\n                  <input placeholder=\"Your email..\" name=\"comment-email\" type=\"text\" class=\"comment-input\">\n                </div>\n                <div class=\"dzsap-comments--section overflow-and-fixed  \">\n\n                  <div class=\"flex-grow-1   \"><span\n                    class=\"dzsap-comments--comment-form-label\">commenting on </span> <span\n                    class=\"dzsap-comments--comment-form-label-time\">1:07</span></div>\n                  <div class=\"flex-grow-0 margin-left-auto\"><button class=\"submit-ap-comment dzs-button-dzsap float-right\">&#10148; Submit</button></div>\n                  <div class=\"clear\"></div>\n\n                </div>\n              </div>\n\n              <div class=\"comments-writer--avatar-con\">\n                <div class=\"comments-writer--avatar\" style=\"\"></div>\n              </div>\n              </div></div><span class=\"dzstooltip--close\"><span\n              class=\"label--x-button\">&#10006;</span></span></div></div>`;\n\n\nexport const hide_comments_writer = function (selfClass) {\n\n\n  var $ = jQuery;\n\n  //console.log(selfClass.$commentsWritter);\n  selfClass.cthis.removeClass('comments-writer-active');\n  selfClass._commentsHolder.find('.dzstooltip-con.placeholder').remove();\n  selfClass.$commentsWritter.removeClass('active');\n  selfClass.$commentsWritter.css({\n    'height': 0\n  })\n\n\n  if (selfClass.initOptions.parentgallery && $(selfClass.initOptions.parentgallery).get(0) !== undefined && $(selfClass.initOptions.parentgallery).get(0).api_handleResize !== undefined) {\n    $(selfClass.initOptions.parentgallery).get(0).api_handleResize();\n  }\n\n  setTimeout(function () {\n\n    selfClass.cthis.find('.comments-writter-temp-css,.dzsap-style-comments').remove();\n  }, 300);\n};\n\nexport const comments_setupCommentsInitial = function (selfClass) {\n  // console.log('comments_setupCommentsInitial()');\n\n  var $ = jQuery;\n  var o = selfClass.initOptions;\n\n\n  if (selfClass.cthis.find('.the-comments').length > 0 && selfClass.cthis.find('.the-comments').eq(0).children().length > 0) {\n    selfClass.$commentsChildren = selfClass.cthis.find('.the-comments').eq(0).children();\n  }\n\n  var str_comments_holder = '<div class=\"comments-holder\">';\n\n\n  if (o.skinwave_comments_links_to) {\n\n    str_comments_holder += '<a href=\"' + o.skinwave_comments_links_to + '\" target=\"_blank\" class=\"the-bg\"></a>';\n  } else {\n\n    str_comments_holder += '<div class=\"the-comments-holder-bg\"><div class=\"the-avatar comments-avatar--placeholder\"></div></div>';\n  }\n\n\n  str_comments_holder += '</div><div class=\"clear\"></div>' + STRUCTURE_COMMENTS_WRITER;\n\n\n  // debugger;\n  // if (selfClass.skinwave_mode === 'normal') {\n  //   selfClass._apControls.appendOnce(str_comments_holder);\n  // } else {\n  //   selfClass.cthis.appendOnce(str_comments_holder);\n  // }\n  selfClass._scrubbar.appendOnce(str_comments_holder);\n  selfClass._commentsHolder = selfClass.cthis.find('.comments-holder').eq(0);\n  selfClass.$commentsWritter = selfClass.cthis.find('.dzstooltip--comments-writer').eq(0);\n\n\n  var self = this;\n  this.comments_setupCommentsHolder(selfClass, {call_from: 'default'});\n\n  // console.log('selfClass._commentsHolder -> ',selfClass._commentsHolder);\n  // selfClass._commentsHolder.on('click', '.the-comments-holder-bg', click_comments_bg);\n\n\n  selfClass._commentsHolder.on('click', function (e) {\n    self.comments_handleClickCommentsBg(selfClass, this, e);\n  });\n  selfClass._commentsHolder.on('mousemove', function (e) {\n    ;\n\n    selfClass._commentsHolder.find('.comments-avatar--placeholder').css('left', `${dzsCommons.getRelativeX(e.pageX, e.currentTarget) - 7}px`)\n\n  });\n  selfClass.$commentsWritter.find('.dzstooltip--close').bind('click', (e) => {\n    self.comments_handleClickCancel(selfClass, e);\n  });\n  selfClass.$commentsWritter.find('.submit-ap-comment').bind('click', (e) => {\n    self.comments_handleClickSubmit(selfClass, e);\n  });\n}\nexport const comments_setupCommentsHolder = function (selfClass) {\n\n  // console.log('setup_controlsselfClass._commentsHolder() - arguments - ',arguments);\n\n  var $ = jQuery;\n  var o = selfClass.initOptions;\n\n  if (selfClass._commentsHolder && selfClass.$commentsChildren) {\n\n    // console.log(' _commentsChildren - ',_commentsChildren, selfClass.cthis);\n    selfClass.$commentsChildren.each(function () {\n\n      var _c = $(this);\n\n\n      if (o.skinwave_comments_process_in_php === 'on') {\n\n        if (_c && _c.hasClass && _c.hasClass('dzstooltip-con')) {\n          if (_c.find('.dzstooltip > .dzstooltip--inner').length) {\n\n          } else {\n            // -- convert\n\n\n            // console.error(\"CONVERT\");\n            _c.find('.dzstooltip').wrapInner('<div class=\"dzstooltip--inner\"></div>');\n\n\n            _c.find('.the-avatar').addClass('tooltip-indicator');\n            _c.find('.dzstooltip').before(_c.find('.tooltip-indicator'));\n            _c.find('.dzstooltip').addClass('talign-start style-rounded color-dark-light');\n          }\n        }\n      }\n\n      selfClass._commentsHolder.append(_c);\n    })\n  }\n\n}\n\nfunction comments_updateCommentHolderTimerWhenReady(selfClass, percClickFromScrubWidth) {\n\n\n  if (selfClass.timeModel.getVisualTotalTime()) {\n\n    selfClass.$commentsWritter.find('.dzsap-comments--comment-form-label-time').html(dzsapHelpers.formatTime(percClickFromScrubWidth * selfClass.timeModel.getVisualTotalTime()));\n  } else {\n    setTimeout(() => {\n      comments_updateCommentHolderTimerWhenReady(selfClass, percClickFromScrubWidth);\n    }, 100);\n  }\n\n}\n\nexport const comments_handleClickCommentsBg = function (selfClass, argThis, e) {\n\n\n  var $ = jQuery;\n  var o = selfClass.initOptions;\n\n  var $commentsHolder = $(argThis);\n  // console.log('click_comments_bg() --- ', $commentsHolder);\n  var leftMouseX = parseInt(e.clientX, 10) - $commentsHolder.offset().left;\n  let percClickFromScrubWidth = leftMouseX / $commentsHolder.width();\n\n\n  selfClass.commentPositionPerc = `calc(${(percClickFromScrubWidth) * 100}% - 7px)`;\n\n\n  comments_updateCommentHolderTimerWhenReady(selfClass, percClickFromScrubWidth);\n  // debugger;\n  if (o.skinwave_comments_links_to) {\n    return;\n  }\n  if (o.skinwave_comments_allow_post_if_not_logged_in === 'off' && !(window.dzsap_settings && window.dzsap_settings.comments_username)) {\n    return false;\n  }\n\n  // -- start\n\n  var sw = true;\n\n  // console.log({leftMouseX});\n\n  selfClass._commentsHolder.children().each(function () {\n    var $commentElement = $(this);\n    //console.log(_t2);\n\n    if ($commentElement.hasClass('placeholder') || $commentElement.hasClass('the-bg')) {\n      return;\n    }\n\n    var lmx2 = $commentElement.offset().left - $commentsHolder.offset().left;\n\n    //console.log(lmx2, Math.abs(lmx2-lmx));\n\n    if (Math.abs(lmx2 - leftMouseX) < 20) {\n      selfClass._commentsHolder.find('.dzstooltip-con.placeholder').remove();\n      sw = false;\n\n      return false;\n    }\n  })\n\n\n  if (!sw) {\n    return false;\n  }\n\n\n  // todo: assign left on tooltip\n  selfClass.$commentsWritter.css({\n    'left': `${leftMouseX}px`\n  })\n\n\n  selfClass.$commentsWritter.css('top', ((parseInt(selfClass._commentsHolder.css('top'), 10) + 20) + 'px'))\n\n\n  if (selfClass.$commentsWritter.hasClass('active') === false) {\n    selfClass.$commentsWritter.addClass('active');\n    selfClass.cthis.addClass('comments-writer-active');\n  }\n\n\n  if (window.dzsap_settings && window.dzsap_settings.comments_username) {\n    selfClass.cthis.find('input[name=comment-email]').remove();\n  } else {\n    selfClass.$commentsWritter.find('.comments-writer--avatar-con').remove();\n  }\n\n\n  add_comments_placeholder(selfClass);\n\n\n}\n\nfunction add_comments_placeholder(selfClass) {\n\n  var strCommentsAvatarUrl = '';\n\n  if(window.dzsap_settings && window.dzsap_settings.comments_avatar){\n    strCommentsAvatarUrl = window.dzsap_settings.comments_avatar;\n  }\n\n  selfClass._commentsHolder.remove('.dzsap-style-comments');\n  selfClass._commentsHolder.append('<style class=\"dzsap-style-comments\">.dzstooltip-con:not(.placeholder) { opacity: 0.5; }</style>')\n  selfClass._commentsHolder.find('.dzstooltip-con.placeholder').remove();\n  selfClass._commentsHolder.append('<span class=\"dzstooltip-con placeholder\" style=\"left:' + selfClass.commentPositionPerc + ';\"><div class=\"the-avatar\" style=\"background-image: url(' + strCommentsAvatarUrl + ')\"></div></span>');\n}\n\nexport const comments_handleClickCancel = function (selfClass, e) {\n  this.hide_comments_writer(selfClass);\n}\n\n\nfunction comment_submit(selfClass, comment_text, comment_email, comment_username) {\n\n  var $ = jQuery;\n  var o = selfClass.initOptions;\n\n  var comm_author = '';\n  if (comment_email) {\n    var regex_mail = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    if (regex_mail.test(comment_email) == false) {\n      alert('please insert email, your email is just used for gravatar. it will not be sent or stored anywhere');\n      return false;\n    }\n\n    comm_author = String(comment_email).split('@')[0];\n    //console.log(comm_author);\n\n\n    if (selfClass.$commentsSelector) {\n\n      selfClass.$commentsSelector.find('*[name=comment_email],*[name=comment_user]').remove();\n    }\n\n    if(!window.dzsap_settings){\n      window.dzsap_settings = {};\n    }\n\n    window.dzsap_settings.comments_username = comm_author;\n    window.dzsap_settings.comments_avatar = 'https://secure.gravatar.com/avatar/' + window.MD5(String(selfClass.cthis.find('input[name=comment-email]').eq(0).val()).toLowerCase()) + '?s=20';\n  }\n\n\n  // console.log('comment_submit() - ', comment_text, comment_email);\n\n  // return false;\n\n\n  var aux = '';\n\n\n\n  // -- process php\n\n  aux += comment_text;\n\n\n  selfClass.cthis.find('*[name=comment-text]').eq(0).val('');\n\n\n  selfClass.cthis.find('.comments-writter-temp-css,.dzsap-style-comments').remove();\n\n\n  (dzsapAjax.ajax_comment_publish.bind(selfClass))(aux);\n\n  hide_comments_writer(selfClass);\n\n  if (o.parentgallery && $(o.parentgallery).get(0) != undefined && $(o.parentgallery).get(0).api_player_commentSubmitted != undefined) {\n    $(o.parentgallery).get(0).api_player_commentSubmitted();\n  }\n\n}\n\n\nexport const comments_handleClickSubmit = function (selfClass, e) {\n\n  var comment_email = '';\n\n  if (selfClass.cthis.find('input[name=comment-email]').length) {\n    comment_email = selfClass.cthis.find('input[name=comment-email]').eq(0).val();\n  }\n\n\n  comment_submit(selfClass, selfClass.cthis.find('*[name=comment-text]').eq(0).val(), comment_email);\n\n\n  return false;\n}\n\n\nexport const comments_selector_event = function (selfClass, e) {\n  var $ = jQuery;\n  var _t = $(this);\n  var _con = null;\n\n  console.log('_t - ', _t);\n\n  if (_t.parent().parent().hasClass('zoomsounds-comment-wrapper')) {\n    _con = _t.parent().parent();\n  }\n  if (_t.parent().parent().parent().hasClass('zoomsounds-comment-wrapper')) {\n    _con = _t.parent().parent().parent();\n  }\n  // console.log(_t, e.type);\n  if (e.type == 'focusin') {\n\n    // console.log(_t);\n\n\n    var spx = selfClass.timeCurrent / selfClass.timeTotal * selfClass._commentsHolder.width();\n    spx += 'px';\n    // console.log(spx);\n\n\n    selfClass.commentPositionPerc = `calc(${selfClass.timeCurrent / selfClass.timeTotal * 100}% - 7px)`;\n\n    _con.addClass('active');\n\n    this.add_comments_placeholder(selfClass);\n  }\n  if (e.type == 'focusout') {\n\n\n  }\n  if (e.type == 'click') {\n\n    if (_t.hasClass('dzstooltip--close')) {\n\n      _con.removeClass('active');\n      _con.find('input').val('');\n    }\n    if (_t.hasClass('comments-btn-submit')) {\n\n\n      var comment_email = '';\n\n      if (_con.find('.comment_email').length) {\n        comment_email = _con.find('.comment_email').eq(0).val();\n      }\n\n\n      comment_submit(selfClass, _con.find('.comment_text').eq(0).val(), comment_email);\n\n\n      _con.removeClass('active');\n      _con.find('input').val('');\n\n\n      return false;\n    }\n\n\n  }\n}\n\n","import * as dzsapHelpers from '../_dzsap_helpers';\nimport * as dzsapAjax from '../_dzsap_ajax';\n\nconst {sanitizeToCssPx} = require(\"../../js_common/_dzs_helpers\");\n\nexport const ZoomSoundsNav = class {\n\n  constructor(parentGallery) {\n    this.parentGallery = parentGallery;\n\n    this.structZoomsoundsNav = '';\n    this._navMain = null;\n    this._navClipper = null;\n    this.cgallery = null;\n\n    this.size_navMainClipSize = null;\n    this.size_navMainTotalSize = null;\n    this.finish_viy = 0;\n\n    this.init();\n\n\n  }\n\n  init() {\n\n    var selfGallery = this.parentGallery;\n\n    this.structZoomsoundsNav = '<div class=\"nav-main zoomsounds-nav ' + selfGallery.initOptions.design_skin + ' navigation-method-' + selfGallery.initOptions.navigation_method + '\"><div class=\"nav-clipper\"></div></div>';\n\n\n    // -- let us do some sanitize\n    if (this.parentGallery.initOptions.navigation_method === 'full') {\n      this.parentGallery.initOptions.design_menu_height = 'auto';\n    }\n\n  }\n\n  init_ready() {\n    // -- this._navMain has been set\n    // console.log(this);\n\n    const self = this;\n    var selfGallery = this.parentGallery;\n\n    if (selfGallery.initOptions.disable_menu_navigation == 'on') {\n      this._navMain.hide();\n    }\n\n    if(!isNaN(Number(selfGallery.initOptions.design_menu_height))){\n      this._navMain.css({\n        'height': sanitizeToCssPx(selfGallery.initOptions.design_menu_height)\n      })\n    }\n\n    if (dzsapHelpers.is_ios() || dzsapHelpers.is_android()) {\n      this._navMain.css({\n        'overflow': 'auto'\n      })\n    }\n\n\n    if (selfGallery.initOptions.design_menu_state == 'closed') {\n      this._navMain.css({\n        'height': 0\n      })\n      this.cgallery.removeClass('menu-opened');\n      this.cgallery.addClass('menu-closed');\n    } else {\n      this.cgallery.addClass('menu-opened');\n      this.cgallery.removeClass('menu-closed');\n    }\n\n\n    this._navClipper.on('click', '.menu-btn-like,.menu-facebook-share', click_menuitem);\n    this._navClipper.on('click', '.menu-item', click_menuitem);\n\n\n    function click_menuitem(e) {\n      var _t = jQuery(this);\n\n      if (e.type == 'click') {\n        if (_t.hasClass('menu-item')) {\n          var ind = _t.parent().children().index(_t);\n\n          selfGallery.goto_item(ind);\n        }\n        if (_t.hasClass('menu-btn-like')) {\n\n\n          if (_t.parent().parent().attr('data-playerid')) {\n            (dzsapAjax.ajax_submit_like.bind(selfGallery))(1, _t.parent().parent().attr('data-playerid'), {\n              refferer: _t\n            });\n          }\n\n          //console.log(_t);\n          return false;\n        }\n        if (_t.hasClass('menu-facebook-share')) {\n          if (_t.parent().parent().attr('data-playerid')) {\n            (dzsapAjax.ajax_submit_like.bind(selfGallery))(1, _t.parent().parent().attr('data-playerid'), {\n              refferer: _t\n            });\n          }\n\n          //console.log(_t);\n          return false;\n        }\n      }\n\n    }\n\n\n  }\n\n\n  get_structZoomsoundsNav() {\n    return this.structZoomsoundsNav;\n  }\n\n  set_elements(_navMain, _navClipper, cgallery) {\n    this._navMain = _navMain;\n    this._navClipper = _navClipper;\n    this.cgallery = cgallery;\n  }\n\n  calculateDims() {\n\n    this.size_navMainClipSize = this._navMain.height();\n    this.size_navMainTotalSize = this._navClipper.outerHeight();\n\n    const self = this;\n\n    if (this.parentGallery.initOptions.navigation_method === 'mouseover') {\n\n      // console.log('this.size_navMainTotalSize - ' ,this.size_navMainTotalSize, 'this.size_navMainClipSize - ', this.size_navMainClipSize)\n\n      if (this.size_navMainTotalSize > this.size_navMainClipSize && this.size_navMainClipSize > 0) {\n        this._navMain.unbind('mousemove', navMain_mousemove);\n        this._navMain.bind('mousemove', navMain_mousemove);\n      } else {\n        this._navMain.unbind('mousemove', navMain_mousemove);\n      }\n    }\n\n    function navMain_mousemove(e) {\n      // console.log(this, e);\n      var aux_error = 20; //==erroring for the menu scroll\n      var $ = jQuery;\n      var _t = $(this);\n      var mx = e.pageX - _t.offset().left;\n      var my = e.pageY - _t.offset().top;\n\n      // console.log('navMain_mousemove', nm_maindim, nc_maindim, nm_maindim <= nc_maindim);\n      if (self.size_navMainTotalSize <= self.size_navMainClipSize) {\n        return;\n      }\n\n      self.size_navMainClipSize = self._navMain.outerHeight();\n\n      //console.log(mx);\n\n      var vix = 0;\n      var viy = 0;\n\n      viy = (my / self.size_navMainClipSize) * -(self.size_navMainTotalSize - self.size_navMainClipSize + 10 + aux_error * 2) + aux_error;\n      //console.log(viy);\n      if (viy > 0) {\n        viy = 0;\n      }\n      if (viy < -(self.size_navMainTotalSize - self.size_navMainClipSize + 10)) {\n        viy = -(self.size_navMainTotalSize - self.size_navMainClipSize + 10);\n      }\n\n      self.finish_viy = viy;\n\n      // console.log(viy, nm_maindim, nc_maindim, (my / nc_maindim))\n\n      // console.log('self.parentGallery.initOptions - ' ,self.parentGallery.initOptions);\n      if (dzsapHelpers.is_ios() == false && dzsapHelpers.is_android() == false) {\n        if (self.parentGallery.initOptions.enable_easing != 'on') {\n          // console.log('self._navClipper -', self._navClipper);\n          self._navClipper.css({\n            'transform': 'translateY(' + self.finish_viy + 'px)'\n          });\n        }\n      }\n\n\n    }\n\n  }\n\n\n\n  toggle_menu_state() {\n\n    const self = this;\n\n    if (this._navMain.height() == 0) {\n      this._navMain.css({\n        'height': this.parentGallery.initOptions.design_menu_height\n      })\n\n\n      this.cgallery.removeClass('menu-closed');\n      this.cgallery.addClass('menu-opened');\n    } else {\n\n      this._navMain.css({\n        'height': 0\n      })\n      this.cgallery.removeClass('menu-opened');\n      this.cgallery.addClass('menu-closed');\n    }\n    setTimeout(function () {\n      self.parentGallery.handleResize();\n    }, 400); // -- animation delay\n\n  }\n\n  parseTrackData(track_data) {\n    var foundnr = 0;\n    var self = this;\n    this._navMain.find('.menu-item-views').each(function () {\n      var _t2 = $(this);\n\n      var aux_html = _t2.html();\n\n      var reg_findid = /{{views_(.*?)}}/g;\n\n\n      var aux = reg_findid.exec(aux_html);\n\n      //console.log(aux);\n\n      var id = '';\n      if (aux && aux[1]) {\n\n        id = aux[1];\n\n        for (var i in track_data) {\n\n          //console.log(id, track_data[i].views, aux[0])\n\n          if (id == track_data[i].label || id == 'ap' + track_data[i].label) {\n            aux_html = aux_html.replace(aux[0], track_data[i].views);\n            foundnr++;\n            break;\n          }\n        }\n\n\n        _t2.html(aux_html);\n\n      }\n\n\n    })\n\n    if (foundnr < track_data.length) {\n\n      self._navMain.find('.menu-item-views').each(function () {\n\n        var _t2 = $(this);\n\n        var aux_html = _t2.html();\n        var reg_findid = /{{views_(.*?)}}/g;\n\n        var aux = reg_findid.exec(aux_html);\n\n        if (aux && aux[0]) {\n\n          aux_html = aux_html.replace(aux[0], 0);\n          _t2.html(aux_html);\n        }\n\n      })\n    }\n\n\n  }\n}\n","import {extraHtmlBottomFunctionality, feedEmbedFunctionality} from \"../extra-functionality/_extraHtmlFunctions\";\nimport * as dzsapHelpers from '../_dzsap_helpers';\nimport {DzsapInnerPlaylist} from '../extra-functionality/_innerPlaylist';\n\nconst dzsapSvgs = require('../_dzsap_svgs');\nconst dzsapAjax = require('../_dzsap_ajax');\n\nexport function setup_structure_extras(selfClass, o) {\n\n  // console.log('selfClass.skinwave_mode - ', selfClass.skinwave_mode);\n  if (o.design_skin === 'skin-wave' && selfClass.skinwave_mode === 'bigwavo') {\n    selfClass._audioplayerInner.after(selfClass._scrubbar);\n\n    if (selfClass.cthis.find('.feed-description')) {\n      selfClass.$conControls.after(selfClass.cthis.find('.feed-description').eq(0));\n      selfClass.$conControls.next().removeClass('feed-description').addClass('song-desc');\n    }\n  }\n\n\n  selfClass.radio_isGoingToUpdateSongName = dzsapHelpers.player_radio_isNameUpdatable(selfClass, selfClass.radio_isGoingToUpdateSongName, '.the-songname');\n  selfClass.radio_isGoingToUpdateArtistName = dzsapHelpers.player_radio_isNameUpdatable(selfClass, selfClass.radio_isGoingToUpdateArtistName, '.the-artist');\n\n  // console.log('selfClass.radio_isGoingToUpdateSongName - ', selfClass.radio_isGoingToUpdateSongName, 'selfClass.radio_isGoingToUpdateArtistName - ', selfClass.radio_isGoingToUpdateArtistName)\n\n\n  if (o.disable_scrub === 'on') {\n    selfClass.cthis.addClass('disable-scrubbar');\n  }\n\n\n  const struct_embedButtonWithTooltip = `<div class=\"btn-embed-code-con dzstooltip-con \"><div class=\"btn-embed-code player-but \"> <div class=\"the-icon-bg\"></div>${dzsapSvgs.svg_embed_btn}</div><span class=\"dzstooltip   transition-slidein arrow-bottom talign-end style-rounded color-dark-light \" style=\"width: 350px; \"><span class=\"dzstooltip--inner\"><span class=\"embed-code--text\"></span></span></span></div>`;\n\n  if (selfClass.feedEmbedCode !== '') {\n    feedEmbedFunctionality(selfClass, jQuery, dzsapHelpers, struct_embedButtonWithTooltip)\n  }\n\n  if (o.footer_btn_playlist === 'on') {\n    if (selfClass._apControlsRight.find('.btn-footer-playlist').length === 0) {\n\n      selfClass.classFunctionalityInnerPlaylist = new DzsapInnerPlaylist(selfClass);\n      selfClass.classFunctionalityInnerPlaylist.init();\n    }\n\n  }\n\n  // console.log('selfClass.cthis.find(\\'.extra-html\\').length - ', selfClass.cthis.find('.extra-html').length);\n  setTimeout(function () {\n\n    if (selfClass.cthis.find('.extra-html').length) {\n      extraHtmlBottomFunctionality(selfClass, dzsapAjax, dzsapSvgs);\n    }\n  }, 100);\n\n  setTimeout(function () {\n    if (selfClass.cthis.html().indexOf('dzsap-multisharer-but') > -1) {\n      selfClass.isMultiSharer = true;\n      selfClass.check_multisharer();\n    }\n  }, 1002);\n\n  if (selfClass.cthis.find('.con-after-playpause').length) {\n    selfClass.$conPlayPause.after(selfClass.cthis.find('.con-after-playpause').eq(0));\n  }\n\n  if (selfClass.cthis.find('.afterplayer').length > 0) {\n    //console.log(cthis.children('.afterplayer'));\n    selfClass.cthis.append(selfClass.cthis.find('.afterplayer'));\n  }\n\n}\n\nfunction structure_generatePlayPauseString(selfClass) {\n\n  var o = selfClass.initOptions;\n\n  let struct_con_playpause = '';\n  if (o.settings_extrahtml_before_play_pause) {\n    struct_con_playpause += o.settings_extrahtml_before_play_pause;\n\n\n  }\n// console.log(selfClass.cthis.find('.feed-dzsap-before-playpause'));\n\n  struct_con_playpause += '<div class=\"con-playpause-con\">';\n\n  struct_con_playpause = addExtraHtmlInPlace(selfClass, '.feed-dzsap-before-playpause', struct_con_playpause) + struct_con_playpause;\n\n  struct_con_playpause += '<div class=\"con-playpause';\n\n  if (selfClass.keyboard_controls.show_tooltips === 'on') {\n    struct_con_playpause += ' dzstooltip-con';\n  }\n\n  struct_con_playpause += '\">';\n  if (selfClass.keyboard_controls.show_tooltips === 'on') {\n    struct_con_playpause += dzsapHelpers.dzsap_generate_keyboard_tooltip(selfClass.keyboard_controls, 'pause_play');\n  }\n\n\n  struct_con_playpause += '<div class=\"playbtn player-but\" aria-controls=\"' + selfClass.uniqueId + '-audio\"><div class=\"the-icon-bg\"></div><div class=\"dzsap-play-icon\">';\n\n// console.log(\"HMM dada\", selfClass.cthis);\n\n  struct_con_playpause += dzsapSvgs.playbtn_svg;\n\n\n  struct_con_playpause += '</div>';\n  struct_con_playpause += '</div>'; // -- end playbtn\n\n\n  struct_con_playpause += '<div class=\"pausebtn player-but\"';\n\n\n  struct_con_playpause += '><div class=\"the-icon-bg\"></div><div class=\"pause-icon\">';\n\n\n  struct_con_playpause += dzsapSvgs.pausebtn_svg;\n\n\n  struct_con_playpause += '</div>';// -- end pause-icon\n  struct_con_playpause += '</div>'; // -- end pausebtn\n\n\n  struct_con_playpause += '';\n\n\n  struct_con_playpause += '</div>';\n\n  struct_con_playpause += addExtraHtmlInPlace(selfClass, '.feed-dzsap-after-playpause', struct_con_playpause);\n\n\n  struct_con_playpause += '</div>';\n\n  return struct_con_playpause;\n}\n\nfunction setup_structure__setup_wrapper_image(selfClass) {\n\n  var img = new Image();\n\n\n  if (selfClass.cthis.hasClass('zoomsounds-no-wrapper') === false) {\n\n    img.onload = function () {\n      // console.log('image loaded', this, this.src);\n\n\n      selfClass.cthis.css('background-image', 'url(' + this.src + ')');\n      // selfClass._audioplayerInner.prepend('<div class=\"zoomsounds-bg\" style=\"background-image: url('+this.src+'); \"></div>');\n      setTimeout(function () {\n\n        selfClass.cthis.find('.zoomsounds-bg').addClass('loaded');\n\n\n        if (selfClass.cthis.hasClass('zoomsounds-wrapper-bg-bellow')) {\n\n          selfClass.cthis.css('padding-top', 200);\n        }\n      }, 100);\n    }\n\n    img.src = selfClass.cthis.attr('data-wrapper-image');\n  }\n\n}\n\n/**\n * setup player structure , called from init\n * @param selfClass\n * @param pargs\n * @returns {boolean}\n */\nexport const setup_structure = function (selfClass, pargs) {\n  // console.log('setup_structure()');\n\n// -- setup structure here\n  var $ = jQuery;\n  var o = selfClass.initOptions;\n\n\n  var margs = {\n    'setup_inner_player': true\n    , 'setup_media': true\n    , 'setup_otherstructure': true\n    , 'call_from': \"default\"\n\n\n  }\n\n\n  if (pargs) {\n    margs = $.extend(margs, pargs);\n  }\n\n// console.log('%c .setup_structure', 'color: #da23da', margs);\n\n\n  if (margs.call_from === 'reconstruct') {\n    if (selfClass._metaArtistCon) {\n\n      //selfClass._metaArtistCon.remove();\n    }\n\n\n    selfClass._metaArtistCon = null;\n    if (selfClass.cthis.hasClass('skin-wave')) {\n      o.design_skin = 'skin-wave';\n    }\n    if (selfClass.cthis.hasClass('skin-silver')) {\n      o.design_skin = 'skin-silver';\n    }\n  }\n\n\n  var structure_str_apControls = '<div class=\"ap-controls';\n  // console.log('o.design_skin -' , o.design_skin);\n  if (o.design_skin === 'skin-default') {\n    structure_str_apControls += ' dzsap-color_inverse_ui_fill';\n  }\n  structure_str_apControls += '\"></div>'\n\n  if (margs.setup_inner_player) {\n    selfClass.cthis.appendOnce('<div class=\"audioplayer-inner\"></div>');\n    selfClass._audioplayerInner = selfClass.cthis.children('.audioplayer-inner');\n  }\n\n\n  // -- end setup inner\n\n\n  if (!margs.setup_otherstructure) {\n    return false;\n  }\n\n\n  if (selfClass.cthis.attr('data-wrapper-image')) {\n    setup_structure__setup_wrapper_image(selfClass);\n  }\n\n\n  var structure_str_scrubbar = '<div class=\"scrubbar\">';\n  var aux_str_con_controls = '';\n\n  var aux_str_time = '';\n\n\n  structure_str_scrubbar += '<div class=\"scrub-bg\"></div><div class=\"scrub-buffer\"></div>';\n\n  structure_str_scrubbar += '<div class=\"scrub-prog';\n\n  if (o.scrubbar_type !== 'wave') {\n    structure_str_scrubbar += ' dzsap-color_brand_bg';\n  }\n\n  structure_str_scrubbar += '\"></div><div class=\"scrubBox\"></div><div class=\"scrubBox-prog\"></div><div class=\"scrubBox-hover\"></div>';\n  aux_str_time = '<div class=\"total-time\">00:00</div><div class=\"curr-time\">00:00</div>';\n\n\n  if (selfClass.sample_perc_start) {\n\n    structure_str_scrubbar += '<div class=\"sample-block-start\" style=\"width: ' + (selfClass.sample_perc_start * 100) + '%\"></div>'\n  }\n  if (selfClass.sample_perc_end) {\n\n    structure_str_scrubbar += '<div class=\"sample-block-end\" style=\"left: ' + (selfClass.sample_perc_end * 100) + '%; width: ' + (100 - (selfClass.sample_perc_end * 100)) + '%\"></div>'\n  }\n\n  structure_str_scrubbar += '</div>'; // -- end scrubbar\n\n\n  if (o.controls_external_scrubbar) {\n    structure_str_scrubbar = '';\n  }\n\n\n  var struct_con_playpause = '';\n\n  struct_con_playpause += structure_generatePlayPauseString(selfClass);\n\n\n// struct_con_playpause = '';\n// console.log(' - struct_con_playpause - ',struct_con_playpause);\n\n\n  aux_str_con_controls += '<div class=\"con-controls\"><div class=\"the-bg\"></div>' + struct_con_playpause;\n\n\n  if (selfClass.extraHtmlAreas.controlsLeft) {\n    aux_str_con_controls += selfClass.extraHtmlAreas.controlsLeft;\n  }\n\n\n//console.log(o.disable_timer, aux_str_con_controls);\n\n\n  if (o.design_skin === 'skin-pro') {\n    aux_str_con_controls += '<div class=\"con-controls--right\">';\n    aux_str_con_controls += '</div>';\n  }\n\n\n  var aux_str_con_volume = '<div class=\"controls-volume\"><div class=\"volumeicon\"></div><div class=\"volume_static\"></div><div class=\"volume_active\"></div><div class=\"volume_cut\"></div></div>';\n  if (o.disable_volume === 'on') {\n    aux_str_con_volume = '';\n  }\n\n\n  if (o.design_skin === 'skin-default' || o.design_skin === 'skin-wave') {\n\n    aux_str_con_controls += '<div class=\"ap-controls-right\">';\n    if (o.disable_volume !== 'on') {\n      aux_str_con_controls += '<div class=\"controls-volume\"><div class=\"volumeicon\"></div><div class=\"volume_static\"></div><div class=\"volume_active\"></div><div class=\"volume_cut\"></div></div>';\n    }\n\n\n    // console.log('aux_str_con_controls -> ',aux_str_con_controls);\n\n    aux_str_con_controls += '</div>';\n    // aux_str_con_controls += '<div class=\"clear\"></div>';\n\n\n  }\n\n  aux_str_con_controls += '</div>'; // -- end con-controls\n\n\n/// -- end STR\n\n//console.log(o.disable_timer, aux_str_con_controls);\n\n\n  if (o.design_skin === 'skin-wave' && selfClass.skinwave_mode === 'small') {\n    aux_str_con_controls = '<div class=\"the-bg\"></div><div class=\"ap-controls-left\">' + struct_con_playpause + '</div>' + structure_str_scrubbar + '<div class=\"ap-controls-right\">' + aux_str_con_volume + '<div class=\"extrahtml-in-float-right for-skin-wave-small\">' + selfClass.extraHtmlAreas.controlsRight + '</div></div>';\n\n\n  } else {\n\n\n    // -- other skins\n\n    if (o.design_skin === 'skin-aria' || o.design_skin === 'skin-silver' || o.design_skin === 'skin-redlights' || o.design_skin === 'skin-steel') {\n\n\n      //o.design_skin === 'skin-redlights' ||\n      let playbtnSvg = dzsapSvgs.playbtn_svg;\n      let pausebtnSvg = dzsapSvgs.pausebtn_svg;\n      if (o.design_skin === 'skin-steel') {\n        playbtnSvg = '';\n        pausebtnSvg = '';\n      }\n\n      aux_str_con_controls = '<div class=\"the-bg\"></div><div class=\"ap-controls-left\">';\n\n\n      if (o.design_skin === 'skin-silver') {\n\n        aux_str_con_controls += struct_con_playpause;\n      } else {\n\n        // -- TODO: maybe convert all to struct_con_playpause\n\n\n        aux_str_con_controls += '<div class=\"con-playpause';\n\n        if (selfClass.keyboard_controls.show_tooltips === 'on') {\n          aux_str_con_controls += ' dzstooltip-con';\n        }\n\n        aux_str_con_controls += '\">';\n\n\n        if (selfClass.keyboard_controls.show_tooltips === 'on') {\n          aux_str_con_controls += dzsapHelpers.dzsap_generate_keyboard_tooltip(selfClass.keyboard_controls, 'pause_play');\n        }\n\n\n        aux_str_con_controls += '<div class=\"playbtn player-but playbtn-not-skin-silver\"><div class=\"dzsap-play-icon\">' + playbtnSvg + '</div></div><div class=\"pausebtn player-but\" ';\n\n\n        aux_str_con_controls += '><div class=\"pause-icon\">' + pausebtnSvg + '</div></div></div>'; // -- enc con-playpause\n\n      }\n\n      // console.log('aux_str_con_controls - ', aux_str_con_controls, selfClass.cthis, ' dzsapSvgs.playbtn_svg- ', playbtnSvg);\n\n\n      addExtraHtmlInPlace(selfClass, '.feed-dzsap-after-playpause', struct_con_playpause);\n\n\n      aux_str_con_controls += '</div>';\n\n\n      if (selfClass.extraHtmlAreas.controlsRight) {\n        aux_str_con_controls += '<div class=\"controls-right\">' + selfClass.extraHtmlAreas.controlsRight + '</div>';\n\n        //console.log(o._gall)\n        //console.log('dada');\n\n        if (o.design_skin === 'skin-redlights') {\n\n          //console.log(o.parentgallery, o.parentgallery.get(0).api_skin_redlights_give_controls_right_to_all);\n          if (o.parentgallery && o.parentgallery.get(0).api_skin_redlights_give_controls_right_to_all) {\n            o.parentgallery.get(0).api_skin_redlights_give_controls_right_to_all();\n          }\n        }\n      }\n\n      //console.log('ceva');\n\n\n      aux_str_con_controls += '<div class=\"ap-controls-right\">';\n\n      if (o.design_skin === 'skin-silver') {\n\n        aux_str_con_controls += '<div class=\"controls-volume controls-volume-vertical\"><div class=\"volumeicon\"></div><div class=\"volume-holder\"><div class=\"volume_static\"></div><div class=\"volume_active\"></div><div class=\"volume_cut\"></div></div></div>';\n\n\n        aux_str_con_controls += '</div>' + structure_str_scrubbar;\n      } else {\n\n\n        if (o.design_skin === 'skin-redlights') {\n\n          if (o.disable_volume != 'on') {\n            aux_str_con_controls += '<div class=\"controls-volume\"><div class=\"volumeicon\"></div><div class=\"volume_static\"></div><div class=\"volume_active\"></div><div class=\"volume_cut\"></div></div>';\n          }\n        }\n\n        aux_str_con_controls += structure_str_scrubbar;\n\n\n        if (o.disable_timer != 'on') {\n          aux_str_con_controls += '<div class=\"total-time\">00:00</div>';\n        }\n      }\n\n\n      if (o.design_skin === 'skin-silver') {\n\n      } else {\n        aux_str_con_controls += '</div>';\n      }\n\n\n    }\n\n\n  }\n\n\n// -- end strings\n// --------------\n\n  if (margs.setup_media) {\n    selfClass._audioplayerInner.append('<div class=\"the-media\"></div>');\n    selfClass.$theMedia = selfClass._audioplayerInner.children('.the-media').eq(0);\n  }\n  if (o.design_skin !== 'skin-customcontrols') {\n    selfClass._audioplayerInner.append(structure_str_apControls);\n  }\n\n  selfClass._apControls = selfClass._audioplayerInner.children('.ap-controls').eq(0);\n  selfClass._apControls.append(aux_str_con_controls);\n\n\n  if (selfClass.cthis.hasClass('skin-wave-mode-alternate')) {\n    if (selfClass.cthis.find('.scrubbar').length === 0) {\n      selfClass._apControls.append(structure_str_scrubbar);\n    }\n  } else {\n    if (selfClass.cthis.find('.scrubbar').length === 0) {\n      selfClass._apControls.prepend(structure_str_scrubbar);\n    }\n  }\n\n\n  selfClass._apControlsRight = null;\n\n  if (selfClass._apControls.find('.ap-controls-right').length > 0) {\n    selfClass._apControlsRight = selfClass.cthis.find('.ap-controls-right');\n  }\n  if (selfClass._apControls.find('.ap-controls-left').length > 0) {\n    selfClass._apControlsLeft = selfClass._apControls.find('.ap-controls-left').eq(0);\n  }\n\n\n  if (o.design_skin === 'skin-pro') {\n    selfClass._apControlsRight = selfClass.cthis.find('.con-controls--right').eq(0)\n  }\n\n\n// console.log('settings_extrahtml_in_float_right - ',settings_extrahtml_in_float_right);\n\n\n// -- Todo: if we have footer, playlist btn we can place it in ap-controls-right\n\n\n  addExtraHtmlInPlace(selfClass, '.feed-dzsap--custom-controls', null, selfClass._audioplayerInner);\n  addExtraHtmlInPlace(selfClass, '.feed-dzsap-after-con-controls', null, selfClass._apControls);\n\n\n  if (o.controls_external_scrubbar) {\n    selfClass._scrubbar = $(o.controls_external_scrubbar).children('.scrubbar').eq(0);\n  } else {\n    selfClass._scrubbar = selfClass._apControls.find('.scrubbar').eq(0);\n  }\n// console.info('_scrubbar - ' ,_scrubbar, o);\n\n\n  selfClass.$$scrubbProg = selfClass._scrubbar.find('.scrub-prog').get(0);\n\n\n  selfClass.$conControls = selfClass._apControls.children('.con-controls');\n  selfClass.$conPlayPause = selfClass.cthis.find('.con-playpause').eq(0);\n  selfClass._conPlayPauseCon = selfClass.cthis.find('.con-playpause-con').eq(0);\n  selfClass.$controlsVolume = selfClass.cthis.find('.controls-volume').eq(0);\n\n\n  // console.log('selfClass.$conPlayPause - ', selfClass.$conPlayPause);\n\n  (dzsapHelpers.player_constructArtistAndSongCon.bind(selfClass))(margs);\n\n\n  // console.log('selfClass._scrubbar - ', selfClass._scrubbar, o.scrubbar_type);\n  selfClass._scrubbar.addClass('scrubbar-inited');\n  if (o.scrubbar_type === 'wave' && o.disable_timer != 'on') {\n    // -- no sense in adding time if external\n    if (o.controls_external_scrubbar === '') {\n      selfClass._scrubbar.append(aux_str_time);\n    }\n  }\n\n\n  if (o.design_skin != 'skin-wave' && o.disable_timer != 'on') {\n    // aux_str_con_controls += '<div class=\"curr-time\">00:00</div><div class=\"total-time\">00:00</div>';\n\n    // -- all skins\n    selfClass._apControls.append(aux_str_time);\n  }\n\n\n// -- end structure\n\n\n// -- start assocations\n  if (o.disable_timer != 'on') {\n    selfClass.$currTime = selfClass.cthis.find('.curr-time').eq(0);\n    selfClass.$totalTime = selfClass.cthis.find('.total-time').eq(0);\n\n    if (o.design_skin === 'skin-steel') {\n      if (selfClass.$currTime.length === 0) {\n        selfClass.$totalTime.before('<div class=\"curr-time\">00:00</div> <span class=\"separator-slash\">/</span> ');\n        //console.log('WHAT WHAT IN THE BUTT', _totalTime, _totalTime.prev(),  selfClass.cthis.find('.curr-time'));\n\n        selfClass.$currTime = selfClass.$totalTime.prev().prev();\n\n      }\n    }\n\n    //console.log(_currTime, _totalTime);\n  }\n\n\n  if (Number(o.sample_time_total) > 0) {\n\n    selfClass.timeTotal = Number(o.sample_time_total);\n\n    // console.log(ConstantsDzsAp.DEBUG_STYLE_ERROR, selfClass.$currTime, selfClass.timeTotal);\n    if (selfClass.$totalTime) {\n\n      // console.error(\"ENTER HERE\");\n      selfClass.$totalTime.html(dzsapHelpers.formatTime(selfClass.time_total_for_visual));\n    }\n\n    //console.log(_totalTime.html());\n\n    //return false;\n  }\n\n\n  selfClass.struct_generate_thumb();\n\n\n  if (o.design_skin === 'skin-wave' && o.parentgallery && typeof (o.parentgallery) != 'undefined' && o.design_menu_show_player_state_button === 'on') {\n    if (o.design_skin === 'skin-wave') {\n      if (selfClass._apControlsRight) {\n\n        selfClass._apControlsRight.appendOnce('<div class=\"btn-menu-state player-but\"> <div class=\"the-icon-bg\"></div> ' + dzsapSvgs.svg_menu_state + '    </div></div>');\n      } else {\n        console.log('selfClass._apControlsRight not found ? ');\n      }\n    } else {\n      selfClass._audioplayerInner.appendOnce('<div class=\"btn-menu-state\"></div>');\n    }\n  }\n// console.log(selfClass.$controlsVolume,_theThumbCon , o.skinwave_place_thumb_after_volume);\n  if (o.skinwave_place_metaartist_after_volume === 'on') {\n\n    selfClass.$controlsVolume.before(selfClass._metaArtistCon);\n  }\n\n\n  if (o.skinwave_place_thumb_after_volume === 'on') {\n\n    selfClass.$controlsVolume.before(selfClass.cthis.find('.the-thumb-con'));\n  }\n//                console.log(o.embed_code);\n\n\n  if (o.design_skin === 'skin-wave') {\n\n\n    // -- structure setup\n\n    selfClass.setup_structure_scrub();\n\n\n    if (o.skinwave_timer_static === 'on') {\n      if (selfClass.$currTime) {\n        selfClass.$currTime.addClass('static');\n      }\n      if (selfClass.$totalTime) {\n        selfClass.$totalTime.addClass('static');\n      }\n    }\n\n\n    selfClass._apControls.css({\n      //'height': design_thumbh\n    })\n\n\n    //console.log('setup_lsiteners()');\n\n    // console.log(\"PREPARE SCRUBBAR LOADED\");\n    if (o.skinwave_wave_mode === 'canvas') {\n\n      setTimeout(function () {\n        selfClass.cthis.addClass('scrubbar-loaded');\n        selfClass._scrubbar.parent().addClass('scrubbar-loaded');\n\n\n        // console.log(\" SCRUBBAR  is LOADED\",selfClass._scrubbar);\n      }, 700); // -- tbc\n\n    }\n\n  }\n// --- END skin-wave\n\n\n  selfClass.check_multisharer();\n\n  if (selfClass.cthis.hasClass('skin-minimal')) {\n    // -- here is skin-minimal\n\n    selfClass.cthis.find('.the-bg').before('<div class=\"skin-minimal-bg skin-minimal--outer-bg\"></div><div class=\"skin-minimal-bg skin-minimal--inner-bg-under dzsap-color_brand_bg\"></div><div class=\"skin-minimal-bg skin-minimal--inner-bg\"></div><div class=\"skin-minimal-bg skin-minimal--inner-inner-bg dzsap-color_brand_bg\"></div>')\n    selfClass.cthis.find('.the-bg').append('<canvas width=\"100\" height=\"100\" class=\"playbtn-canvas\"/>')\n    selfClass.skin_minimal_canvasplay = selfClass.cthis.find('.playbtn-canvas').eq(0).get(0);\n\n    if (selfClass.$conPlayPause) {\n\n      selfClass.$conPlayPause.children('.playbtn').append(dzsapSvgs.playbtn_svg);\n      selfClass.$conPlayPause.children('.pausebtn').append(dzsapSvgs.pausebtn_svg);\n    }\n\n    setTimeout(function () {\n      selfClass.isCanvasFirstDrawn = false;\n    }, 200);\n  }\n\n\n  if (selfClass.cthis.hasClass('skin-minion')) {\n    if (selfClass.cthis.find('.menu-description').length > 0) {\n      //console.log('ceva');\n      selfClass.$conPlayPause.addClass('with-tooltip');\n      selfClass.$conPlayPause.prepend('<span class=\"dzstooltip\" style=\"left:-7px;\">' + selfClass.cthis.find('.menu-description').html() + '</span>');\n      selfClass.$conPlayPause.children('span').eq(0).css('width', selfClass.$conPlayPause.children('span').eq(0).textWidth() + 10);\n    }\n  }\n\n\n//console.log('o.player_navigation - ',o.player_navigation,o.parentgallery);\n\n\n  if (o.player_navigation === 'default') {\n\n    if (o.parentgallery) {\n\n      o.player_navigation = 'on';\n    }\n\n\n    if (o.parentgallery && o.parentgallery.hasClass('mode-showall')) {\n      o.player_navigation = 'off';\n    }\n  }\n\n  if (o.disable_player_navigation === 'on') {\n\n    o.player_navigation = 'off';\n  }\n\n  if (o.player_navigation === 'default') {\n\n    o.player_navigation = 'off';\n  }\n\n\n// console.log('o.player_navigation - ',o.player_navigation);\n\n\n  if (o.player_navigation === 'on') {\n\n    var prev_btn_str = '<div class=\"prev-btn player-but\"><div class=\"the-icon-bg\"></div>' + dzsapSvgs.svg_prev_btn + ' </div>';\n\n    var next_btn_str = '<div class=\"next-btn player-but\"><div class=\"the-icon-bg\"></div>' + dzsapSvgs.svg_next_btn + '  </div>';\n\n\n    var auxs = prev_btn_str + next_btn_str;\n\n\n    //console.log(o.parentgallery);\n\n\n    // console.log(o.design_skin, selfClass.skinwave_mode);\n\n    // -- create player navigation here\n    if ((o.design_skin === 'skin-wave' && selfClass.skinwave_mode === 'small') || o.design_skin === 'skin-aria') {\n\n\n      selfClass.$conPlayPause.before(prev_btn_str)\n      selfClass.$conPlayPause.after(next_btn_str)\n\n\n    } else {\n      if (o.design_skin === 'skin-wave') {\n\n        // _conPlayPause.after(auxs);\n\n        // console.log('o.player_navigation - ',o.player_navigation);\n\n\n        if (o.player_navigation === 'on') {\n\n          selfClass._conPlayPauseCon.prependOnce(prev_btn_str, '.prev-btn');\n          selfClass._conPlayPauseCon.appendOnce(next_btn_str, '.next-btn');\n        }\n\n      } else if (o.design_skin === 'skin-steel') {\n\n        selfClass._apControlsLeft.prependOnce(prev_btn_str, '.prev-btn');\n\n        if (selfClass._apControlsLeft.children('.the-thumb-con').length > 0) {\n          //console.log(_theThumbCon.prev());\n\n          if (selfClass._apControlsLeft.children('.the-thumb-con').eq(0).length > 0) {\n            if (selfClass._apControlsLeft.children('.the-thumb-con').eq(0).prev().hasClass('next-btn') === false) {\n              selfClass._apControlsLeft.children('.the-thumb-con').eq(0).before(next_btn_str);\n            }\n          }\n\n        } else {\n\n          selfClass._apControlsLeft.appendOnce(next_btn_str, '.next-btn');\n        }\n      } else {\n\n        selfClass._audioplayerInner.appendOnce(auxs, '.prev-btn');\n      }\n    }\n\n  }\n\n\n//console.log(o.settings_extrahtml);\n\n\n  if (selfClass.cthis.hasClass('skinvariation-wave-bigtitles')) {\n    if (selfClass.cthis.find('.controls-volume').length && selfClass._metaArtistCon.find('.controls-volume').length === 0) {\n      selfClass._metaArtistCon.append('<br>');\n      selfClass._metaArtistCon.append(selfClass.cthis.find('.controls-volume'));\n    }\n\n  }\n\n  if (selfClass.cthis.hasClass('skinvariation-wave-righter')) {\n\n    selfClass._apControls.appendOnce('<div class=\"playbuttons-con\"></div>');\n    var _c = selfClass.cthis.find('.playbuttons-con').eq(0);\n    _c.append(selfClass.cthis.find('.con-playpause-con'));\n\n  }\n\n\n// -- do custom tweaks\n\n  if (o.design_skin === 'skin-pro') {\n\n    selfClass._apControlsRight.append(selfClass.$currTime);\n    selfClass._apControlsRight.append(selfClass.$totalTime);\n  }\n\n\n  if (o.design_skin === 'skin-silver') {\n    selfClass._scrubbar.after(selfClass._apControlsRight);\n    selfClass._apControlsLeft.prepend(selfClass._metaArtistCon);\n    selfClass._apControlsLeft.append(selfClass.$currTime);\n    selfClass._apControlsRight.append(selfClass.$totalTime);\n    // aux_str_con_controls += '<div class=\"curr-time\">00:00</div>';\n\n\n    // if (o.disable_timer != 'on') {\n    //   aux_str_con_controls += '<div class=\"total-time\">00:00</div>';\n    // }\n  }\n\n\n  if (o.design_skin === 'skin-redlights') {\n    selfClass._apControlsRight.append('<div class=\"ap-controls-right--top\"></div>');\n    selfClass._apControlsRight.append('<div class=\"ap-controls-right--bottom\"></div>');\n    selfClass._apControlsRight.find('.ap-controls-right--top').append(selfClass._apControlsRight.find('.meta-artist-con'));\n    selfClass._apControlsRight.find('.ap-controls-right--top').append(selfClass._apControlsRight.find('.controls-volume'));\n    selfClass._apControlsRight.find('.ap-controls-right--bottom').append(selfClass._apControlsRight.find('.scrubbar'));\n  }\n\n\n  if (margs.call_from === 'reconstruct') {\n    if (selfClass.cthis.hasClass('skin-silver')) {\n      selfClass._apControlsLeft.append(selfClass.cthis.find('.con-playpause'));\n    }\n  }\n\n\n  if (selfClass.isMultiSharer) {\n    selfClass.check_multisharer();\n  }\n// -- replaces / sanitizes here\n  selfClass.setup_structure_sanitizers();\n  setup_structure_extras(selfClass, o);\n\n\n  selfClass.cthis.addClass('structure-setuped');\n\n\n  if (selfClass.extraHtmlAreas.afterArtist) {\n    selfClass._metaArtistCon.find('.the-artist').append(selfClass.extraHtmlAreas.afterArtist);\n  }\n\n  // console.log('selfClass.extraHtmlAreas.bottom - ', selfClass.extraHtmlAreas.bottom);\n\n  if (selfClass.extraHtmlAreas.bottom !== '') {\n    selfClass.cthis.append('<div class=\"extra-html\">' + selfClass.extraHtmlAreas.bottom + '</div>');\n  }\n\n\n\n    var settings_extrahtml_in_float_right_str = '';\n// console.log('settings_extrahtml_in_float_right - ',settings_extrahtml_in_float_right);\n    // aux_str_con_controls += ;\n\n    if (String(selfClass.extraHtmlAreas.controlsRight).indexOf('dzsap-multisharer-but') > -1) {\n      selfClass.isMultiSharer = true;\n    }\n\n    if (o.design_skin === 'skin-wave' && selfClass.skinwave_mode === 'small') {\n\n    } else {\n\n      settings_extrahtml_in_float_right_str += '<div class=\"extrahtml-in-float-right from-setup_structure from-js-setup_structure\">' + selfClass.extraHtmlAreas.controlsRight + '</div>';\n    }\n\n\n    // aux_str_con_controls += ;\n\n    // console.log('settings_extrahtml_in_float_right_str-  ', settings_extrahtml_in_float_right_str);\n    if (settings_extrahtml_in_float_right_str) {\n      if (o.design_skin === 'skin-wave' || o.design_skin === 'skin-default') {\n\n        selfClass.cthis.find('.ap-controls-right').eq(0).append(settings_extrahtml_in_float_right_str);\n        // console.log('selfClass.cthis.find(\\'.ap-controls-right\\') - ', selfClass.cthis.find('.ap-controls-right'));\n      }\n      if (o.design_skin === 'skin-pro') {\n\n        selfClass.cthis.find('.con-controls--right').eq(0).append(settings_extrahtml_in_float_right_str);\n        // console.log('selfClass.cthis.find(\\'.ap-controls-right\\') - ', selfClass.cthis.find('.ap-controls-right'));\n      }\n    }\n\n\n}\n\n/**\n *\n * @param {DzsAudioPlayer} selfClass\n * @param {string} feedSelector\n * @param {string|null} addToString\n * @param $appendElement\n * @returns {null|string|any}\n */\nfunction addExtraHtmlInPlace(selfClass, feedSelector, addToString = null, $appendElement = null) {\n\n  if (selfClass.cthis.find(feedSelector).length) {\n    if (addToString !== null) {\n\n      addToString += selfClass.cthis.find(feedSelector).eq(0).html();\n    }\n\n    if ($appendElement !== null) {\n\n      $appendElement.append(selfClass.cthis.find(feedSelector).eq(0).html())\n      return $appendElement;\n    }\n    selfClass.cthis.find(feedSelector).remove();\n    if (addToString !== null) {\n\n      return addToString;\n    }\n  }\n\n  // console.log('typeof $appendElement- ' , typeof $appendElement, $appendElement);\n  if (typeof addToString == 'string') {\n    return '';\n  }\n\n  return null;\n}\n","\nexport function extraHtmlBottomFunctionality(selfClass,dzsapAjax){\n\n\n  var o = selfClass.initOptions;\n  // console.log('extraHtmlBottomFunctionality() ' , selfClass.cthis.find('.extra-html'))\n  // console.log('o.settings_extrahtml -> ', o.settings_extrahtml, index_extrahtml_toloads);\n\n\n\n    if (selfClass.increment_views === 1) {\n      (dzsapAjax.ajax_submit_views.bind(selfClass))();\n      selfClass.increment_views = 2;\n    }\n\n\n\n  if (selfClass.index_extrahtml_toloads === 0) {\n    //console.log('lel',cthis.find('.extra-html'))\n\n    selfClass.cthis.find('.extra-html').addClass('active');\n  }\n  setTimeout(function () {\n    selfClass.cthis.find('.extra-html').addClass('active');\n    if (selfClass.cthis.find('.float-left').length === 0) {\n      selfClass.cthis.find('.extra-html').append(selfClass.cthis.find('.extra-html-extra'));\n    } else {\n      selfClass.cthis.find('.extra-html .float-left').append(selfClass.cthis.find('.extra-html-extra'));\n    }\n\n\n    var _c = selfClass.cthis.find('.extra-html-extra').children().eq(0);\n\n    selfClass.cthis.find('.extra-html-extra').children().unwrap();\n\n\n    // console.log()\n    // console.log('selfClass.cthis.html() - ', selfClass.cthis.html());\n    // debugger;\n    // console.log('selfClass.cthis.html().indexOf(\\'dzsap-multisharer-but\\') - ', selfClass.cthis.html().indexOf('dzsap-multisharer-but'));\n\n  }, 2000);\n}\n\nexport function feedEmbedFunctionality(selfClass,$, dzsapHelpers, struct_embedButtonWithTooltip){\n\n  var o = selfClass.initOptions;\n\n  if (o.design_skin === 'skin-wave') {\n\n    if (o.enable_embed_button === 'on') {\n      if (selfClass._apControlsRight) {\n\n        selfClass._apControlsRight.appendOnce(struct_embedButtonWithTooltip);\n        selfClass.$embedButton = selfClass._apControlsRight.find('.btn-embed-code-con').eq(0);\n        selfClass.$embedButton.find('.btn-embed-code').addClass('player-but');\n      }\n    }\n\n  } else {\n    if (o.enable_embed_button === 'on') {\n      selfClass._audioplayerInner.appendOnce(struct_embedButtonWithTooltip);\n      selfClass.$embedButton = selfClass._audioplayerInner.find('.btn-embed-code-con').eq(0);\n    }\n  }\n  if (selfClass.$embedButton) {\n\n    selfClass.$embedButton.find('.embed-code--text').html(selfClass.feedEmbedCode);\n  }\n\n\n  selfClass.cthis.on('click', '.btn-embed-code-con, .btn-embed', function () {\n    var _t = $(this);\n\n    // console.log(_t);\n    dzsapHelpers.select_all(_t.find('.dzstooltip').get(0));\n    document.execCommand('copy');\n  })\n  selfClass.cthis.on('click', '.copy-embed-code-btn', function () {\n    var _t = $(this);\n\n    dzsapHelpers.select_all(_t.parent().parent().find('.dzstooltip--inner > span').get(0));\n\n    document.execCommand('copy');\n    setTimeout(function () {\n      dzsapHelpers.select_all(_t.get(0));\n    }, 100)\n  })\n}\n","\n\nwindow.dzsap_moving_playlist_item = false;\nwindow.dzsap_playlist_con = null;\nwindow.dzsap_playlist_item_moving = null;\nwindow.dzsap_playlist_item_target = null;\nconst dzsapSvgs = require('../_dzsap_svgs');\n\nexport class DzsapInnerPlaylist{\n  constructor(dzsapClass) {\n    this.dzsapClass = dzsapClass;\n    this.$playlistInner = null;\n  }\n  init(){\n    // console.log(this);\n\n    var selfClass = this.dzsapClass;\n\n    var thisClass = this;\n\n    selfClass._apControlsRight.append('<div class=\"btn-footer-playlist for-hover dzstooltip-con player-but\"> <div class=\"tooltip-indicator tooltip-indicator--btn-footer-playlist\"><div class=\"the-icon-bg\"></div> ' + dzsapSvgs.svg_footer_playlist + '    </div><div class=\"dzstooltip playlist-tooltip style-default color-light-dark arrow-bottom talign-end transition-scaleup active2\"><div class=\"dzstooltip--inner\"> </div></div></div>');\n\n    thisClass.$playlistInner = selfClass.cthis.find('.playlist-tooltip');\n    selfClass.cthis.on('mousedown', '.the-sort-handle', handle_mouse);\n    selfClass.cthis.on('click', '.playlist-menu-item', handle_mouse);\n\n    setTimeout(function () {\n      thisClass.playlistInner_setupStructureInPlayer();\n    }, 100);\n\n    setTimeout(function () {\n      // player_setup_playlist_inner();\n    }, 1000)\n\n\n    function handle_mouse(e){\n\n      var $t = jQuery(this);\n      if (e.type === 'click') {\n\n        if ($t.hasClass('playlist-menu-item')) {\n\n\n          var ind = $t.parent().children().index($t);\n\n\n          thisClass.playlistInner_gotoItem(ind, {\n            'call_from': 'handle_mouse'\n          })\n\n\n        }\n      }\n      if (e.type === 'mousedown') {\n\n        // console.log('mouse down');\n\n        var _con = $t.parent();\n\n        _con.parent().append(_con.clone().addClass('cloner'));\n        var _clone = _con.parent().children('.cloner').eq(0);\n\n        dzsap_playlist_con = _con.parent();\n        dzsap_moving_playlist_item = true;\n\n        dzsap_playlist_item_target = _con;\n        dzsap_playlist_item_moving = _clone;\n        _con.addClass('target-playlist-item');\n\n\n      }\n    }\n\n\n  }\n\n  playlistInner_setupStructureInPlayer(pargs) {\n    // -- setup playlist for footer\n\n    var $ = jQuery;\n    var thisClass = this;\n    var selfClass = this.dzsapClass;\n\n    var margs = {\n      'call_from': \"default\"\n    }\n\n    if (pargs) {\n      margs = $.extend(margs, pargs);\n    }\n\n\n    // console.log('player_setup_playlist_inner() dzsap_syncList_players -4 ',dzsap_syncList_players,margs,selfClass.cthis);\n\n\n\n    if (thisClass.$playlistInner) {\n      (window.dzsap_syncList_players.length) ? thisClass.$playlistInner.parent().removeClass('is-empty') : thisClass.$playlistInner.parent().addClass('is-empty');\n      // -- clear all before adding\n      thisClass.$playlistInner.find('.dzstooltip--inner').html('');\n      var stringPlaylistMenuItems = '';\n      for (var keySyncPlayer in window.dzsap_syncList_players) {\n        // -- setup inner playlist for sticky player\n\n\n        var _c = window.dzsap_syncList_players[keySyncPlayer];\n\n        if (_c.hasClass('number-wrapper') || _c.hasClass('for-number-wrapper')) {\n          continue;\n        }\n\n        stringPlaylistMenuItems += '<div class=\"playlist-menu-item\"';\n\n\n        $.each(_c.get(0).attributes, function () {\n          // -- we remember attributes in case the page has changed and we lost..\n          if (this.specified && this.name && this.name !== 'id' && this.name !== 'style') {\n\n            stringPlaylistMenuItems += ' ' + this.name + '=\\'' + this.value + '\\'';\n            // console.log(this.name, this.value);\n          }\n        });\n\n\n        stringPlaylistMenuItems += '>';\n\n\n        if(_c.attr('data-thumb')){\n\n          stringPlaylistMenuItems += '<div class=\"pi-thumb-con\">';\n          stringPlaylistMenuItems += '<div class=\"pi-thumb divimage\" style=\"background-image: url(' + _c.attr('data-thumb') + ')\">';\n          stringPlaylistMenuItems += '</div>'\n          stringPlaylistMenuItems += '</div>'\n        }\n        stringPlaylistMenuItems += '<div class=\"pi-meta-con\">';\n\n        stringPlaylistMenuItems += '<div class=\"pi-the-artist\">';\n        stringPlaylistMenuItems += _c.find('.the-artist').eq(0).text();\n        stringPlaylistMenuItems += '</div>';\n\n        stringPlaylistMenuItems += '<div class=\"pi-the-name\">';\n        stringPlaylistMenuItems += _c.find('.the-name').eq(0).text();\n        stringPlaylistMenuItems += '</div>';\n\n        stringPlaylistMenuItems += '</div>';\n\n\n        stringPlaylistMenuItems += '<div class=\"the-sort-handle\">';\n        stringPlaylistMenuItems += '&#x2195;';\n        stringPlaylistMenuItems += '</div>';\n        stringPlaylistMenuItems += '</div>';\n\n      }\n      thisClass.$playlistInner.find('.dzstooltip--inner').append(stringPlaylistMenuItems);\n\n\n      $(document).on('mousemove.dzsap_playlist_item', function (e) {\n\n        if (window.dzsap_moving_playlist_item) {\n\n          var my = e.clientY;\n\n          my -= dzsap_playlist_con.offset().top;\n\n          // console.log(mx,my);\n\n          dzsap_playlist_item_moving.css('top', my - 20);\n\n\n          dzsap_playlist_item_target.parent().children(':not(\".target-playlist-item\"):not(\".cloner\")').each(function () {\n            var _t = $(this);\n\n            var tmy = _t.offset().top - dzsap_playlist_con.offset().top;\n\n\n            // console.log(my,tmy);\n            if (my > tmy) {\n              _t.after(dzsap_playlist_item_target);\n            }\n          })\n\n          if (my < 50) {\n            dzsap_playlist_item_target.parent().prepend(dzsap_playlist_item_target);\n          }\n        }\n      });\n      $(document).on('mouseup.dzsap_playlist_item', function (e) {\n\n        if (window.dzsap_moving_playlist_item) {\n\n          window.dzsap_moving_playlist_item = false;\n\n\n          dzsap_playlist_item_moving.parent().children('.cloner').remove();\n          dzsap_playlist_item_target.removeClass('target-playlist-item');\n          dzsap_playlist_item_moving.remove();\n          dzsap_playlist_item_moving = null;\n          dzsap_playlist_item_target = null;\n        }\n      })\n    } else {\n      console.error('no tooltip .. why, should be here?');\n    }\n\n\n  }\n\n  player_determineSyncPlayersIndex(selfClass, $targetPlayer){\n\n    // console.log('selfClass.cthis - - ', selfClass.cthis);\n\n    if (this.$playlistInner) {\n      var _cach = this.$playlistInner.children('.dzstooltip--inner').eq(0);\n      _cach.children().removeClass('current-playlist-item');\n      _cach.children().each(function () {\n        var _t = jQuery(this);\n\n        console.log(_t.attr('data-playerid'), $targetPlayer.attr('data-playerid'));\n        if (_t.attr('data-playerid') === $targetPlayer.attr('data-playerid')) {\n          _t.addClass('current-playlist-item');\n          selfClass.playlist_inner_currNr = _t.parent().children().index(_t);\n        }\n      })\n    }\n\n  }\n\n\n  /**\n   * this is the function called from playlist menu item ( footer )\n   * @param arg\n   * @param pargs\n   */\n  playlistInner_gotoItem(arg, pargs) {\n    // --\n\n    var $ = jQuery;\n    var thisClass = this;\n    var selfClass = this.dzsapClass;\n\n    var margs = {\n      'call_from': \"default\"\n    }\n\n    if (pargs) {\n      margs = $.extend(margs, pargs);\n    }\n\n\n    // console.log('playlist_goto_item - margs -4 ',margs, 'arg - ',arg);\n\n\n    var _cach_con = null;\n\n\n    if (thisClass.$playlistInner) {\n      _cach_con = thisClass.$playlistInner.find('.dzstooltip--inner');\n\n      var _cach = _cach_con.children().eq(arg);\n\n      // console.log(_cach);\n\n      var playerId = _cach.attr('data-playerid');\n\n\n      // console.log('playerid && $(\\'.audioplayer[data-playerid=\"\\'+playerid+\\'\"]\\').length && $(\\'.audioplayer[data-playerid=\"\\'+playerid+\\'\"]\\').eq(0).get(0).api_play_media - ',playerid);\n      // console.log('the-player - ', $('.audioplayer[data-playerid=\"'+playerid+'\"],.audioplayer-tobe[data-playerid=\"'+playerid+'\"]'));\n\n\n      var $targetPlayer = $('.audioplayer[data-playerid=\"' + playerId + '\"],.audioplayer-tobe[data-playerid=\"' + playerId + '\"]');\n\n\n      if (playerId && $targetPlayer.length && $targetPlayer.eq(0).get(0) && $targetPlayer.eq(0).get(0).api_play_media) {\n\n\n        $('.audioplayer[data-playerid=\"' + playerId + '\"]').eq(0).get(0).api_play_media({\n\n          'called_from': 'api_sync_players_prev'\n        });\n\n      } else {\n\n\n        if ($targetPlayer.parent().parent().parent().hasClass('audiogallery')) {\n          $targetPlayer.parent().parent().parent().get(0).api_goto_item(arg);\n        } else {\n\n          // -- in case we change the page ;)\n\n          var $dzsapFooter = $('.dzsap_footer');\n          if($dzsapFooter.length && $dzsapFooter.get(0).api_change_media){\n            $dzsapFooter.get(0).api_change_media($targetPlayer);\n          }\n\n        }\n\n\n      }\n\n      selfClass.playlist_inner_currNr = arg;\n\n    }\n  }\n\n}\n","\n\nexport class _ClassMetaParts{\n  constructor(selfClass) {\n    this.selfClass = selfClass;\n  }\n\n  set_extraHtmlFloatRight(extraHtml){\n    // console.log('extraHtml- ', extraHtml);\n\n    this.selfClass.cthis.find('.extrahtml-in-float-right').eq(0).html(extraHtml);\n  }\n\n}\n","import * as dzsapHelpers from '../_dzsap_helpers';\nimport * as dzsHelpers from '../../js_common/_dzs_helpers';\nimport {ConstantsDzsAp} from \"../../configs/_constants\";\n\n/**\n *\n * @param {DzsAudioPlayer} selfClass\n * @param callbackFn\n * @param errorFn\n */\nexport const media_tryToPlay = function (selfClass, callbackFn, errorFn) {\n  async function async_media_tryToPlay() {\n    function tryToPlay(resolve, reject) {\n      if (selfClass.cthis.attr('data-original-type')) {\n        // -- then this player is feeding\n      } else {\n\n        // -- no audioCtx_buffer\n        if (selfClass.$mediaNode_) {\n          if (selfClass.$mediaNode_.play) {\n\n\n            if (dzsapHelpers.is_ios() && selfClass.spectrum_audioContext !== null && typeof selfClass.spectrum_audioContext == 'object') {\n              // todo: ios not playing nice.. with audio context\n              // console.log('selfClass.spectrum_audioContext - ', typeof selfClass.spectrum_audioContext, selfClass.spectrum_audioContext);\n              selfClass.spectrum_audioContextBufferSource = selfClass.spectrum_audioContext.createBufferSource();\n              selfClass.spectrum_audioContextBufferSource.buffer = selfClass.spectrum_audioContext_buffer;\n              selfClass.spectrum_audioContextBufferSource.connect(selfClass.spectrum_audioContext.destination);\n              // selfClass.spectrum_audioContextBufferSource.connect(selfClass.spectrum_analyser)\n              selfClass.spectrum_audioContextBufferSource.start(0, selfClass.lastTimeInSeconds);\n              resolve({\n                'resolve_type': 'playing_context'\n              })\n            } else {\n\n              if (dzsapHelpers.is_ie()) {\n                selfClass.$mediaNode_.play();\n                resolve({\n                  'resolve_type': 'started_playing'\n                })\n              } else {\n\n                selfClass.$mediaNode_.play().then(r => {\n                  resolve({\n                    'resolve_type': 'started_playing'\n                  })\n                }).catch(err => {\n                  reject({\n                    'error_type': 'did not want to play',\n                    'error_message': err\n                  });\n                });\n              }\n            }\n          } else {\n            if (selfClass._actualPlayer == null) {\n              selfClass.isPlayPromised = true;\n            }\n\n          }\n        } else {\n          if (selfClass._actualPlayer == null) {\n            selfClass.isPlayPromised = true;\n          }\n        }\n\n\n      }\n\n    }\n\n    return new Promise((resolve, reject) => {\n\n      tryToPlay(resolve, reject);\n\n    })\n  }\n\n  async_media_tryToPlay().then((r) => {\n    callbackFn(r);\n  }).catch((err) => {\n    errorFn(err);\n  })\n\n}\n\nexport const setupMediaElement = (selfClass, stringAudioElementHtml = '', stringAudioTagSource = '') => {\n\n  selfClass.$theMedia.children().remove();\n\n\n  if (stringAudioTagSource) {\n\n    if (selfClass.$mediaNode_) {\n\n      jQuery(selfClass.$mediaNode_).append(stringAudioTagSource);\n      if (selfClass.$mediaNode_.load) {\n        selfClass.$mediaNode_.load();\n      }\n\n    } else {\n      setupMediaElement(selfClass, stringAudioElementHtml);\n      return false;\n    }\n  } else {\n    selfClass.$theMedia.append(stringAudioElementHtml);\n  }\n  selfClass.$mediaNode_ = (selfClass.$theMedia.children('audio').get(0));\n\n\n}\n\nexport const setupMediaListeners = function (selfClass, setupMediaAttrs, action_initLoaded, volume_lastVolume, volume_setVolume) {\n\n  var attempt_reload = 0;\n\n\n  selfClass.$mediaNode_.addEventListener('error', handleAudioError, true);\n  selfClass.$mediaNode_.addEventListener('loadedmetadata', handleMediaMetaLoaded, true);\n\n\n  function handleAudioError(e) {\n    /** @type {HTMLAudioElement} */\n    const $audioElement_ = this;\n\n    console.log('errored out', $audioElement_, $audioElement_.duration, e, e.target.error);\n    var noSourcesLoaded = ($audioElement_.networkState === HTMLMediaElement.NETWORK_NO_SOURCE);\n    if (noSourcesLoaded && dzsapHelpers.dzsap_is_mobile() === false) {\n      if (selfClass.cthis.hasClass(ConstantsDzsAp.ERRORED_OUT_CLASS) === false) {\n        console.log(\"%c could not load audio source - \", 'color:#ff2222;', selfClass.cthis.attr('data-source'));\n\n        if (attempt_reload < ConstantsDzsAp.ERRORED_OUT_MAX_ATTEMPTS) {\n          setTimeout(function (earg) {\n            if (selfClass.$mediaNode_) {\n              selfClass.$mediaNode_.src = '';\n            }\n\n\n            setTimeout(function () {\n              if (selfClass.$mediaNode_) {\n                selfClass.$mediaNode_.src = selfClass.data_source;\n                selfClass.$mediaNode_.load();\n              }\n            }, 1000)\n          }, 1000, e)\n          attempt_reload++;\n        } else {\n\n          // -- IT FAILED LOADING\n\n          if (selfClass.initOptions.notice_no_media === 'on') {\n            selfClass.cthis.addClass(ConstantsDzsAp.ERRORED_OUT_CLASS);\n            var txt = 'error - file does not exist...';\n            if (e.target.error) {\n              txt = e.target.error.message;\n            }\n            selfClass.cthis.append(dzsHelpers.setupTooltip({\n              tooltipConClass: ' feedback-tooltip-con',\n              tooltipIndicatorText: '<span class=\"player-but\"><span class=\"the-icon-bg\" style=\"background-color: #912c2c\"></span><span class=\"svg-icon dzsap-color-ui-inverse\" >&#x2139;</span></span>',\n              tooltipInnerHTML: 'cannot load - ( ' + selfClass.data_source + ' ) - error: ' + txt,\n            }));\n          }\n        }\n      }\n    }\n  }\n\n\n  function handleMediaMetaLoaded(e) {\n    // console.log('[media] handleMediaMetaLoaded', {setupMediaAttrs}, 'selfClass._sourcePlayer - ' ,selfClass._sourcePlayer);\n\n    // console.log('add metaloaded here');\n    dzsapHelpers.player_view_addMetaLoaded(selfClass);\n\n    /** @type {HTMLAudioElement} */\n    const $audio_ = e.currentTarget;\n    // console.log('$audio_.duration - ', $audio_.duration, $audio_);\n    selfClass.timeModel.actualTotalTime = Math.ceil($audio_.duration);\n    selfClass.service_checkIfWeShouldUpdateTotalTime();\n\n\n\n    if (setupMediaAttrs.called_from === 'change_media') {\n      // console.log('selfClass.cthis.hasClass(\\'init-loaded\\') - ', selfClass.cthis.hasClass('init-loaded'));\n      action_initLoaded({\n        'call_from': 'force_reload_change_media'\n      })\n    }\n\n    if (setupMediaAttrs.called_from === 'change_media' || selfClass._sourcePlayer) {\n      if (volume_lastVolume) {\n        setTimeout(() => {\n          volume_setVolume(volume_lastVolume, {\n            call_from: \"change_media\"\n          });\n        }, 50);\n      }\n    }\n\n    if (selfClass._sourcePlayer) {\n\n      // console.log(this.duration);\n      if (this.duration) {\n        selfClass._sourcePlayer.get(0).api_set_timeVisualTotal(this.duration)\n\n      }\n    }\n\n    // console.log('call selfClass.view_drawCurrentTime()');\n    selfClass.view_drawCurrentTime();\n  }\n\n}\n\n\nexport const buildAudioElementHtml = function (selfClass, type_normal_stream_type, calledFrom) {\n\n  var stringAudioTagOpen = '';\n  var stringAudioTagSource = '';\n  var stringAudioTagClose = '';\n  var o = selfClass.initOptions;\n\n\n  if (selfClass.data_source) {\n    if (selfClass.data_source.indexOf('get_track_source') > -1) {\n      o.preload_method = 'none';\n    }\n  }\n\n  stringAudioTagOpen += '<audio';\n  stringAudioTagOpen += ' id=\"' + selfClass.uniqueId + '-audio\"';\n  stringAudioTagOpen += ' preload=\"' + o.preload_method + '\"';\n  if (o.skinwave_enableSpectrum === 'on') {\n    stringAudioTagOpen += ' crossOrigin=\"anonymous\"';\n    // str_open_audio_tag += ' src=\"'+cthis.attr('data-source')+'\"';\n  }\n\n  if (dzsapHelpers.is_ios()) {\n    if (calledFrom === 'change_media') {\n      stringAudioTagOpen += ' autoplay';\n    }\n  }\n\n  stringAudioTagOpen += '>';\n  stringAudioTagSource = '';\n\n  // console.log('cthis.attr(\"data-source\")', cthis.attr('data-source'));\n  if (selfClass.data_source) {\n\n    if (!selfClass.data_source && type_normal_stream_type !== 'icecast') {\n      selfClass.data_source = selfClass.cthis.attr('data-source');\n    }\n\n    // console.log('selfClass.data_source'+' - '+selfClass.data_source)\n    if (selfClass.data_source !== 'fake') {\n      stringAudioTagSource += '<source src=\"' + selfClass.data_source + '\" type=\"audio/mpeg\">';\n      if (selfClass.cthis.attr('data-sourceogg') !== undefined) {\n        stringAudioTagSource += '<source src=\"' + selfClass.cthis.attr('data-sourceogg') + '\" type=\"audio/ogg\">';\n      }\n    } else {\n      selfClass.cthis.addClass('meta-loaded meta-fake');\n    }\n  }\n  stringAudioTagClose += '</audio>';\n\n\n  return {\n    stringAudioElementHtml: stringAudioTagOpen + stringAudioTagSource + stringAudioTagClose,\n    stringAudioTagSource\n  };\n  //console.log(str_open_audio_tag, selfClass.$theMedia);\n}\n\nexport const makeMediaPreloadInTheFuture = function(selfClass, stringAudioElementHtml){\n\n  setTimeout(function () {\n    if (selfClass.$mediaNode_) {\n      jQuery(selfClass.$mediaNode_).attr('preload', 'metadata');\n    }\n  }, (Number(window.dzsap_player_index) * 10000));\n}\nexport const repairMediaElement = function(selfClass, stringAudioElementHtml){\n\n  var o = selfClass.initOptions;\n  setTimeout(function () {\n\n    if (selfClass.$theMedia.children().eq(0).get(0) && selfClass.$theMedia.children().eq(0).get(0).nodeName === \"AUDIO\") {\n      //console.log('ceva');\n      return false;\n    }\n    selfClass.$theMedia.html('');\n    selfClass.$theMedia.append(stringAudioElementHtml);\n\n    var isWasPlaying = selfClass.player_playing;\n\n    selfClass.pause_media();\n    selfClass.$mediaNode_ = (selfClass.$theMedia.children('audio').get(0));\n\n\n    if (isWasPlaying) {\n      setTimeout(function () {\n\n        selfClass.play_media({\n          'called_from': 'aux_was_playing'\n        });\n      }, 20);\n    }\n  }, o.failsafe_repair_media_element);\n\n  o.failsafe_repair_media_element = '';\n}\nexport const media_pause = function (selfClass, callbackFn) {\n\n  var $ = jQuery;\n\n\n  if (selfClass.audioType === 'youtube') {\n\n    // console.log('trying to pause youtube video, ',selfClass.$mediaNode_);\n    if (selfClass.$mediaNode_ && selfClass.$mediaNode_.pauseVideo) {\n      selfClass.$mediaNode_.pauseVideo();\n    }\n  }\n  if (selfClass.audioType === 'selfHosted') {\n\n    if (0) {\n    } else {\n      if (selfClass.$mediaNode_) {\n\n        if (selfClass.initOptions.pause_method == 'stop') {\n\n          selfClass.$mediaNode_.pause();\n          selfClass.$mediaNode_.src = '';\n\n\n          selfClass.destroy_cmedia();\n          $(selfClass.$mediaNode_).remove();\n          selfClass.$mediaNode_ = null;\n        } else {\n\n          if (selfClass.$mediaNode_.pause) {\n            selfClass.$mediaNode_.pause();\n          }\n        }\n      }\n\n    }\n\n\n  }\n\n  callbackFn();\n\n}\n\n","import * as dzsapHelpers from \"../_dzsap_helpers\";\n\nconst dzsapMisc = require('../_dzsap_misc');\nconst dzsapWaveFunctions = require('../wave-render/_wave-render-functions');\nimport {ConstantsDzsAp} from \"../../configs/_constants\";\n\n/**\n *\n * @param {DzsAudioPlayer} selfClass\n * @param $\n * @returns {function(*, *=): (boolean|undefined)}\n */\nexport function media_changeMedia(selfClass, $) {\n  /**\n   * change media source for the player / change_media(\"song.mp3\", {type:\"audio\", fakeplayer_is_feeder:\"off\"});\n   * @param {HTMLElement|string} _argSource - can be player dom element\n   * @param pargs - {type:\"audio\", fakeplayer_is_feeder:\"off\"}\n   * @returns {boolean}\n   */\n  return function (_argSource, pargs = {}) {\n\n\n    var changeMediaArgsDefaults = {\n      type: '',\n      fakeplayer_is_feeder: 'off' // -- this is OFF in case there is a button feeding it, and on if it's an actual player\n      , called_from: 'default'\n      , source: 'default'\n      , pcm: ''\n      , artist: \"\"\n      , song_name: \"\"\n      , thumb: \"\"\n      , thumb_link: \"\"\n      , autoplay: \"on\"\n      , cue: \"on\"\n      , feeder_type: \"player\"\n      , source_player_do_not_update: \"off\"\n      , playerid: \"\"\n    };\n\n\n    selfClass.ajax_view_submitted = 'on'; // -- view submitted from caller\n\n    // console.log('margs initial -> ',Object.assign({},margs));\n    // console.log('pargs initial -> ',Object.assign({},pargs));\n    var handle_resize_delay = 500;\n    var changeMediaArgs = {...changeMediaArgsDefaults, ...pargs};\n    var o = selfClass.initOptions;\n    // margs = Object.assign(margs, pargs);\n    // console.log(\"_argSource -\",_argSource,'changeMediaArgs - ',Object.assign({},changeMediaArgs), 'pargs -5 ', Object.assign({},pargs));\n\n    // console.log('%c change_media() -','background-color: #444; color: #dd5555;', changeMediaArgs, selfClass.cthis, pargs);\n    var _sourceForChange = _argSource;\n\n\n    // -- let us decide if we pause old player\n    var isGoingToPauseTheOldPlayer = true; // pause previous player\n    var isGoingToPauseTheActualPlayer = false; // pause if\n    var isSourceAStringSource = false;\n    var isSourceA$Object = false;\n\n    let newSource = '';\n\n\n    if(_sourceForChange && _sourceForChange.attr){\n      isSourceA$Object = true;\n    }\n    //console.log('change_media', \"margs - \", margs, cthis, selfClass._sourcePlayer, arg);\n\n    selfClass.reinit_resetMetrics();\n    selfClass.reinit_beforeChangeMedia();\n\n    if (typeof _sourceForChange === 'string') {\n      isSourceAStringSource = true;\n    }\n\n    $('.current-feeder-for-parent-player').removeClass('current-feeder-for-parent-player');\n\n    if(selfClass.$reflectionVisualObject){\n      selfClass.$reflectionVisualObject.removeClass('is-playing');\n    }\n\n    // console.log('_sourceForChange - ', _sourceForChange);\n\n    if(isSourceAStringSource){\n      newSource = _sourceForChange;\n    }\n    if (isSourceA$Object) {\n\n      newSource = _sourceForChange.attr('data-source');\n      selfClass.$reflectionVisualObject = _sourceForChange;\n      changeMediaArgs = {...changeMediaArgs, ...dzsapHelpers.sanitizeObjectForChangeMediaArgs(_sourceForChange)};\n    }\n    if(changeMediaArgs.source && changeMediaArgs.source!='default'){\n      newSource = changeMediaArgs.source;\n    }\n\n\n\n    if (selfClass.data_source === newSource) {\n      isGoingToPauseTheOldPlayer = false;\n    }\n\n    // -- old feed fake player\n\n    if (isGoingToPauseTheOldPlayer && selfClass._sourcePlayer) {\n      selfClass._sourcePlayer.get(0).api_pause_media_visual({\n        'call_from': 'change_media'\n      });\n      selfClass._sourcePlayer.get(0).api_set_timeVisualTotal(0);\n    }\n\n    // -- we are in one mode, so we need to preserve the originalSettings of the first item\n    if (!(selfClass.cthis.data('original-settings')) && selfClass.data_source !== 'fake') {\n      selfClass.cthis.data('original-settings', dzsapHelpers.sanitizeObjectForChangeMediaArgs(selfClass.cthis))\n    }\n\n\n    // console.log('changeMediaArgs here - ', {...changeMediaArgs});\n    // console.log('changeMediaArgs here - ', {...changeMediaArgs});\n\n    const oldSource = selfClass.data_source;\n    selfClass.data_source = newSource;\n\n    const isSourceHasClassForDomSource = !isSourceAStringSource && !!(_sourceForChange.hasClass('audioplayer') || _sourceForChange.hasClass('is-zoomsounds-source-player'));\n\n\n    if ((isSourceHasClassForDomSource) || changeMediaArgs.fakeplayer_is_feeder === 'on') {\n\n      selfClass.set_sourcePlayer(_sourceForChange)\n      selfClass.cthis.data('feeding-from', selfClass._sourcePlayer.get(0));\n      selfClass._sourcePlayer.addClass('current-feeder-for-parent-player');\n    }\n\n    if (!isSourceAStringSource && _sourceForChange) {\n      if (_sourceForChange && _sourceForChange.attr('data-playerid')) {\n        selfClass.cthis.attr('data-feed-playerid', _sourceForChange.attr('data-playerid'));\n      } else {\n        selfClass.cthis.attr('data-feed-playerid', '');\n        changeMediaArgs.playerid = '';\n      }\n    }\n\n\n\n    // console.log(oldSource, newSource, oldSource===newSource);\n    if (oldSource === newSource) {\n      if(selfClass.cthis.hasClass('is-playing')){\n        selfClass.pause_media();\n      }else{\n        selfClass.play_media();\n      }\n      return false;\n    }\n\n\n    if (changeMediaArgs.type === 'detect' || changeMediaArgs.type === 'audio' || changeMediaArgs.type === 'normal') {\n      changeMediaArgs.type = 'selfHosted';\n    }\n\n\n    selfClass.cthis.removeClass('meta-loaded');\n\n\n    // -- footer placeholder\n    if (selfClass.cthis.parent().hasClass('audioplayer-was-loaded')) {\n\n      selfClass.cthis.parent().addClass('audioplayer-loaded');\n      $('body').addClass('footer-audioplayer-loaded');\n      selfClass.cthis.parent().removeClass('audioplayer-was-loaded');\n    }\n\n    if (selfClass.$stickToBottomContainer) {\n      selfClass.$stickToBottomContainer.addClass('audioplayer-loaded');\n    }\n\n\n    selfClass.cthis.removeClass(ConstantsDzsAp.ERRORED_OUT_CLASS);\n\n\n    selfClass.destroy_media();\n\n\n    selfClass.cthis.attr('data-source', changeMediaArgs.source);\n\n\n\n\n\n\n    var original_type = changeMediaArgs.type;\n    if (changeMediaArgs.type === 'mediafile') {\n      changeMediaArgs.type = 'audio';\n    }\n    if (changeMediaArgs.type) {\n      if (changeMediaArgs.type === 'soundcloud') {\n        changeMediaArgs.type = 'audio';\n      }\n      if (changeMediaArgs.type === 'album_part') {\n        changeMediaArgs.type = 'audio';\n      }\n      selfClass.cthis.attr('data-type', changeMediaArgs.type);\n      selfClass.audioType = changeMediaArgs.type;\n      o.type = changeMediaArgs.type;\n    }\n\n\n\n    if (o.design_skin === 'skin-wave') {\n      if (o.skinwave_wave_mode === 'canvas') {\n        if (selfClass._sourcePlayer) {\n          selfClass.data_source = _sourceForChange.attr('data-source');\n        } else {\n          if (typeof _sourceForChange === 'string') {\n\n            selfClass.data_source = _sourceForChange;\n          }\n        }\n\n        if (_sourceForChange && changeMediaArgs.pcm) {\n\n          selfClass.cthis.attr('data-pcm', _sourceForChange.attr('data-pcm'));\n          dzsapWaveFunctions.scrubModeWave__view_transitionIn(selfClass, _sourceForChange.attr('data-pcm'));\n        } else {\n\n          dzsapHelpers.player_reinit_findIfPcmNeedsGenerating(selfClass);\n          // console.log('hasInitialPcmData - ', selfClass.hasInitialPcmData, selfClass.isPcmRequiredToGenerate);\n          dzsapWaveFunctions.scrubModeWave__checkIfWeShouldTryToGetPcm(selfClass);\n        }\n\n      }\n\n\n      // console.log(' artist - ',changeMediaArgs.artist, cthis.find('.the-artist'), changeMediaArgs)\n\n\n      // -- inside skin-wave\n      if (changeMediaArgs.thumb) {\n\n        if (selfClass.cthis.find('.the-thumb').length) {\n\n          selfClass.cthis.find('.the-thumb').css('background-image', 'url(' + changeMediaArgs.thumb + ')');\n        } else {\n          selfClass.cthis.attr('data-thumb', changeMediaArgs.thumb);\n          selfClass.setupStructure_thumbnailCon();\n        }\n\n      }\n    }\n\n\n    if (changeMediaArgs.thumb) {\n\n      if (selfClass.cthis.find('.the-thumb').length) {\n\n        selfClass.cthis.find('.the-thumb').css('background-image', 'url(' + changeMediaArgs.thumb + ')');\n      } else {\n        selfClass.cthis.attr('data-thumb', changeMediaArgs.thumb);\n        selfClass.setupStructure_thumbnailCon()\n      }\n\n      selfClass.cthis.removeClass('does-not-have-thumb');\n      selfClass.cthis.addClass('has-thumb');\n    } else {\n      selfClass.cthis.addClass('does-not-have-thumb');\n      selfClass.cthis.removeClass('has-thumb');\n    }\n\n\n    if (changeMediaArgs.pcm === '') {\n      selfClass.setup_pcm_random_for_now();\n    }\n\n    // console.log('%c selfClass._sourcePlayer.attr(\\'data-playerid\\') - ','color: #da00ff;',selfClass._sourcePlayer.attr('data-playerid'), selfClass.cthis);\n\n\n    dzsapHelpers.player_adjustIdentifiers (selfClass);\n    // console.log('%c selfClass.identifier_pcm - ','color: #da00ff;',selfClass.identifier_pcm);\n\n\n    handle_resize_delay = 100;\n\n\n    console.log('selfClass._sourcePlayer-  ', selfClass._sourcePlayer);\n    console.log('_sourceForChange - ', _sourceForChange);\n    if (!isSourceAStringSource && _sourceForChange) {\n\n\n      // -- .feed-dzsap-for-extra-html-right will be appended to the footer player\n\n      var selector = '';\n      var $feedExtraHtmlRightFromSource = null;\n      if (_sourceForChange.find('.feed-dzsap-for-extra-html-right').length) {\n        $feedExtraHtmlRightFromSource = _sourceForChange.find('.feed-dzsap-for-extra-html-right').eq(0);\n      } else {\n        // -- we use this for Shop Builder\n        if(selfClass._sourcePlayer){\n\n          if (selfClass._sourcePlayer.attr('data-playerid') && $(document).find('.feed-dzsap-for-extra-html-right[data-playerid=\"' + selfClass._sourcePlayer.attr('data-playerid') + '\"]').length) {\n            $feedExtraHtmlRightFromSource = $(document).find('.feed-dzsap-for-extra-html-right[data-playerid=\"' + selfClass._sourcePlayer.attr('data-playerid') + '\"]').eq(0);\n          }\n        }\n      }\n      console.log('$feedExtraHtmlRightFromSource - ', $feedExtraHtmlRightFromSource);\n      if ($feedExtraHtmlRightFromSource) {\n        selfClass.classMetaParts.set_extraHtmlFloatRight($feedExtraHtmlRightFromSource.html());\n\n      }\n    }\n\n    if (changeMediaArgs.artist) {\n      selfClass.cthis.find('.the-artist').html(changeMediaArgs.artist);\n    }\n    if (changeMediaArgs.song_name) {\n      selfClass.cthis.find('.the-name').html(changeMediaArgs.song_name);\n    }\n\n\n    if (changeMediaArgsDefaults.source_player_do_not_update === 'on') {\n      selfClass.set_sourcePlayer(null);\n    }\n\n\n    // console.error('changeMediaArgs.source - ',changeMediaArgs.source,changeMediaArgs.type, type);\n    if (original_type === 'soundcloud' && changeMediaArgs.source.indexOf('api.soundcloud') === -1) {\n      selfClass.data_source = changeMediaArgs.source;\n      // console.log(\"RETRIEVE SOUNDCLOUD URL\");\n      selfClass.isPlayPromised = true;\n      setTimeout(function () {\n        selfClass.isPlayPromised = true;\n      }, 501);\n      dzsapMisc.retrieve_soundcloud_url(selfClass);\n\n    } else {\n\n      // -- setup media for all sources\n      // -- make sure source is not fake\n      selfClass.setup_media({\n        'called_from': 'change_media'\n      });\n    }\n\n\n    selfClass.timeModel.getSampleTimesFromDom(selfClass._sourcePlayer);\n\n\n    if (selfClass.audioType === 'fake') {\n      return false;\n    }\n\n    if (selfClass.initOptions.action_audio_change_media) {\n      selfClass.initOptions.action_audio_change_media(changeMediaArgs.source, changeMediaArgs);\n    }\n\n\n    //console.log(\"IS MOBILE - \",dzsapHelpers.dzsap_is_mobile());\n    // console.log('%c before autoplay changeMediaArgs - ','color: #dadada;',changeMediaArgs, dzsapHelpers.dzsap_is_mobile());\n\n    // console.log({changeMediaArgs});\n    if (changeMediaArgs.autoplay === 'on') {\n      selfClass.play_media_visual();\n\n      setTimeout(function () {\n        selfClass.play_media({\n          'called_from': 'changeMediaArgs.autoplay'\n        });\n      }, 500);\n    }\n    selfClass.reinit();\n    setTimeout(function () {\n\n      selfClass.handleResize(null, {\n        called_from: 'change_media'\n      });\n    }, handle_resize_delay)\n  }\n}\n","import * as dzsapHelpers from '../_dzsap_helpers';\n\nimport {ConstantsDzsAp} from \"../../configs/_constants\";\nimport * as dzsHelpers from \"../../js_common/_dzs_helpers\";\n\nwindow.dzsap_wavesurfer_load_attempt = 0;\nwindow.dzsap_wavesurfer_is_trying_to_generate = null;\n\n\nvar dzsapWaveRender = this;\n\n/**\n * called on init_loaded\n * @param selfClass\n * @param pargs\n * @returns {boolean}\n */\nexport function scrubModeWave__checkIfWeShouldTryToGetPcm(selfClass, pargs) {\n\n\n  var margs = {\n    'call_from': 'default'\n    , 'call_attempt': 0\n  };\n  if (pargs) {\n    margs = jQuery.extend(margs, pargs);\n  }\n\n  // console.groupCollapsed('scrubModeWave__checkIfWeShouldTryToGetPcm()')\n  // console.log(selfClass, selfClass.cthis);\n  // console.trace();\n  // console.groupEnd();\n\n  // -- retry\n  if (window.dzsap_wavesurfer_is_trying_to_generate) {\n    setTimeout(function () {\n      // console.log('margs.call_attempt - ', margs.call_attempt);\n      margs.call_attempt++;\n      if (margs.call_attempt < 10) {\n        scrubModeWave__checkIfWeShouldTryToGetPcm(selfClass, margs);\n        ;\n        console.log('%c [dzsap] trying to regenerate ', ConstantsDzsAp.DEBUG_STYLE_1, window.dzsap_wavesurfer_is_trying_to_generate);\n      }\n    }, 1000)\n    return false;\n  }\n\n\n\n  // console.log({isWeShouldGeneratePcm}, 'isWeCanGeneratePcm(selfClass) - ', isWeCanGeneratePcm(selfClass));\n  if (selfClass.isPcmRequiredToGenerate) {\n\n    if (isWeCanGeneratePcm(selfClass)) {\n\n      window.dzsap_wavesurfer_is_trying_to_generate = selfClass;\n\n\n      window.dzsap_get_base_url();\n\n      let wavesurferUrl = window.dzsap_base_url ? window.dzsap_base_url + '/parts/wavesurfer/dzsap-wave-generate.js' : ConstantsDzsAp.URL_WAVESURFER_HELPER_BACKUP;\n\n      // wavesurferUrl = ConstantsDzsAp.URL_WAVESURFER_HELPER_BACKUP;\n      // console.log({wavesurferUrl});\n\n      window.scrubModeWave__view_transitionIn = scrubModeWave__view_transitionIn;\n\n      // console.log('[load dzsap-wave-generate] --- window.scrubModeWave__initGenerateWaveData - ', window.scrubModeWave__initGenerateWaveData, selfClass.cthis);\n      dzsHelpers.loadScriptIfItDoesNotExist(wavesurferUrl, window.scrubModeWave__initGenerateWaveData).then((resolveStr) => {\n        // console.log('resolveStr - ', resolveStr);\n        scrubModeWave__initGenerateWaveData(selfClass);\n      });\n    }\n  }\n}\n\nfunction isWeCanGeneratePcm(selfClass) {\n\n  if (selfClass.isAlreadyHasRealPcm) {\n    return false;\n  }\n  return selfClass.data_source != 'fake';\n\n}\n\nexport function view_drawCanvases(selfClass, argpcm, calledFrom) {\n  var o = selfClass.initOptions;\n\n  draw_canvas(selfClass._scrubbarbg_canvas.get(0), argpcm, \"#\" + o.design_wave_color_bg, {\n    call_from: calledFrom + '_bg',\n    selfClass,\n    'skinwave_wave_mode_canvas_waves_number': parseInt(o.skinwave_wave_mode_canvas_waves_number, 10),\n    'skinwave_wave_mode_canvas_waves_padding': parseInt(o.skinwave_wave_mode_canvas_waves_padding, 10)\n  });\n  draw_canvas(selfClass._scrubbarprog_canvas.get(0), argpcm, '#' + o.design_wave_color_progress, {\n      call_from: calledFrom + '_prog',\n      selfClass,\n      'skinwave_wave_mode_canvas_waves_number': parseInt(o.skinwave_wave_mode_canvas_waves_number, 10),\n      'skinwave_wave_mode_canvas_waves_padding': parseInt(o.skinwave_wave_mode_canvas_waves_padding, 10),\n    },\n    true);\n}\n\n/**\n * called after random\n * called on wavesurfer error / success\n * @param selfClass\n * @param argpcm\n */\nexport function scrubModeWave__view_transitionIn(selfClass, argpcm) {\n\n  // console.log('scrubModeWave__view_transitionIn()');\n\n\n  selfClass._scrubbar.find('.scrub-bg-img,.scrub-prog-img').removeClass('transitioning-in');\n  selfClass._scrubbar.find('.scrub-bg-img,.scrub-prog-img').addClass('transitioning-out');\n  ;\n\n  dzsapHelpers.scrubbar_modeWave_setupCanvas({\n    'prepare_for_transition_in': true\n  }, selfClass);\n\n  view_drawCanvases(selfClass, argpcm, 'canvas_generate_wave_data_animate_pcm');\n\n\n  setTimeout(() => {\n    dzsapHelpers.scrubbar_modeWave_clearObsoleteCanvas(selfClass);\n  }, 300);\n\n  // -- warning - not always real pcm\n  selfClass.isAlreadyHasRealPcm = true;\n  selfClass.scrubbar_reveal();\n}\n\n\n/**\n * draw canvas here\n * @param $canvas_\n * @param pcm_arr\n * @param hexcolor\n * @param pargs\n * @param isProgressScrubContext\n * @returns {boolean}\n */\nexport function draw_canvas($canvas_, pcm_arr, hexcolor, pargs, isProgressScrubContext) {\n  var margs = {\n    'call_from': 'default',\n    'is_sample': false,\n    'selfClass': null,\n    'sample_time_start': 0,\n    'sample_time_end': 0,\n    'sample_time_total': 0,\n    'skinwave_wave_mode_canvas_waves_number': 2,\n    'skinwave_wave_mode_canvas_waves_padding': 1,\n  };\n\n  var $ = jQuery;\n  if (pargs) {\n    margs = Object.assign(margs, pargs);\n  }\n\n  hexcolor = dzsapHelpers.sanitizeToHexColor(hexcolor);\n\n  var _canvas = $($canvas_);\n  var __canvas = $canvas_;\n  let isWithinSample = false;\n  var {selfClass, skinwave_wave_mode_canvas_waves_number, skinwave_wave_mode_canvas_waves_padding} = margs;\n\n  // -- sanitize\n  if (isNaN(Number(skinwave_wave_mode_canvas_waves_number))) {\n    skinwave_wave_mode_canvas_waves_number = 2;\n  }\n\n  if (isNaN(Number(skinwave_wave_mode_canvas_waves_padding))) {\n    if (skinwave_wave_mode_canvas_waves_number !== 1) {\n      skinwave_wave_mode_canvas_waves_padding = 1;\n    } else {\n\n      skinwave_wave_mode_canvas_waves_padding = 0;\n    }\n  }\n\n\n  if (selfClass) {\n    var o = selfClass.initOptions;\n  }\n  // console.log('o - ', o);\n\n\n  // console.log('[dzsap] draw_canvas() - ', margs, margs.call_from, 'hexcolor - ', hexcolor, _canvas);\n  if (_canvas && _canvas.get(0)) {\n\n  } else {\n    return false;\n  }\n\n  var _canvasContext = _canvas.get(0).getContext(\"2d\");\n\n  var ar_str = pcm_arr;\n\n\n  var waves = [];\n  // console.log('selfClass - ', selfClass);\n  if (selfClass && selfClass._scrubbar) {\n    if (selfClass._scrubbarprog_canvas) {\n      selfClass._scrubbarbg_canvas.width(selfClass._scrubbar.width());\n      selfClass._scrubbarprog_canvas.width(selfClass._scrubbar.width());\n      $canvas_.width = selfClass._scrubbar.width();\n      $canvas_.height = selfClass._scrubbar.height();\n    }\n  }\n  // ctx.translate(0.5, 0.5);\n  // ctx.lineWidth = .5;\n\n  _canvasContext.imageSmoothingEnabled = false;\n  _canvasContext.imageSmoothing = false;\n  _canvasContext.imageSmoothingQuality = \"high\";\n  _canvasContext.webkitImageSmoothing = false;\n\n  if (pcm_arr) {\n\n  } else {\n    setTimeout(function () {\n      // draw_canvas(_arg,pcm_arr,hexcolor);\n    }, 1000);\n    return false;\n  }\n\n  if (typeof (ar_str) == 'object') {\n    waves = ar_str;\n  } else {\n    try {\n\n      waves = JSON.parse(ar_str);\n    } catch (err) {\n      // console.error('parse error - ',ar_str, ar_str!='');\n    }\n  }\n\n\n  var barIndex = 0,\n    max = 0;\n\n  // console.log(ar);\n\n  // -- normalizing\n  for (barIndex = 0; barIndex < waves.length; barIndex++) {\n    if ((waves[barIndex]) > max) {\n      max = (waves[barIndex]);\n    }\n  }\n\n  var ar_new = [];\n  for (barIndex = 0; barIndex < waves.length; barIndex++) {\n    ar_new[barIndex] = parseFloat(Math.abs(waves[barIndex]) / Number(max));\n  }\n\n  waves = ar_new;\n\n\n  var widthCanvas;\n  var heightCanvas;\n  var gradient = null;\n\n\n  if (selfClass) {\n\n    __canvas.width = selfClass._scrubbar.width();\n  }\n\n  widthCanvas = __canvas.width;\n  heightCanvas = __canvas.height;\n\n\n  var barCount = skinwave_wave_mode_canvas_waves_number;\n  var bar_space = skinwave_wave_mode_canvas_waves_padding;\n\n  // console.log(bar_len);\n  if (barCount == 1) {\n    barCount = widthCanvas / barCount;\n  }\n  if (barCount == 2) {\n    barCount = widthCanvas / 2;\n  }\n  if (barCount == 3) {\n    barCount = (widthCanvas) / 3;\n  }\n\n  // console.log('bar_len - ',bar_len);\n  // console.log('pcm_arr - ',pcm_arr);\n\n\n  var reflection_size = parseFloat(o.skinwave_wave_mode_canvas_reflection_size);\n\n  if (widthCanvas / barCount < 1) {\n    barCount = Math.ceil(barCount / 3);\n\n  }\n\n\n  // console.log({reflection_size});\n  var bar_w = Math.ceil(widthCanvas / barCount);\n  var normal_size_ratio = 1 - reflection_size;\n\n  // console.log(\"bar_w - \",bar_w);\n  // console.log({normal_size_ratio});\n\n  if (bar_w == 0) {\n    bar_w = 1;\n    bar_space = 0;\n  }\n  if (bar_w == 1) {\n    bar_space = bar_space / 2;\n  }\n  // console.log('bar_w - ', bar_w, bar_space);\n\n\n  // console.log('chh - ', chh, ' normal_size_ratio - ', normal_size_ratio, 'ar - ', ar);\n  var lastBarHeight = 0;\n  var searched_index = null;\n\n\n  // -- left right gradient\n  var temp_hex = hexcolor;\n  temp_hex = temp_hex.replace('#', '');\n  var hexcolors = []; // -- hex colors array\n  if (temp_hex.indexOf(',') > -1) {\n    hexcolors = temp_hex.split(',');\n  }\n\n\n  var progress_hexcolor = '';\n  var progress_hexcolors = '';\n\n\n  if (margs.call_from == 'spectrum') {\n    progress_hexcolor = o.design_wave_color_progress;\n    progress_hexcolor = progress_hexcolor.replace('#', '');\n    progress_hexcolors = []; // -- hex colors array\n    if (progress_hexcolor.indexOf(',') > -1) {\n      progress_hexcolors = progress_hexcolor.split(',');\n\n    }\n  }\n\n\n  var spectrum_isBarWithinProgress = false; // -- color the bar in progress colors\n\n  // -- left right gradient END\n\n\n  /**\n   * draw with different color\n   * @param i\n   * @returns {boolean}\n   */\n  function isBeforeOrAfterSample(currBarIndex) {\n\n    // console.log('sampleTimes - ', currBarIndex, selfClass.timeModel.sampleTimeStart, selfClass.timeModel.sampleTimeEnd, selfClass.timeModel.sampleTimeTotal);\n\n    if ((currBarIndex / barCount < selfClass.timeModel.sampleTimeStart / selfClass.timeModel.sampleTimeTotal) || currBarIndex / barCount > selfClass.timeModel.sampleTimeEnd / selfClass.timeModel.sampleTimeTotal) {\n\n      return true;\n    }\n    return false;\n  }\n\n  function view_drawBars(isReflection = false) {\n    for (barIndex = 0; barIndex < barCount; barIndex++) {\n      isWithinSample = false;\n      _canvasContext.save();\n\n      // console.log('ar[searched_index] - ', ar[searched_index]);\n      searched_index = Math.ceil(barIndex * (waves.length / barCount));\n\n      // -- we'll try to prevent\n      if (barIndex < barCount / 5) {\n        if (waves[searched_index] < 0.1) {\n          waves[searched_index] = 0.1;\n        }\n      }\n      if (waves.length > barCount * 2.5 && barIndex > 0 && barIndex < waves.length - 1) {\n        waves[searched_index] = Math.abs(waves[searched_index] + waves[searched_index - 1] + waves[searched_index + 1]) / 3\n      }\n      // -- normalize end\n\n\n      // var barh = Math.abs(ar[searched_index] * chh);\n      let targetRatio = normal_size_ratio;\n      if (isReflection) {\n        targetRatio = reflection_size;\n      }\n\n      var barHeight = Math.abs(waves[searched_index] * heightCanvas * targetRatio);\n\n      // -- let's try to normalize\n      if (o.skinwave_wave_mode_canvas_normalize == 'on') {\n        if (isNaN(lastBarHeight)) {\n          lastBarHeight = 0;\n        }\n        barHeight = barHeight / 1.5 + lastBarHeight / 2.5;\n      }\n      lastBarHeight = barHeight;\n\n\n      _canvasContext.lineWidth = 0;\n      barHeight = Math.floor(barHeight);\n      // debugger;\n      // if(isReflection){\n      //   console.log('isReflection', {bar: waves[searched_index], barHeight, targetRatio, heightCanvas});\n      // }\n\n      // var y = chh * normal_size_ratio - barh_normal;\n      var barPositionTop = isReflection ? heightCanvas * normal_size_ratio : Math.ceil(heightCanvas * targetRatio - barHeight);\n\n      // if(isReflection){\n      //   console.log('isReflection', {barPositionTop});\n      // }\n      _canvasContext.beginPath();\n      _canvasContext.rect(barIndex * bar_w, barPositionTop, bar_w - bar_space, barHeight);\n\n      // console.log('[dzsap] [waveform] draw rect props - ', i * bar_w, bar_w - bar_space ,barh_normal, ' bar_w - ', bar_w, 'bar_space - ',bar_space);\n      // console.log('barh_normal - ', barh_normal, ' y - ', y);\n\n\n      if (margs.call_from == 'spectrum') {\n        if (barIndex / barCount < selfClass.timeCurrent / selfClass.timeTotal) {\n          spectrum_isBarWithinProgress = true;\n        } else {\n          spectrum_isBarWithinProgress = false;\n        }\n      }\n\n\n      if (selfClass.isSample) {\n        isWithinSample = isBeforeOrAfterSample(barIndex);\n      }\n      // console.log({isWithinSample, spectrum_isBarWithinProgress});\n\n      if (spectrum_isBarWithinProgress) {\n        if (isReflection && o.skinwave_wave_mode_canvas_mode !== 'reflecto') {\n          _canvasContext.fillStyle = dzsapHelpers.hexToRgb(progress_hexcolor, 0.25);\n        } else {\n          _canvasContext.fillStyle = isWithinSample ? dzsapHelpers.hexToRgb(progress_hexcolor, 0.5) : '#' + progress_hexcolor;\n        }\n\n\n        if (progress_hexcolors.length) {\n\n          const startColor = isReflection && o.skinwave_wave_mode_canvas_mode !== 'reflecto' ? dzsapHelpers.hexToRgb('#' + progress_hexcolors[0], 0.25) : '#' + progress_hexcolors[0];\n          const endColor = isReflection && o.skinwave_wave_mode_canvas_mode !== 'reflecto' ? dzsapHelpers.hexToRgb('#' + progress_hexcolors[1], 0.25) : '#' + progress_hexcolors[1];\n\n          gradient = _canvasContext.createLinearGradient(0, 0, 0, heightCanvas);\n          gradient.addColorStop(0, startColor);\n          gradient.addColorStop(1, endColor);\n          _canvasContext.fillStyle = gradient;\n        }\n\n      } else {\n        /**\n         * normal\n         */\n\n        // -- NORMAL not progress\n        if (isReflection && o.skinwave_wave_mode_canvas_mode !== 'reflecto') {\n          _canvasContext.fillStyle = dzsapHelpers.hexToRgb(hexcolor, 0.25);\n        } else {\n          // console.log({hexcolor});\n          _canvasContext.fillStyle = isWithinSample ? dzsapHelpers.hexToRgb(hexcolor, 0.5) : '' + hexcolor;\n        }\n\n        // -- if we have gradient\n        if (hexcolors.length) {\n          const startColor = isReflection && o.skinwave_wave_mode_canvas_mode !== 'reflecto' ? dzsapHelpers.hexToRgb(dzsapHelpers.utils_sanitizeToColor(hexcolors[0]), 0.25) : '' + dzsapHelpers.utils_sanitizeToColor(hexcolors[0]);\n          const endColor = isReflection && o.skinwave_wave_mode_canvas_mode !== 'reflecto' ? dzsapHelpers.hexToRgb(dzsapHelpers.utils_sanitizeToColor(hexcolors[1]), 0.25) : '' + dzsapHelpers.utils_sanitizeToColor(hexcolors[1]);\n\n          gradient = _canvasContext.createLinearGradient(0, 0, 0, heightCanvas);\n          gradient.addColorStop(0, startColor);\n          gradient.addColorStop(1, endColor);\n          _canvasContext.fillStyle = gradient;\n        }\n        // if (!isReflection && isProgressScrubContext) {\n        // console.log('scrubProgress -  _canvasContext.fillStyle - ', _canvasContext.fillStyle, {isWithinSample});\n        // }\n        // if(isReflection){\n        //   console.log('isReflection _canvasContext.fillStyle - ', _canvasContext.fillStyle);\n        // }\n      }\n\n\n      if (!(isWithinSample && isProgressScrubContext)) {\n\n        // console.log('ctx.fillStyle - ',ctx.fillStyle);\n        _canvasContext.fill();\n        _canvasContext.closePath();\n      }\n\n\n      _canvasContext.restore();\n\n    }\n\n  }\n\n\n  _canvasContext.clearRect(0, 0, widthCanvas, heightCanvas);\n  // console.log('bar_len - ', bar_len);\n  view_drawBars();\n  view_drawBars(true);\n\n  // -- reflection\n  setTimeout(function () {\n    selfClass.scrubbar_reveal();\n  }, 100)\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"../source/audioplayer/audioplayer.sourcepack.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}